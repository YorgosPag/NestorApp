{"numFailedTestSuites":12,"numFailedTests":33,"numPassedTestSuites":8,"numPassedTests":296,"numPendingTestSuites":0,"numPendingTests":0,"numRuntimeErrorTestSuites":0,"numTodoTests":0,"numTotalTestSuites":20,"numTotalTests":329,"openHandles":[],"snapshot":{"added":0,"didUpdate":false,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0},"startTime":1768084857997,"success":false,"testResults":[{"assertionResults":[{"ancestorTitles":["ðŸŽ² Property-Based Coordinate Testing"],"duration":146,"failing":false,"failureDetails":[{}],"failureMessages":["Error: Property failed after 43 tests\n{ seed: 42, path: \"42:13:2:2:2:5:34:14:0:3:10:25:2:1:10:12:0:1:4\", endOnFailure: true }\nCounterexample: [{\"width\":424,\"height\":240},{\"scale\":0.0528720123073717,\"offsetX\":1e-323,\"offsetY\":-6.697996805319361e-66}]\nShrunk 18 time(s)\nGot error: Property failed by returning false\n\nEncountered failures were:\n- [{\"width\":467,\"height\":245},{\"scale\":0.09776845905037185,\"offsetX\":3.5e-323,\"offsetY\":-4.709798632571917e-62}]\n- [{\"width\":467,\"height\":245},{\"scale\":0.054475672143889445,\"offsetX\":3.5e-323,\"offsetY\":-4.709798632571917e-62}]\n- [{\"width\":431,\"height\":245},{\"scale\":0.054475672143889445,\"offsetX\":3.5e-323,\"offsetY\":-4.709798632571917e-62}]\n- [{\"width\":427,\"height\":245},{\"scale\":0.054475672143889445,\"offsetX\":3.5e-323,\"offsetY\":-4.709798632571917e-62}]\n- [{\"width\":427,\"height\":240},{\"scale\":0.054475672143889445,\"offsetX\":3.5e-323,\"offsetY\":-4.709798632571917e-62}]\n- [{\"width\":427,\"height\":240},{\"scale\":0.05287201230755842,\"offsetX\":3.5e-323,\"offsetY\":-4.709798632571917e-62}]\n- [{\"width\":427,\"height\":240},{\"scale\":0.052872012307371735,\"offsetX\":3.5e-323,\"offsetY\":-4.709798632571917e-62}]\n- [{\"width\":427,\"height\":240},{\"scale\":0.052872012307371714,\"offsetX\":3.5e-323,\"offsetY\":-4.709798632571917e-62}]\n- [{\"width\":425,\"height\":240},{\"scale\":0.052872012307371714,\"offsetX\":3.5e-323,\"offsetY\":-4.709798632571917e-62}]\n- [{\"width\":425,\"height\":240},{\"scale\":0.052872012307371714,\"offsetX\":2e-323,\"offsetY\":-4.709798632571917e-62}]\n- [{\"width\":425,\"height\":240},{\"scale\":0.052872012307371714,\"offsetX\":2e-323,\"offsetY\":-6.698011351267162e-66}]\n- [{\"width\":425,\"height\":240},{\"scale\":0.052872012307371714,\"offsetX\":2e-323,\"offsetY\":-6.697996861987199e-66}]\n- [{\"width\":425,\"height\":240},{\"scale\":0.052872012307371714,\"offsetX\":1e-323,\"offsetY\":-6.697996861987199e-66}]\n- [{\"width\":425,\"height\":240},{\"scale\":0.05287201230737171,\"offsetX\":1e-323,\"offsetY\":-6.697996861987199e-66}]\n- [{\"width\":425,\"height\":240},{\"scale\":0.05287201230737171,\"offsetX\":1e-323,\"offsetY\":-6.69799680538845e-66}]\n- [{\"width\":425,\"height\":240},{\"scale\":0.05287201230737171,\"offsetX\":1e-323,\"offsetY\":-6.697996805333178e-66}]\n- [{\"width\":424,\"height\":240},{\"scale\":0.05287201230737171,\"offsetX\":1e-323,\"offsetY\":-6.697996805333178e-66}]\n- [{\"width\":424,\"height\":240},{\"scale\":0.0528720123073717,\"offsetX\":1e-323,\"offsetY\":-6.697996805333178e-66}]\n- [{\"width\":424,\"height\":240},{\"scale\":0.0528720123073717,\"offsetX\":1e-323,\"offsetY\":-6.697996805319361e-66}]\n    at buildError (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\fast-check@3.23.2\\node_modules\\fast-check\\lib\\check\\runner\\utils\\RunDetailsFormatter.js:132:15)\n    at throwIfFailed (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\fast-check@3.23.2\\node_modules\\fast-check\\lib\\check\\runner\\utils\\RunDetailsFormatter.js:144:11)\n    at reportRunDetails (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\fast-check@3.23.2\\node_modules\\fast-check\\lib\\check\\runner\\utils\\RunDetailsFormatter.js:157:16)\n    at Object.assert (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\fast-check@3.23.2\\node_modules\\fast-check\\lib\\check\\runner\\Runner.js:73:52)\n    at Object.assert (C:\\Nestor_Pagonis\\src\\subapps\\dxf-viewer\\__tests__\\coord.prop.test.ts:59:8)\n    at Promise.finally.completed (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at _runTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\index.js:275:16)\n    at runTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\index.js:343:7)"],"fullName":"ðŸŽ² Property-Based Coordinate Testing coordinate reversibility property holds","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1768084861081,"status":"failed","title":"coordinate reversibility property holds"},{"ancestorTitles":["ðŸŽ² Property-Based Coordinate Testing"],"duration":29,"failing":false,"failureDetails":[{}],"failureMessages":["Error: Property failed after 195 tests\n{ seed: 123, path: \"194:0:0:56:56:56:56\", endOnFailure: true }\nCounterexample: [{\"width\":320,\"height\":240},{\"scale\":Number.NaN,\"offsetX\":0,\"offsetY\":0},{\"x\":0,\"y\":0}]\nShrunk 6 time(s)\nGot error: Property failed by returning false\n\nEncountered failures were:\n- [{\"width\":3396,\"height\":1490},{\"scale\":Number.NaN,\"offsetX\":3.04412840619638e-284,\"offsetY\":-2.3771899837045986e-79},{\"x\":-3.983816127658363e-144,\"y\":3e-323}]\n- [{\"width\":320,\"height\":1490},{\"scale\":Number.NaN,\"offsetX\":3.04412840619638e-284,\"offsetY\":-2.3771899837045986e-79},{\"x\":-3.983816127658363e-144,\"y\":3e-323}]\n- [{\"width\":320,\"height\":240},{\"scale\":Number.NaN,\"offsetX\":3.04412840619638e-284,\"offsetY\":-2.3771899837045986e-79},{\"x\":-3.983816127658363e-144,\"y\":3e-323}]\n- [{\"width\":320,\"height\":240},{\"scale\":Number.NaN,\"offsetX\":0,\"offsetY\":-2.3771899837045986e-79},{\"x\":-3.983816127658363e-144,\"y\":3e-323}]\n- [{\"width\":320,\"height\":240},{\"scale\":Number.NaN,\"offsetX\":0,\"offsetY\":0},{\"x\":-3.983816127658363e-144,\"y\":3e-323}]\n- [{\"width\":320,\"height\":240},{\"scale\":Number.NaN,\"offsetX\":0,\"offsetY\":0},{\"x\":0,\"y\":3e-323}]\n- [{\"width\":320,\"height\":240},{\"scale\":Number.NaN,\"offsetX\":0,\"offsetY\":0},{\"x\":0,\"y\":0}]\n    at buildError (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\fast-check@3.23.2\\node_modules\\fast-check\\lib\\check\\runner\\utils\\RunDetailsFormatter.js:132:15)\n    at throwIfFailed (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\fast-check@3.23.2\\node_modules\\fast-check\\lib\\check\\runner\\utils\\RunDetailsFormatter.js:144:11)\n    at reportRunDetails (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\fast-check@3.23.2\\node_modules\\fast-check\\lib\\check\\runner\\utils\\RunDetailsFormatter.js:157:16)\n    at Object.assert (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\fast-check@3.23.2\\node_modules\\fast-check\\lib\\check\\runner\\Runner.js:73:52)\n    at Object.assert (C:\\Nestor_Pagonis\\src\\subapps\\dxf-viewer\\__tests__\\coord.prop.test.ts:87:8)\n    at Promise.finally.completed (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at _runTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\index.js:275:16)\n    at runTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\index.js:343:7)"],"fullName":"ðŸŽ² Property-Based Coordinate Testing inverse coordinate reversibility property holds","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1768084861244,"status":"failed","title":"inverse coordinate reversibility property holds"},{"ancestorTitles":["ðŸŽ² Property-Based Coordinate Testing"],"duration":22,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ðŸŽ² Property-Based Coordinate Testing scale invariance property holds","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1768084861274,"status":"passed","title":"scale invariance property holds"},{"ancestorTitles":["ðŸŽ² Property-Based Coordinate Testing"],"duration":2,"failing":false,"failureDetails":[{}],"failureMessages":["Error: Property failed after 1 tests\n{ seed: 782330291, path: \"0:0:0:0:0:0\", endOnFailure: true }\nCounterexample: [{\"width\":320,\"height\":240},{\"scale\":0.01,\"offsetX\":0,\"offsetY\":0}]\nShrunk 5 time(s)\nGot error: Property failed by returning false\n\nEncountered failures were:\n- [{\"width\":2527,\"height\":246},{\"scale\":34.352565963814875,\"offsetX\":-1.5e-322,\"offsetY\":6.783514868078967e-198}]\n- [{\"width\":320,\"height\":246},{\"scale\":34.352565963814875,\"offsetX\":-1.5e-322,\"offsetY\":6.783514868078967e-198}]\n- [{\"width\":320,\"height\":240},{\"scale\":34.352565963814875,\"offsetX\":-1.5e-322,\"offsetY\":6.783514868078967e-198}]\n- [{\"width\":320,\"height\":240},{\"scale\":0.01,\"offsetX\":-1.5e-322,\"offsetY\":6.783514868078967e-198}]\n- [{\"width\":320,\"height\":240},{\"scale\":0.01,\"offsetX\":0,\"offsetY\":6.783514868078967e-198}]\n- [{\"width\":320,\"height\":240},{\"scale\":0.01,\"offsetX\":0,\"offsetY\":0}]\n    at buildError (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\fast-check@3.23.2\\node_modules\\fast-check\\lib\\check\\runner\\utils\\RunDetailsFormatter.js:132:15)\n    at throwIfFailed (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\fast-check@3.23.2\\node_modules\\fast-check\\lib\\check\\runner\\utils\\RunDetailsFormatter.js:144:11)\n    at reportRunDetails (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\fast-check@3.23.2\\node_modules\\fast-check\\lib\\check\\runner\\utils\\RunDetailsFormatter.js:157:16)\n    at Object.assert (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\fast-check@3.23.2\\node_modules\\fast-check\\lib\\check\\runner\\Runner.js:73:52)\n    at Object.assert (C:\\Nestor_Pagonis\\src\\subapps\\dxf-viewer\\__tests__\\coord.prop.test.ts:149:8)\n    at Promise.finally.completed (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at _runTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\index.js:275:16)\n    at runTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\index.js:343:7)"],"fullName":"ðŸŽ² Property-Based Coordinate Testing origin point transformation property","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1768084861297,"status":"failed","title":"origin point transformation property"},{"ancestorTitles":["ðŸŽ² Property-Based Coordinate Testing"],"duration":7,"failing":false,"failureDetails":[{}],"failureMessages":["Error: Property failed after 23 tests\n{ seed: 370690182, path: \"22:64\", endOnFailure: true }\nCounterexample: [[{\"width\":4096,\"height\":2160},{\"scale\":0.001,\"offsetX\":0,\"offsetY\":0},{\"x\":Number.NaN,\"y\":0}]]\nShrunk 1 time(s)\nGot error: Property failed by returning false\n\nEncountered failures were:\n- [[{\"width\":4096,\"height\":2160},{\"scale\":0.001,\"offsetX\":0,\"offsetY\":0},{\"x\":Number.NaN,\"y\":2.215121342415675e-230}]]\n- [[{\"width\":4096,\"height\":2160},{\"scale\":0.001,\"offsetX\":0,\"offsetY\":0},{\"x\":Number.NaN,\"y\":0}]]\n    at buildError (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\fast-check@3.23.2\\node_modules\\fast-check\\lib\\check\\runner\\utils\\RunDetailsFormatter.js:132:15)\n    at throwIfFailed (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\fast-check@3.23.2\\node_modules\\fast-check\\lib\\check\\runner\\utils\\RunDetailsFormatter.js:144:11)\n    at reportRunDetails (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\fast-check@3.23.2\\node_modules\\fast-check\\lib\\check\\runner\\utils\\RunDetailsFormatter.js:157:16)\n    at Object.assert (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\fast-check@3.23.2\\node_modules\\fast-check\\lib\\check\\runner\\Runner.js:73:52)\n    at Object.assert (C:\\Nestor_Pagonis\\src\\subapps\\dxf-viewer\\__tests__\\coord.prop.test.ts:190:8)\n    at Promise.finally.completed (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at _runTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\index.js:275:16)\n    at runTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\index.js:343:7)"],"fullName":"ðŸŽ² Property-Based Coordinate Testing boundary conditions property holds","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1768084861300,"status":"failed","title":"boundary conditions property holds"},{"ancestorTitles":["ðŸŽ² Property-Based Coordinate Testing"],"duration":11,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ðŸŽ² Property-Based Coordinate Testing transformation performance property","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1768084861307,"status":"passed","title":"transformation performance property"},{"ancestorTitles":["ðŸŽ² Property-Based Coordinate Testing"],"duration":26,"failing":false,"failureDetails":[{}],"failureMessages":["Error: Property failed after 16 tests\n{ seed: -1288216663, path: \"15:19:0:0:63\", endOnFailure: true }\nCounterexample: [[{\"width\":533,\"height\":2151},{\"scale\":0.01,\"offsetX\":0,\"offsetY\":0},{\"x\":Number.NaN,\"y\":0}]]\nShrunk 4 time(s)\nGot error: Property failed by returning false\n\nEncountered failures were:\n- [[{\"width\":533,\"height\":2151},{\"scale\":0.05381239483070635,\"offsetX\":1.24e-322,\"offsetY\":-1.496080821949732e-221},{\"x\":Number.NaN,\"y\":3.168140949673016e-161}]]\n- [[{\"width\":533,\"height\":2151},{\"scale\":0.01,\"offsetX\":1.24e-322,\"offsetY\":-1.496080821949732e-221},{\"x\":Number.NaN,\"y\":3.168140949673016e-161}]]\n- [[{\"width\":533,\"height\":2151},{\"scale\":0.01,\"offsetX\":0,\"offsetY\":-1.496080821949732e-221},{\"x\":Number.NaN,\"y\":3.168140949673016e-161}]]\n- [[{\"width\":533,\"height\":2151},{\"scale\":0.01,\"offsetX\":0,\"offsetY\":0},{\"x\":Number.NaN,\"y\":3.168140949673016e-161}]]\n- [[{\"width\":533,\"height\":2151},{\"scale\":0.01,\"offsetX\":0,\"offsetY\":0},{\"x\":Number.NaN,\"y\":0}]]\n    at buildError (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\fast-check@3.23.2\\node_modules\\fast-check\\lib\\check\\runner\\utils\\RunDetailsFormatter.js:132:15)\n    at throwIfFailed (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\fast-check@3.23.2\\node_modules\\fast-check\\lib\\check\\runner\\utils\\RunDetailsFormatter.js:144:11)\n    at reportRunDetails (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\fast-check@3.23.2\\node_modules\\fast-check\\lib\\check\\runner\\utils\\RunDetailsFormatter.js:157:16)\n    at Object.assert (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\fast-check@3.23.2\\node_modules\\fast-check\\lib\\check\\runner\\Runner.js:73:52)\n    at Object.assert (C:\\Nestor_Pagonis\\src\\subapps\\dxf-viewer\\__tests__\\coord.prop.test.ts:259:8)\n    at Promise.finally.completed (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at _runTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\index.js:275:16)\n    at runTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\index.js:343:7)"],"fullName":"ðŸŽ² Property-Based Coordinate Testing numerical stability under repeated transformations","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1768084861319,"status":"failed","title":"numerical stability under repeated transformations"},{"ancestorTitles":["ðŸ” Property-Based Shrinking Demo"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ðŸ” Property-Based Shrinking Demo demonstrates automatic shrinking to minimal failing case","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1768084861350,"status":"passed","title":"demonstrates automatic shrinking to minimal failing case"}],"endTime":1768084861423,"message":"  â— ðŸŽ² Property-Based Coordinate Testing â€º coordinate reversibility property holds\n\n    Property failed after 43 tests\n    { seed: 42, path: \"42:13:2:2:2:5:34:14:0:3:10:25:2:1:10:12:0:1:4\", endOnFailure: true }\n    Counterexample: [{\"width\":424,\"height\":240},{\"scale\":0.0528720123073717,\"offsetX\":1e-323,\"offsetY\":-6.697996805319361e-66}]\n    Shrunk 18 time(s)\n    Got error: Property failed by returning false\n\n    Encountered failures were:\n    - [{\"width\":467,\"height\":245},{\"scale\":0.09776845905037185,\"offsetX\":3.5e-323,\"offsetY\":-4.709798632571917e-62}]\n    - [{\"width\":467,\"height\":245},{\"scale\":0.054475672143889445,\"offsetX\":3.5e-323,\"offsetY\":-4.709798632571917e-62}]\n    - [{\"width\":431,\"height\":245},{\"scale\":0.054475672143889445,\"offsetX\":3.5e-323,\"offsetY\":-4.709798632571917e-62}]\n    - [{\"width\":427,\"height\":245},{\"scale\":0.054475672143889445,\"offsetX\":3.5e-323,\"offsetY\":-4.709798632571917e-62}]\n    - [{\"width\":427,\"height\":240},{\"scale\":0.054475672143889445,\"offsetX\":3.5e-323,\"offsetY\":-4.709798632571917e-62}]\n    - [{\"width\":427,\"height\":240},{\"scale\":0.05287201230755842,\"offsetX\":3.5e-323,\"offsetY\":-4.709798632571917e-62}]\n    - [{\"width\":427,\"height\":240},{\"scale\":0.052872012307371735,\"offsetX\":3.5e-323,\"offsetY\":-4.709798632571917e-62}]\n    - [{\"width\":427,\"height\":240},{\"scale\":0.052872012307371714,\"offsetX\":3.5e-323,\"offsetY\":-4.709798632571917e-62}]\n    - [{\"width\":425,\"height\":240},{\"scale\":0.052872012307371714,\"offsetX\":3.5e-323,\"offsetY\":-4.709798632571917e-62}]\n    - [{\"width\":425,\"height\":240},{\"scale\":0.052872012307371714,\"offsetX\":2e-323,\"offsetY\":-4.709798632571917e-62}]\n    - [{\"width\":425,\"height\":240},{\"scale\":0.052872012307371714,\"offsetX\":2e-323,\"offsetY\":-6.698011351267162e-66}]\n    - [{\"width\":425,\"height\":240},{\"scale\":0.052872012307371714,\"offsetX\":2e-323,\"offsetY\":-6.697996861987199e-66}]\n    - [{\"width\":425,\"height\":240},{\"scale\":0.052872012307371714,\"offsetX\":1e-323,\"offsetY\":-6.697996861987199e-66}]\n    - [{\"width\":425,\"height\":240},{\"scale\":0.05287201230737171,\"offsetX\":1e-323,\"offsetY\":-6.697996861987199e-66}]\n    - [{\"width\":425,\"height\":240},{\"scale\":0.05287201230737171,\"offsetX\":1e-323,\"offsetY\":-6.69799680538845e-66}]\n    - [{\"width\":425,\"height\":240},{\"scale\":0.05287201230737171,\"offsetX\":1e-323,\"offsetY\":-6.697996805333178e-66}]\n    - [{\"width\":424,\"height\":240},{\"scale\":0.05287201230737171,\"offsetX\":1e-323,\"offsetY\":-6.697996805333178e-66}]\n    - [{\"width\":424,\"height\":240},{\"scale\":0.0528720123073717,\"offsetX\":1e-323,\"offsetY\":-6.697996805333178e-66}]\n    - [{\"width\":424,\"height\":240},{\"scale\":0.0528720123073717,\"offsetX\":1e-323,\"offsetY\":-6.697996805319361e-66}]\n\n    \u001b[0m \u001b[90m 57 |\u001b[39m \u001b[90m   */\u001b[39m\n     \u001b[90m 58 |\u001b[39m   test(\u001b[32m'coordinate reversibility property holds'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 59 |\u001b[39m     fc\u001b[33m.\u001b[39massert(\n     \u001b[90m    |\u001b[39m        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 60 |\u001b[39m       fc\u001b[33m.\u001b[39mproperty(vpArb\u001b[33m,\u001b[39m trArb\u001b[33m,\u001b[39m (vp\u001b[33m,\u001b[39m tf) \u001b[33m=>\u001b[39m {\n     \u001b[90m 61 |\u001b[39m         \u001b[90m// Generate sample points within viewport\u001b[39m\n     \u001b[90m 62 |\u001b[39m         \u001b[36mconst\u001b[39m points \u001b[33m=\u001b[39m fc\u001b[33m.\u001b[39msample(ptArb(vp)\u001b[33m,\u001b[39m \u001b[35m25\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at buildError (node_modules/.pnpm/fast-check@3.23.2/node_modules/fast-check/lib/check/runner/utils/RunDetailsFormatter.js:132:15)\n      at throwIfFailed (node_modules/.pnpm/fast-check@3.23.2/node_modules/fast-check/lib/check/runner/utils/RunDetailsFormatter.js:144:11)\n      at reportRunDetails (node_modules/.pnpm/fast-check@3.23.2/node_modules/fast-check/lib/check/runner/utils/RunDetailsFormatter.js:157:16)\n      at Object.assert (node_modules/.pnpm/fast-check@3.23.2/node_modules/fast-check/lib/check/runner/Runner.js:73:52)\n      at Object.assert (src/subapps/dxf-viewer/__tests__/coord.prop.test.ts:59:8)\n\n  â— ðŸŽ² Property-Based Coordinate Testing â€º inverse coordinate reversibility property holds\n\n    Property failed after 195 tests\n    { seed: 123, path: \"194:0:0:56:56:56:56\", endOnFailure: true }\n    Counterexample: [{\"width\":320,\"height\":240},{\"scale\":Number.NaN,\"offsetX\":0,\"offsetY\":0},{\"x\":0,\"y\":0}]\n    Shrunk 6 time(s)\n    Got error: Property failed by returning false\n\n    Encountered failures were:\n    - [{\"width\":3396,\"height\":1490},{\"scale\":Number.NaN,\"offsetX\":3.04412840619638e-284,\"offsetY\":-2.3771899837045986e-79},{\"x\":-3.983816127658363e-144,\"y\":3e-323}]\n    - [{\"width\":320,\"height\":1490},{\"scale\":Number.NaN,\"offsetX\":3.04412840619638e-284,\"offsetY\":-2.3771899837045986e-79},{\"x\":-3.983816127658363e-144,\"y\":3e-323}]\n    - [{\"width\":320,\"height\":240},{\"scale\":Number.NaN,\"offsetX\":3.04412840619638e-284,\"offsetY\":-2.3771899837045986e-79},{\"x\":-3.983816127658363e-144,\"y\":3e-323}]\n    - [{\"width\":320,\"height\":240},{\"scale\":Number.NaN,\"offsetX\":0,\"offsetY\":-2.3771899837045986e-79},{\"x\":-3.983816127658363e-144,\"y\":3e-323}]\n    - [{\"width\":320,\"height\":240},{\"scale\":Number.NaN,\"offsetX\":0,\"offsetY\":0},{\"x\":-3.983816127658363e-144,\"y\":3e-323}]\n    - [{\"width\":320,\"height\":240},{\"scale\":Number.NaN,\"offsetX\":0,\"offsetY\":0},{\"x\":0,\"y\":3e-323}]\n    - [{\"width\":320,\"height\":240},{\"scale\":Number.NaN,\"offsetX\":0,\"offsetY\":0},{\"x\":0,\"y\":0}]\n\n    \u001b[0m \u001b[90m 85 |\u001b[39m \u001b[90m   */\u001b[39m\n     \u001b[90m 86 |\u001b[39m   test(\u001b[32m'inverse coordinate reversibility property holds'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 87 |\u001b[39m     fc\u001b[33m.\u001b[39massert(\n     \u001b[90m    |\u001b[39m        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 88 |\u001b[39m       fc\u001b[33m.\u001b[39mproperty(vpArb\u001b[33m,\u001b[39m trArb\u001b[33m,\u001b[39m worldPtArb\u001b[33m,\u001b[39m (vp\u001b[33m,\u001b[39m tf\u001b[33m,\u001b[39m worldPt) \u001b[33m=>\u001b[39m {\n     \u001b[90m 89 |\u001b[39m         \u001b[36mconst\u001b[39m screenPt \u001b[33m=\u001b[39m \u001b[33mCoordinateTransforms\u001b[39m\u001b[33m.\u001b[39mworldToScreen(worldPt\u001b[33m,\u001b[39m tf\u001b[33m,\u001b[39m vp)\u001b[33m;\u001b[39m\n     \u001b[90m 90 |\u001b[39m         \u001b[36mconst\u001b[39m backToWorld \u001b[33m=\u001b[39m \u001b[33mCoordinateTransforms\u001b[39m\u001b[33m.\u001b[39mscreenToWorld(screenPt\u001b[33m,\u001b[39m tf\u001b[33m,\u001b[39m vp)\u001b[33m;\u001b[39m\u001b[0m\n\n      at buildError (node_modules/.pnpm/fast-check@3.23.2/node_modules/fast-check/lib/check/runner/utils/RunDetailsFormatter.js:132:15)\n      at throwIfFailed (node_modules/.pnpm/fast-check@3.23.2/node_modules/fast-check/lib/check/runner/utils/RunDetailsFormatter.js:144:11)\n      at reportRunDetails (node_modules/.pnpm/fast-check@3.23.2/node_modules/fast-check/lib/check/runner/utils/RunDetailsFormatter.js:157:16)\n      at Object.assert (node_modules/.pnpm/fast-check@3.23.2/node_modules/fast-check/lib/check/runner/Runner.js:73:52)\n      at Object.assert (src/subapps/dxf-viewer/__tests__/coord.prop.test.ts:87:8)\n\n  â— ðŸŽ² Property-Based Coordinate Testing â€º origin point transformation property\n\n    Property failed after 1 tests\n    { seed: 782330291, path: \"0:0:0:0:0:0\", endOnFailure: true }\n    Counterexample: [{\"width\":320,\"height\":240},{\"scale\":0.01,\"offsetX\":0,\"offsetY\":0}]\n    Shrunk 5 time(s)\n    Got error: Property failed by returning false\n\n    Encountered failures were:\n    - [{\"width\":2527,\"height\":246},{\"scale\":34.352565963814875,\"offsetX\":-1.5e-322,\"offsetY\":6.783514868078967e-198}]\n    - [{\"width\":320,\"height\":246},{\"scale\":34.352565963814875,\"offsetX\":-1.5e-322,\"offsetY\":6.783514868078967e-198}]\n    - [{\"width\":320,\"height\":240},{\"scale\":34.352565963814875,\"offsetX\":-1.5e-322,\"offsetY\":6.783514868078967e-198}]\n    - [{\"width\":320,\"height\":240},{\"scale\":0.01,\"offsetX\":-1.5e-322,\"offsetY\":6.783514868078967e-198}]\n    - [{\"width\":320,\"height\":240},{\"scale\":0.01,\"offsetX\":0,\"offsetY\":6.783514868078967e-198}]\n    - [{\"width\":320,\"height\":240},{\"scale\":0.01,\"offsetX\":0,\"offsetY\":0}]\n\n    \u001b[0m \u001b[90m 147 |\u001b[39m \u001b[90m   */\u001b[39m\n     \u001b[90m 148 |\u001b[39m   test(\u001b[32m'origin point transformation property'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 149 |\u001b[39m     fc\u001b[33m.\u001b[39massert(\n     \u001b[90m     |\u001b[39m        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 150 |\u001b[39m       fc\u001b[33m.\u001b[39mproperty(vpArb\u001b[33m,\u001b[39m trArb\u001b[33m,\u001b[39m (vp\u001b[33m,\u001b[39m tf) \u001b[33m=>\u001b[39m {\n     \u001b[90m 151 |\u001b[39m         \u001b[36mconst\u001b[39m origin\u001b[33m:\u001b[39m \u001b[33mPoint2D\u001b[39m \u001b[33m=\u001b[39m { x\u001b[33m:\u001b[39m \u001b[35m0\u001b[39m\u001b[33m,\u001b[39m y\u001b[33m:\u001b[39m \u001b[35m0\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 152 |\u001b[39m\u001b[0m\n\n      at buildError (node_modules/.pnpm/fast-check@3.23.2/node_modules/fast-check/lib/check/runner/utils/RunDetailsFormatter.js:132:15)\n      at throwIfFailed (node_modules/.pnpm/fast-check@3.23.2/node_modules/fast-check/lib/check/runner/utils/RunDetailsFormatter.js:144:11)\n      at reportRunDetails (node_modules/.pnpm/fast-check@3.23.2/node_modules/fast-check/lib/check/runner/utils/RunDetailsFormatter.js:157:16)\n      at Object.assert (node_modules/.pnpm/fast-check@3.23.2/node_modules/fast-check/lib/check/runner/Runner.js:73:52)\n      at Object.assert (src/subapps/dxf-viewer/__tests__/coord.prop.test.ts:149:8)\n\n  â— ðŸŽ² Property-Based Coordinate Testing â€º boundary conditions property holds\n\n    Property failed after 23 tests\n    { seed: 370690182, path: \"22:64\", endOnFailure: true }\n    Counterexample: [[{\"width\":4096,\"height\":2160},{\"scale\":0.001,\"offsetX\":0,\"offsetY\":0},{\"x\":Number.NaN,\"y\":0}]]\n    Shrunk 1 time(s)\n    Got error: Property failed by returning false\n\n    Encountered failures were:\n    - [[{\"width\":4096,\"height\":2160},{\"scale\":0.001,\"offsetX\":0,\"offsetY\":0},{\"x\":Number.NaN,\"y\":2.215121342415675e-230}]]\n    - [[{\"width\":4096,\"height\":2160},{\"scale\":0.001,\"offsetX\":0,\"offsetY\":0},{\"x\":Number.NaN,\"y\":0}]]\n\n    \u001b[0m \u001b[90m 188 |\u001b[39m     ]\u001b[33m;\u001b[39m\n     \u001b[90m 189 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 190 |\u001b[39m     fc\u001b[33m.\u001b[39massert(\n     \u001b[90m     |\u001b[39m        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 191 |\u001b[39m       fc\u001b[33m.\u001b[39mproperty(\n     \u001b[90m 192 |\u001b[39m         fc\u001b[33m.\u001b[39mconstantFrom(\u001b[33m...\u001b[39mextremeViewports)\u001b[33m.\u001b[39mchain(vp \u001b[33m=>\u001b[39m\n     \u001b[90m 193 |\u001b[39m           fc\u001b[33m.\u001b[39mtuple(\u001b[0m\n\n      at buildError (node_modules/.pnpm/fast-check@3.23.2/node_modules/fast-check/lib/check/runner/utils/RunDetailsFormatter.js:132:15)\n      at throwIfFailed (node_modules/.pnpm/fast-check@3.23.2/node_modules/fast-check/lib/check/runner/utils/RunDetailsFormatter.js:144:11)\n      at reportRunDetails (node_modules/.pnpm/fast-check@3.23.2/node_modules/fast-check/lib/check/runner/utils/RunDetailsFormatter.js:157:16)\n      at Object.assert (node_modules/.pnpm/fast-check@3.23.2/node_modules/fast-check/lib/check/runner/Runner.js:73:52)\n      at Object.assert (src/subapps/dxf-viewer/__tests__/coord.prop.test.ts:190:8)\n\n  â— ðŸŽ² Property-Based Coordinate Testing â€º numerical stability under repeated transformations\n\n    Property failed after 16 tests\n    { seed: -1288216663, path: \"15:19:0:0:63\", endOnFailure: true }\n    Counterexample: [[{\"width\":533,\"height\":2151},{\"scale\":0.01,\"offsetX\":0,\"offsetY\":0},{\"x\":Number.NaN,\"y\":0}]]\n    Shrunk 4 time(s)\n    Got error: Property failed by returning false\n\n    Encountered failures were:\n    - [[{\"width\":533,\"height\":2151},{\"scale\":0.05381239483070635,\"offsetX\":1.24e-322,\"offsetY\":-1.496080821949732e-221},{\"x\":Number.NaN,\"y\":3.168140949673016e-161}]]\n    - [[{\"width\":533,\"height\":2151},{\"scale\":0.01,\"offsetX\":1.24e-322,\"offsetY\":-1.496080821949732e-221},{\"x\":Number.NaN,\"y\":3.168140949673016e-161}]]\n    - [[{\"width\":533,\"height\":2151},{\"scale\":0.01,\"offsetX\":0,\"offsetY\":-1.496080821949732e-221},{\"x\":Number.NaN,\"y\":3.168140949673016e-161}]]\n    - [[{\"width\":533,\"height\":2151},{\"scale\":0.01,\"offsetX\":0,\"offsetY\":0},{\"x\":Number.NaN,\"y\":3.168140949673016e-161}]]\n    - [[{\"width\":533,\"height\":2151},{\"scale\":0.01,\"offsetX\":0,\"offsetY\":0},{\"x\":Number.NaN,\"y\":0}]]\n\n    \u001b[0m \u001b[90m 257 |\u001b[39m \u001b[90m   */\u001b[39m\n     \u001b[90m 258 |\u001b[39m   test(\u001b[32m'numerical stability under repeated transformations'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 259 |\u001b[39m     fc\u001b[33m.\u001b[39massert(\n     \u001b[90m     |\u001b[39m        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 260 |\u001b[39m       fc\u001b[33m.\u001b[39mproperty(\n     \u001b[90m 261 |\u001b[39m         vpArb\u001b[33m.\u001b[39mchain(vp \u001b[33m=>\u001b[39m\n     \u001b[90m 262 |\u001b[39m           fc\u001b[33m.\u001b[39mtuple(fc\u001b[33m.\u001b[39mconstant(vp)\u001b[33m,\u001b[39m trArb\u001b[33m,\u001b[39m ptArb(vp))\u001b[0m\n\n      at buildError (node_modules/.pnpm/fast-check@3.23.2/node_modules/fast-check/lib/check/runner/utils/RunDetailsFormatter.js:132:15)\n      at throwIfFailed (node_modules/.pnpm/fast-check@3.23.2/node_modules/fast-check/lib/check/runner/utils/RunDetailsFormatter.js:144:11)\n      at reportRunDetails (node_modules/.pnpm/fast-check@3.23.2/node_modules/fast-check/lib/check/runner/utils/RunDetailsFormatter.js:157:16)\n      at Object.assert (node_modules/.pnpm/fast-check@3.23.2/node_modules/fast-check/lib/check/runner/Runner.js:73:52)\n      at Object.assert (src/subapps/dxf-viewer/__tests__/coord.prop.test.ts:259:8)\n","name":"C:\\Nestor_Pagonis\\src\\subapps\\dxf-viewer\\__tests__\\coord.prop.test.ts","startTime":1768084859869,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["DxfSettingsStore","General Settings Management"],"duration":34,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"DxfSettingsStore General Settings Management should initialize with default settings","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1768084862565,"status":"passed","title":"should initialize with default settings"},{"ancestorTitles":["DxfSettingsStore","General Settings Management"],"duration":13,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"DxfSettingsStore General Settings Management should update general line settings","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1768084862602,"status":"passed","title":"should update general line settings"},{"ancestorTitles":["DxfSettingsStore","General Settings Management"],"duration":8,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"DxfSettingsStore General Settings Management should validate settings on update","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084862615,"status":"passed","title":"should validate settings on update"},{"ancestorTitles":["DxfSettingsStore","General Settings Management"],"duration":48,"failing":false,"failureDetails":[{"matcherResult":{"actual":{"line":{"enabled":true,"lineType":"solid","lineWidth":1,"color":"#FFFFFF","opacity":1,"dashScale":1,"dashOffset":0,"lineCap":"butt","lineJoin":"miter","breakAtCenter":false,"hoverColor":"#ffff00","hoverType":"solid","hoverWidth":1,"hoverOpacity":0.8,"finalColor":"#00ff00","finalType":"solid","finalWidth":1,"finalOpacity":1,"activeTemplate":null},"text":{"enabled":true,"fontFamily":"Arial","fontSize":14,"fontWeight":400,"fontStyle":"normal","color":"#FFFFFF","opacity":1,"letterSpacing":0,"lineHeight":1.2,"textAlign":"left","textBaseline":"alphabetic","isBold":false,"isItalic":false,"isUnderline":false,"isStrikethrough":false,"isSuperscript":false,"isSubscript":false,"shadowEnabled":false,"shadowOffsetX":0,"shadowOffsetY":0,"shadowBlur":0,"shadowColor":"#000000","strokeEnabled":false,"strokeWidth":1,"strokeColor":"#000000","backgroundEnabled":false,"backgroundColor":"#000000","backgroundPadding":4,"activeTemplate":null},"grip":{"enabled":true,"gripSize":7,"pickBoxSize":3,"apertureSize":10,"opacity":1,"colors":{"cold":"#0000ff","warm":"#ff00ff","hot":"#ff0000","contour":"#000000"},"showAperture":true,"multiGripEdit":true,"snapToGrips":true,"showMidpoints":true,"showCenters":true,"showQuadrants":true,"maxGripsPerEntity":50,"showGrips":true},"cursor":{"enabled":true,"crosshairSize":25,"crosshairColor":"#FFFFFF","cursorSize":5,"cursorColor":"#00ff00"},"grid":{"enabled":true,"spacing":10,"majorLineInterval":5,"color":"#888888","majorColor":"#bbbbbb","opacity":0.5,"style":"lines"},"ruler":{"enabled":true,"unit":"mm","fontSize":10,"textColor":"#FFFFFF","backgroundColor":"#333333"}},"expected":{"line":{"enabled":true,"lineType":"solid","lineWidth":1,"color":"#FFFFFF","opacity":1,"dashScale":1,"dashOffset":0,"lineCap":"butt","lineJoin":"miter","breakAtCenter":false,"hoverColor":"#ffff00","hoverType":"solid","hoverWidth":1,"hoverOpacity":0.8,"finalColor":"#00ff00","finalType":"solid","finalWidth":1,"finalOpacity":1,"activeTemplate":null},"text":{"enabled":true,"fontFamily":"Arial","fontSize":14,"fontWeight":400,"fontStyle":"normal","color":"#FFFFFF","opacity":1,"letterSpacing":0,"lineHeight":1.2,"textAlign":"left","textBaseline":"alphabetic","isBold":false,"isItalic":false,"isUnderline":false,"isStrikethrough":false,"isSuperscript":false,"isSubscript":false,"shadowEnabled":false,"shadowOffsetX":0,"shadowOffsetY":0,"shadowBlur":0,"shadowColor":"#000000","strokeEnabled":false,"strokeWidth":1,"strokeColor":"#000000","backgroundEnabled":false,"backgroundColor":"#000000","backgroundPadding":4,"activeTemplate":null},"grip":{"enabled":true,"gripSize":7,"pickBoxSize":3,"apertureSize":10,"opacity":1,"colors":{"cold":"#0000ff","warm":"#ff00ff","hot":"#ff0000","contour":"#000000"},"showAperture":true,"multiGripEdit":true,"snapToGrips":true,"showMidpoints":true,"showCenters":true,"showQuadrants":true,"maxGripsPerEntity":50,"showGrips":true}},"message":"expect(received).toEqual(expected) // deep equality\n\n- Expected  -  0\n+ Received  + 23\n\n@@ -1,6 +1,22 @@\n  Object {\n+   \"cursor\": Object {\n+     \"crosshairColor\": \"#FFFFFF\",\n+     \"crosshairSize\": 25,\n+     \"cursorColor\": \"#00ff00\",\n+     \"cursorSize\": 5,\n+     \"enabled\": true,\n+   },\n+   \"grid\": Object {\n+     \"color\": \"#888888\",\n+     \"enabled\": true,\n+     \"majorColor\": \"#bbbbbb\",\n+     \"majorLineInterval\": 5,\n+     \"opacity\": 0.5,\n+     \"spacing\": 10,\n+     \"style\": \"lines\",\n+   },\n    \"grip\": Object {\n      \"apertureSize\": 10,\n      \"colors\": Object {\n        \"cold\": \"#0000ff\",\n        \"contour\": \"#000000\",\n@@ -38,10 +54,17 @@\n      \"lineCap\": \"butt\",\n      \"lineJoin\": \"miter\",\n      \"lineType\": \"solid\",\n      \"lineWidth\": 1,\n      \"opacity\": 1,\n+   },\n+   \"ruler\": Object {\n+     \"backgroundColor\": \"#333333\",\n+     \"enabled\": true,\n+     \"fontSize\": 10,\n+     \"textColor\": \"#FFFFFF\",\n+     \"unit\": \"mm\",\n    },\n    \"text\": Object {\n      \"activeTemplate\": null,\n      \"backgroundColor\": \"#000000\",\n      \"backgroundEnabled\": false,","name":"toEqual","pass":false}}],"failureMessages":["Error: expect(received).toEqual(expected) // deep equality\n\n- Expected  -  0\n+ Received  + 23\n\n@@ -1,6 +1,22 @@\n  Object {\n+   \"cursor\": Object {\n+     \"crosshairColor\": \"#FFFFFF\",\n+     \"crosshairSize\": 25,\n+     \"cursorColor\": \"#00ff00\",\n+     \"cursorSize\": 5,\n+     \"enabled\": true,\n+   },\n+   \"grid\": Object {\n+     \"color\": \"#888888\",\n+     \"enabled\": true,\n+     \"majorColor\": \"#bbbbbb\",\n+     \"majorLineInterval\": 5,\n+     \"opacity\": 0.5,\n+     \"spacing\": 10,\n+     \"style\": \"lines\",\n+   },\n    \"grip\": Object {\n      \"apertureSize\": 10,\n      \"colors\": Object {\n        \"cold\": \"#0000ff\",\n        \"contour\": \"#000000\",\n@@ -38,10 +54,17 @@\n      \"lineCap\": \"butt\",\n      \"lineJoin\": \"miter\",\n      \"lineType\": \"solid\",\n      \"lineWidth\": 1,\n      \"opacity\": 1,\n+   },\n+   \"ruler\": Object {\n+     \"backgroundColor\": \"#333333\",\n+     \"enabled\": true,\n+     \"fontSize\": 10,\n+     \"textColor\": \"#FFFFFF\",\n+     \"unit\": \"mm\",\n    },\n    \"text\": Object {\n      \"activeTemplate\": null,\n      \"backgroundColor\": \"#000000\",\n      \"backgroundEnabled\": false,\n    at Object.toEqual (C:\\Nestor_Pagonis\\src\\subapps\\dxf-viewer\\stores\\__tests__\\DxfSettingsStore.test.ts:77:38)\n    at Promise.finally.completed (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at _runTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\index.js:275:16)\n    at runTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\index.js:343:7)"],"fullName":"DxfSettingsStore General Settings Management should reset to defaults","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1768084862624,"status":"failed","title":"should reset to defaults"},{"ancestorTitles":["DxfSettingsStore","Override Management"],"duration":15,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"DxfSettingsStore Override Management should set entity override","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084862694,"status":"passed","title":"should set entity override"},{"ancestorTitles":["DxfSettingsStore","Override Management"],"duration":10,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"DxfSettingsStore Override Management should merge overrides correctly","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084862710,"status":"passed","title":"should merge overrides correctly"},{"ancestorTitles":["DxfSettingsStore","Override Management"],"duration":7,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"DxfSettingsStore Override Management should clear empty overrides","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084862723,"status":"passed","title":"should clear empty overrides"},{"ancestorTitles":["DxfSettingsStore","Override Management"],"duration":7,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"DxfSettingsStore Override Management should apply overrides to selection","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1768084862731,"status":"passed","title":"should apply overrides to selection"},{"ancestorTitles":["DxfSettingsStore","Effective Settings Computation"],"duration":11,"failing":false,"failureDetails":[{"matcherResult":{"actual":{"line":{"enabled":true,"lineType":"solid","lineWidth":1,"color":"#FFFFFF","opacity":1,"dashScale":1,"dashOffset":0,"lineCap":"butt","lineJoin":"miter","breakAtCenter":false,"hoverColor":"#ffff00","hoverType":"solid","hoverWidth":1,"hoverOpacity":0.8,"finalColor":"#00ff00","finalType":"solid","finalWidth":1,"finalOpacity":1,"activeTemplate":null},"text":{"enabled":true,"fontFamily":"Arial","fontSize":14,"fontWeight":400,"fontStyle":"normal","color":"#FFFFFF","opacity":1,"letterSpacing":0,"lineHeight":1.2,"textAlign":"left","textBaseline":"alphabetic","isBold":false,"isItalic":false,"isUnderline":false,"isStrikethrough":false,"isSuperscript":false,"isSubscript":false,"shadowEnabled":false,"shadowOffsetX":0,"shadowOffsetY":0,"shadowBlur":0,"shadowColor":"#000000","strokeEnabled":false,"strokeWidth":1,"strokeColor":"#000000","backgroundEnabled":false,"backgroundColor":"#000000","backgroundPadding":4,"activeTemplate":null},"grip":{"enabled":true,"gripSize":7,"pickBoxSize":3,"apertureSize":10,"opacity":1,"colors":{"cold":"#0000ff","warm":"#ff00ff","hot":"#ff0000","contour":"#000000"},"showAperture":true,"multiGripEdit":true,"snapToGrips":true,"showMidpoints":true,"showCenters":true,"showQuadrants":true,"maxGripsPerEntity":50,"showGrips":true},"cursor":{"enabled":true,"crosshairSize":25,"crosshairColor":"#FFFFFF","cursorSize":5,"cursorColor":"#00ff00"},"grid":{"enabled":true,"spacing":10,"majorLineInterval":5,"color":"#888888","majorColor":"#bbbbbb","opacity":0.5,"style":"lines"},"ruler":{"enabled":true,"unit":"mm","fontSize":10,"textColor":"#FFFFFF","backgroundColor":"#333333"}},"expected":{"line":{"enabled":true,"lineType":"solid","lineWidth":1,"color":"#FFFFFF","opacity":1,"dashScale":1,"dashOffset":0,"lineCap":"butt","lineJoin":"miter","breakAtCenter":false,"hoverColor":"#ffff00","hoverType":"solid","hoverWidth":1,"hoverOpacity":0.8,"finalColor":"#00ff00","finalType":"solid","finalWidth":1,"finalOpacity":1,"activeTemplate":null},"text":{"enabled":true,"fontFamily":"Arial","fontSize":14,"fontWeight":400,"fontStyle":"normal","color":"#FFFFFF","opacity":1,"letterSpacing":0,"lineHeight":1.2,"textAlign":"left","textBaseline":"alphabetic","isBold":false,"isItalic":false,"isUnderline":false,"isStrikethrough":false,"isSuperscript":false,"isSubscript":false,"shadowEnabled":false,"shadowOffsetX":0,"shadowOffsetY":0,"shadowBlur":0,"shadowColor":"#000000","strokeEnabled":false,"strokeWidth":1,"strokeColor":"#000000","backgroundEnabled":false,"backgroundColor":"#000000","backgroundPadding":4,"activeTemplate":null},"grip":{"enabled":true,"gripSize":7,"pickBoxSize":3,"apertureSize":10,"opacity":1,"colors":{"cold":"#0000ff","warm":"#ff00ff","hot":"#ff0000","contour":"#000000"},"showAperture":true,"multiGripEdit":true,"snapToGrips":true,"showMidpoints":true,"showCenters":true,"showQuadrants":true,"maxGripsPerEntity":50,"showGrips":true}},"message":"expect(received).toEqual(expected) // deep equality\n\n- Expected  -  0\n+ Received  + 23\n\n@@ -1,6 +1,22 @@\n  Object {\n+   \"cursor\": Object {\n+     \"crosshairColor\": \"#FFFFFF\",\n+     \"crosshairSize\": 25,\n+     \"cursorColor\": \"#00ff00\",\n+     \"cursorSize\": 5,\n+     \"enabled\": true,\n+   },\n+   \"grid\": Object {\n+     \"color\": \"#888888\",\n+     \"enabled\": true,\n+     \"majorColor\": \"#bbbbbb\",\n+     \"majorLineInterval\": 5,\n+     \"opacity\": 0.5,\n+     \"spacing\": 10,\n+     \"style\": \"lines\",\n+   },\n    \"grip\": Object {\n      \"apertureSize\": 10,\n      \"colors\": Object {\n        \"cold\": \"#0000ff\",\n        \"contour\": \"#000000\",\n@@ -38,10 +54,17 @@\n      \"lineCap\": \"butt\",\n      \"lineJoin\": \"miter\",\n      \"lineType\": \"solid\",\n      \"lineWidth\": 1,\n      \"opacity\": 1,\n+   },\n+   \"ruler\": Object {\n+     \"backgroundColor\": \"#333333\",\n+     \"enabled\": true,\n+     \"fontSize\": 10,\n+     \"textColor\": \"#FFFFFF\",\n+     \"unit\": \"mm\",\n    },\n    \"text\": Object {\n      \"activeTemplate\": null,\n      \"backgroundColor\": \"#000000\",\n      \"backgroundEnabled\": false,","name":"toEqual","pass":false}}],"failureMessages":["Error: expect(received).toEqual(expected) // deep equality\n\n- Expected  -  0\n+ Received  + 23\n\n@@ -1,6 +1,22 @@\n  Object {\n+   \"cursor\": Object {\n+     \"crosshairColor\": \"#FFFFFF\",\n+     \"crosshairSize\": 25,\n+     \"cursorColor\": \"#00ff00\",\n+     \"cursorSize\": 5,\n+     \"enabled\": true,\n+   },\n+   \"grid\": Object {\n+     \"color\": \"#888888\",\n+     \"enabled\": true,\n+     \"majorColor\": \"#bbbbbb\",\n+     \"majorLineInterval\": 5,\n+     \"opacity\": 0.5,\n+     \"spacing\": 10,\n+     \"style\": \"lines\",\n+   },\n    \"grip\": Object {\n      \"apertureSize\": 10,\n      \"colors\": Object {\n        \"cold\": \"#0000ff\",\n        \"contour\": \"#000000\",\n@@ -38,10 +54,17 @@\n      \"lineCap\": \"butt\",\n      \"lineJoin\": \"miter\",\n      \"lineType\": \"solid\",\n      \"lineWidth\": 1,\n      \"opacity\": 1,\n+   },\n+   \"ruler\": Object {\n+     \"backgroundColor\": \"#333333\",\n+     \"enabled\": true,\n+     \"fontSize\": 10,\n+     \"textColor\": \"#FFFFFF\",\n+     \"unit\": \"mm\",\n    },\n    \"text\": Object {\n      \"activeTemplate\": null,\n      \"backgroundColor\": \"#000000\",\n      \"backgroundEnabled\": false,\n    at Object.toEqual (C:\\Nestor_Pagonis\\src\\subapps\\dxf-viewer\\stores\\__tests__\\DxfSettingsStore.test.ts:167:25)\n    at Promise.finally.completed (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at _runTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\index.js:275:16)\n    at runTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\index.js:343:7)"],"fullName":"DxfSettingsStore Effective Settings Computation should compute effective settings without overrides","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1768084862739,"status":"failed","title":"should compute effective settings without overrides"},{"ancestorTitles":["DxfSettingsStore","Effective Settings Computation"],"duration":13,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"DxfSettingsStore Effective Settings Computation should merge general and override settings","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1768084862751,"status":"passed","title":"should merge general and override settings"},{"ancestorTitles":["DxfSettingsStore","Effective Settings Computation"],"duration":6,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"DxfSettingsStore Effective Settings Computation should detect entity overrides","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084862764,"status":"passed","title":"should detect entity overrides"},{"ancestorTitles":["DxfSettingsStore","Selection Management"],"duration":6,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"DxfSettingsStore Selection Management should manage selection state","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1768084862770,"status":"passed","title":"should manage selection state"},{"ancestorTitles":["DxfSettingsStore","Selection Management"],"duration":7,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"DxfSettingsStore Selection Management should not add duplicate selections","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084862776,"status":"passed","title":"should not add duplicate selections"},{"ancestorTitles":["DxfSettingsStore","Persistence"],"duration":7,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"DxfSettingsStore Persistence should save to localStorage","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084862783,"status":"passed","title":"should save to localStorage"},{"ancestorTitles":["DxfSettingsStore","Persistence"],"duration":7,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"DxfSettingsStore Persistence should load from localStorage","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1768084862791,"status":"passed","title":"should load from localStorage"},{"ancestorTitles":["DxfSettingsStore","Persistence"],"duration":47,"failing":false,"failureDetails":[{"matcherResult":{"actual":{"line":{"enabled":true,"lineType":"solid","lineWidth":1,"color":"#FFFFFF","opacity":1,"dashScale":1,"dashOffset":0,"lineCap":"butt","lineJoin":"miter","breakAtCenter":false,"hoverColor":"#ffff00","hoverType":"solid","hoverWidth":1,"hoverOpacity":0.8,"finalColor":"#00ff00","finalType":"solid","finalWidth":1,"finalOpacity":1,"activeTemplate":null},"text":{"enabled":true,"fontFamily":"Arial","fontSize":14,"fontWeight":400,"fontStyle":"normal","color":"#FFFFFF","opacity":1,"letterSpacing":0,"lineHeight":1.2,"textAlign":"left","textBaseline":"alphabetic","isBold":false,"isItalic":false,"isUnderline":false,"isStrikethrough":false,"isSuperscript":false,"isSubscript":false,"shadowEnabled":false,"shadowOffsetX":0,"shadowOffsetY":0,"shadowBlur":0,"shadowColor":"#000000","strokeEnabled":false,"strokeWidth":1,"strokeColor":"#000000","backgroundEnabled":false,"backgroundColor":"#000000","backgroundPadding":4,"activeTemplate":null},"grip":{"enabled":true,"gripSize":7,"pickBoxSize":3,"apertureSize":10,"opacity":1,"colors":{"cold":"#0000ff","warm":"#ff00ff","hot":"#ff0000","contour":"#000000"},"showAperture":true,"multiGripEdit":true,"snapToGrips":true,"showMidpoints":true,"showCenters":true,"showQuadrants":true,"maxGripsPerEntity":50,"showGrips":true},"cursor":{"enabled":true,"crosshairSize":25,"crosshairColor":"#FFFFFF","cursorSize":5,"cursorColor":"#00ff00"},"grid":{"enabled":true,"spacing":10,"majorLineInterval":5,"color":"#888888","majorColor":"#bbbbbb","opacity":0.5,"style":"lines"},"ruler":{"enabled":true,"unit":"mm","fontSize":10,"textColor":"#FFFFFF","backgroundColor":"#333333"}},"expected":{"line":{"enabled":true,"lineType":"solid","lineWidth":1,"color":"#FFFFFF","opacity":1,"dashScale":1,"dashOffset":0,"lineCap":"butt","lineJoin":"miter","breakAtCenter":false,"hoverColor":"#ffff00","hoverType":"solid","hoverWidth":1,"hoverOpacity":0.8,"finalColor":"#00ff00","finalType":"solid","finalWidth":1,"finalOpacity":1,"activeTemplate":null},"text":{"enabled":true,"fontFamily":"Arial","fontSize":14,"fontWeight":400,"fontStyle":"normal","color":"#FFFFFF","opacity":1,"letterSpacing":0,"lineHeight":1.2,"textAlign":"left","textBaseline":"alphabetic","isBold":false,"isItalic":false,"isUnderline":false,"isStrikethrough":false,"isSuperscript":false,"isSubscript":false,"shadowEnabled":false,"shadowOffsetX":0,"shadowOffsetY":0,"shadowBlur":0,"shadowColor":"#000000","strokeEnabled":false,"strokeWidth":1,"strokeColor":"#000000","backgroundEnabled":false,"backgroundColor":"#000000","backgroundPadding":4,"activeTemplate":null},"grip":{"enabled":true,"gripSize":7,"pickBoxSize":3,"apertureSize":10,"opacity":1,"colors":{"cold":"#0000ff","warm":"#ff00ff","hot":"#ff0000","contour":"#000000"},"showAperture":true,"multiGripEdit":true,"snapToGrips":true,"showMidpoints":true,"showCenters":true,"showQuadrants":true,"maxGripsPerEntity":50,"showGrips":true}},"message":"expect(received).toEqual(expected) // deep equality\n\n- Expected  -  0\n+ Received  + 23\n\n@@ -1,6 +1,22 @@\n  Object {\n+   \"cursor\": Object {\n+     \"crosshairColor\": \"#FFFFFF\",\n+     \"crosshairSize\": 25,\n+     \"cursorColor\": \"#00ff00\",\n+     \"cursorSize\": 5,\n+     \"enabled\": true,\n+   },\n+   \"grid\": Object {\n+     \"color\": \"#888888\",\n+     \"enabled\": true,\n+     \"majorColor\": \"#bbbbbb\",\n+     \"majorLineInterval\": 5,\n+     \"opacity\": 0.5,\n+     \"spacing\": 10,\n+     \"style\": \"lines\",\n+   },\n    \"grip\": Object {\n      \"apertureSize\": 10,\n      \"colors\": Object {\n        \"cold\": \"#0000ff\",\n        \"contour\": \"#000000\",\n@@ -38,10 +54,17 @@\n      \"lineCap\": \"butt\",\n      \"lineJoin\": \"miter\",\n      \"lineType\": \"solid\",\n      \"lineWidth\": 1,\n      \"opacity\": 1,\n+   },\n+   \"ruler\": Object {\n+     \"backgroundColor\": \"#333333\",\n+     \"enabled\": true,\n+     \"fontSize\": 10,\n+     \"textColor\": \"#FFFFFF\",\n+     \"unit\": \"mm\",\n    },\n    \"text\": Object {\n      \"activeTemplate\": null,\n      \"backgroundColor\": \"#000000\",\n      \"backgroundEnabled\": false,","name":"toEqual","pass":false}}],"failureMessages":["Error: expect(received).toEqual(expected) // deep equality\n\n- Expected  -  0\n+ Received  + 23\n\n@@ -1,6 +1,22 @@\n  Object {\n+   \"cursor\": Object {\n+     \"crosshairColor\": \"#FFFFFF\",\n+     \"crosshairSize\": 25,\n+     \"cursorColor\": \"#00ff00\",\n+     \"cursorSize\": 5,\n+     \"enabled\": true,\n+   },\n+   \"grid\": Object {\n+     \"color\": \"#888888\",\n+     \"enabled\": true,\n+     \"majorColor\": \"#bbbbbb\",\n+     \"majorLineInterval\": 5,\n+     \"opacity\": 0.5,\n+     \"spacing\": 10,\n+     \"style\": \"lines\",\n+   },\n    \"grip\": Object {\n      \"apertureSize\": 10,\n      \"colors\": Object {\n        \"cold\": \"#0000ff\",\n        \"contour\": \"#000000\",\n@@ -38,10 +54,17 @@\n      \"lineCap\": \"butt\",\n      \"lineJoin\": \"miter\",\n      \"lineType\": \"solid\",\n      \"lineWidth\": 1,\n      \"opacity\": 1,\n+   },\n+   \"ruler\": Object {\n+     \"backgroundColor\": \"#333333\",\n+     \"enabled\": true,\n+     \"fontSize\": 10,\n+     \"textColor\": \"#FFFFFF\",\n+     \"unit\": \"mm\",\n    },\n    \"text\": Object {\n      \"activeTemplate\": null,\n      \"backgroundColor\": \"#000000\",\n      \"backgroundEnabled\": false,\n    at Object.toEqual (C:\\Nestor_Pagonis\\src\\subapps\\dxf-viewer\\stores\\__tests__\\DxfSettingsStore.test.ts:303:38)\n    at Promise.finally.completed (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at _runTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\index.js:275:16)\n    at runTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\index.js:343:7)"],"fullName":"DxfSettingsStore Persistence should handle corrupted localStorage data","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1768084862798,"status":"failed","title":"should handle corrupted localStorage data"}],"endTime":1768084862891,"message":"  â— DxfSettingsStore â€º General Settings Management â€º should reset to defaults\n\n    expect(received).toEqual(expected) // deep equality\n\n    - Expected  -  0\n    + Received  + 23\n\n    @@ -1,6 +1,22 @@\n      Object {\n    +   \"cursor\": Object {\n    +     \"crosshairColor\": \"#FFFFFF\",\n    +     \"crosshairSize\": 25,\n    +     \"cursorColor\": \"#00ff00\",\n    +     \"cursorSize\": 5,\n    +     \"enabled\": true,\n    +   },\n    +   \"grid\": Object {\n    +     \"color\": \"#888888\",\n    +     \"enabled\": true,\n    +     \"majorColor\": \"#bbbbbb\",\n    +     \"majorLineInterval\": 5,\n    +     \"opacity\": 0.5,\n    +     \"spacing\": 10,\n    +     \"style\": \"lines\",\n    +   },\n        \"grip\": Object {\n          \"apertureSize\": 10,\n          \"colors\": Object {\n            \"cold\": \"#0000ff\",\n            \"contour\": \"#000000\",\n    @@ -38,10 +54,17 @@\n          \"lineCap\": \"butt\",\n          \"lineJoin\": \"miter\",\n          \"lineType\": \"solid\",\n          \"lineWidth\": 1,\n          \"opacity\": 1,\n    +   },\n    +   \"ruler\": Object {\n    +     \"backgroundColor\": \"#333333\",\n    +     \"enabled\": true,\n    +     \"fontSize\": 10,\n    +     \"textColor\": \"#FFFFFF\",\n    +     \"unit\": \"mm\",\n        },\n        \"text\": Object {\n          \"activeTemplate\": null,\n          \"backgroundColor\": \"#000000\",\n          \"backgroundEnabled\": false,\n\n    \u001b[0m \u001b[90m 75 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 76 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 77 |\u001b[39m       expect(result\u001b[33m.\u001b[39mcurrent\u001b[33m.\u001b[39mgeneral)\u001b[33m.\u001b[39mtoEqual({\n     \u001b[90m    |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 78 |\u001b[39m         line\u001b[33m:\u001b[39m \u001b[33mDEFAULT_LINE_SETTINGS\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 79 |\u001b[39m         text\u001b[33m:\u001b[39m \u001b[33mDEFAULT_TEXT_SETTINGS\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 80 |\u001b[39m         grip\u001b[33m:\u001b[39m \u001b[33mDEFAULT_GRIP_SETTINGS\u001b[39m\u001b[0m\n\n      at Object.toEqual (src/subapps/dxf-viewer/stores/__tests__/DxfSettingsStore.test.ts:77:38)\n\n  â— DxfSettingsStore â€º Effective Settings Computation â€º should compute effective settings without overrides\n\n    expect(received).toEqual(expected) // deep equality\n\n    - Expected  -  0\n    + Received  + 23\n\n    @@ -1,6 +1,22 @@\n      Object {\n    +   \"cursor\": Object {\n    +     \"crosshairColor\": \"#FFFFFF\",\n    +     \"crosshairSize\": 25,\n    +     \"cursorColor\": \"#00ff00\",\n    +     \"cursorSize\": 5,\n    +     \"enabled\": true,\n    +   },\n    +   \"grid\": Object {\n    +     \"color\": \"#888888\",\n    +     \"enabled\": true,\n    +     \"majorColor\": \"#bbbbbb\",\n    +     \"majorLineInterval\": 5,\n    +     \"opacity\": 0.5,\n    +     \"spacing\": 10,\n    +     \"style\": \"lines\",\n    +   },\n        \"grip\": Object {\n          \"apertureSize\": 10,\n          \"colors\": Object {\n            \"cold\": \"#0000ff\",\n            \"contour\": \"#000000\",\n    @@ -38,10 +54,17 @@\n          \"lineCap\": \"butt\",\n          \"lineJoin\": \"miter\",\n          \"lineType\": \"solid\",\n          \"lineWidth\": 1,\n          \"opacity\": 1,\n    +   },\n    +   \"ruler\": Object {\n    +     \"backgroundColor\": \"#333333\",\n    +     \"enabled\": true,\n    +     \"fontSize\": 10,\n    +     \"textColor\": \"#FFFFFF\",\n    +     \"unit\": \"mm\",\n        },\n        \"text\": Object {\n          \"activeTemplate\": null,\n          \"backgroundColor\": \"#000000\",\n          \"backgroundEnabled\": false,\n\n    \u001b[0m \u001b[90m 165 |\u001b[39m       \u001b[36mconst\u001b[39m effective \u001b[33m=\u001b[39m result\u001b[33m.\u001b[39mcurrent\u001b[33m.\u001b[39mgetEffective(entityId)\u001b[33m;\u001b[39m\n     \u001b[90m 166 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 167 |\u001b[39m       expect(effective)\u001b[33m.\u001b[39mtoEqual({\n     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 168 |\u001b[39m         line\u001b[33m:\u001b[39m \u001b[33mDEFAULT_LINE_SETTINGS\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 169 |\u001b[39m         text\u001b[33m:\u001b[39m \u001b[33mDEFAULT_TEXT_SETTINGS\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 170 |\u001b[39m         grip\u001b[33m:\u001b[39m \u001b[33mDEFAULT_GRIP_SETTINGS\u001b[39m\u001b[0m\n\n      at Object.toEqual (src/subapps/dxf-viewer/stores/__tests__/DxfSettingsStore.test.ts:167:25)\n\n  â— DxfSettingsStore â€º Persistence â€º should handle corrupted localStorage data\n\n    expect(received).toEqual(expected) // deep equality\n\n    - Expected  -  0\n    + Received  + 23\n\n    @@ -1,6 +1,22 @@\n      Object {\n    +   \"cursor\": Object {\n    +     \"crosshairColor\": \"#FFFFFF\",\n    +     \"crosshairSize\": 25,\n    +     \"cursorColor\": \"#00ff00\",\n    +     \"cursorSize\": 5,\n    +     \"enabled\": true,\n    +   },\n    +   \"grid\": Object {\n    +     \"color\": \"#888888\",\n    +     \"enabled\": true,\n    +     \"majorColor\": \"#bbbbbb\",\n    +     \"majorLineInterval\": 5,\n    +     \"opacity\": 0.5,\n    +     \"spacing\": 10,\n    +     \"style\": \"lines\",\n    +   },\n        \"grip\": Object {\n          \"apertureSize\": 10,\n          \"colors\": Object {\n            \"cold\": \"#0000ff\",\n            \"contour\": \"#000000\",\n    @@ -38,10 +54,17 @@\n          \"lineCap\": \"butt\",\n          \"lineJoin\": \"miter\",\n          \"lineType\": \"solid\",\n          \"lineWidth\": 1,\n          \"opacity\": 1,\n    +   },\n    +   \"ruler\": Object {\n    +     \"backgroundColor\": \"#333333\",\n    +     \"enabled\": true,\n    +     \"fontSize\": 10,\n    +     \"textColor\": \"#FFFFFF\",\n    +     \"unit\": \"mm\",\n        },\n        \"text\": Object {\n          \"activeTemplate\": null,\n          \"backgroundColor\": \"#000000\",\n          \"backgroundEnabled\": false,\n\n    \u001b[0m \u001b[90m 301 |\u001b[39m\n     \u001b[90m 302 |\u001b[39m       \u001b[90m// Should use defaults on error\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 303 |\u001b[39m       expect(result\u001b[33m.\u001b[39mcurrent\u001b[33m.\u001b[39mgeneral)\u001b[33m.\u001b[39mtoEqual({\n     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 304 |\u001b[39m         line\u001b[33m:\u001b[39m \u001b[33mDEFAULT_LINE_SETTINGS\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 305 |\u001b[39m         text\u001b[33m:\u001b[39m \u001b[33mDEFAULT_TEXT_SETTINGS\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 306 |\u001b[39m         grip\u001b[33m:\u001b[39m \u001b[33mDEFAULT_GRIP_SETTINGS\u001b[39m\u001b[0m\n\n      at Object.toEqual (src/subapps/dxf-viewer/stores/__tests__/DxfSettingsStore.test.ts:303:38)\n","name":"C:\\Nestor_Pagonis\\src\\subapps\\dxf-viewer\\stores\\__tests__\\DxfSettingsStore.test.ts","startTime":1768084861484,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["ðŸ—ï¸ CSS Variables Foundation"],"duration":61,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ðŸ—ï¸ CSS Variables Foundation âœ… CSS variables are properly defined in root","invocations":1,"location":null,"numPassingAsserts":14,"retryReasons":[],"startAt":1768084863429,"status":"passed","title":"âœ… CSS variables are properly defined in root"},{"ancestorTitles":["ðŸ—ï¸ CSS Variables Foundation"],"duration":11,"failing":false,"failureDetails":[{"matcherResult":{"actual":"hsl(var(--bg-primary))","expected":"hsl(var(--bg-primary))","message":"expect(received).not.toBe(expected) // Object.is equality\n\nExpected: not \"hsl(var(--bg-primary))\"","name":"toBe","pass":true}}],"failureMessages":["Error: expect(received).not.toBe(expected) // Object.is equality\n\nExpected: not \"hsl(var(--bg-primary))\"\n    at Object.toBe (C:\\Nestor_Pagonis\\src\\hooks\\__tests__\\background-centralization.test.ts:75:27)\n    at Promise.finally.completed (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at _runTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\index.js:275:16)\n    at runTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\index.js:343:7)"],"fullName":"ðŸ—ï¸ CSS Variables Foundation ðŸ¢ PHASE 1.3 VALIDATION: Global override capability proof","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1768084863491,"status":"failed","title":"ðŸ¢ PHASE 1.3 VALIDATION: Global override capability proof"},{"ancestorTitles":["ðŸ—ï¸ CSS Variables Foundation"],"duration":2,"failing":false,"failureDetails":[{"matcherResult":{"message":"expect(received).toMatch(expected)\n\nExpected pattern: /^\\d{1,3}\\s+\\d{1,3}%\\s+\\d{1,3}%$/\nReceived string:  \"\"","pass":false}}],"failureMessages":["Error: expect(received).toMatch(expected)\n\nExpected pattern: /^\\d{1,3}\\s+\\d{1,3}%\\s+\\d{1,3}%$/\nReceived string:  \"\"\n    at Object.toMatch (C:\\Nestor_Pagonis\\src\\hooks\\__tests__\\background-centralization.test.ts:90:23)\n    at Promise.finally.completed (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at _runTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\index.js:275:16)\n    at runTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\index.js:343:7)"],"fullName":"ðŸ—ï¸ CSS Variables Foundation ðŸŽ¨ CSS variables produce valid HSL colors","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1768084863515,"status":"failed","title":"ðŸŽ¨ CSS variables produce valid HSL colors"},{"ancestorTitles":["ðŸ—ï¸ CSS Variables Foundation"],"duration":5,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ðŸ—ï¸ CSS Variables Foundation ðŸŒ™ Dark mode variables are defined","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084863518,"status":"passed","title":"ðŸŒ™ Dark mode variables are defined"},{"ancestorTitles":["ðŸ”— useSemanticColors Integration"],"duration":23,"failing":false,"failureDetails":[{"matcherResult":{"actual":"bg-background","expected":"bg-[hsl(var(--bg-primary))]","message":"expect(received).toBe(expected) // Object.is equality\n\nExpected: \"bg-[hsl(var(--bg-primary))]\"\nReceived: \"bg-background\"","name":"toBe","pass":false}}],"failureMessages":["Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: \"bg-[hsl(var(--bg-primary))]\"\nReceived: \"bg-background\"\n    at Object.toBe (C:\\Nestor_Pagonis\\src\\hooks\\__tests__\\background-centralization.test.ts:123:39)\n    at Promise.finally.completed (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at _runTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\index.js:275:16)\n    at runTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\index.js:343:7)"],"fullName":"ðŸ”— useSemanticColors Integration âœ… useSemanticColors returns CSS variable classes","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1768084863523,"status":"failed","title":"âœ… useSemanticColors returns CSS variable classes"},{"ancestorTitles":["ðŸ”— useSemanticColors Integration"],"duration":4,"failing":false,"failureDetails":[{"matcherResult":{"message":"expect(received).toMatch(expected)\n\nExpected pattern: /bg-\\[hsl\\(var\\(--bg-[a-z]+\\)\\)\\]/\nReceived string:  \"bg-background\"","pass":false}}],"failureMessages":["Error: expect(received).toMatch(expected)\n\nExpected pattern: /bg-\\[hsl\\(var\\(--bg-[a-z]+\\)\\)\\]/\nReceived string:  \"bg-background\"\n    at toMatch (C:\\Nestor_Pagonis\\src\\hooks\\__tests__\\background-centralization.test.ts:136:23)\n    at Array.forEach (<anonymous>)\n    at Object.forEach (C:\\Nestor_Pagonis\\src\\hooks\\__tests__\\background-centralization.test.ts:134:17)\n    at Promise.finally.completed (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at _runTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\index.js:275:16)\n    at runTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\index.js:343:7)"],"fullName":"ðŸ”— useSemanticColors Integration ðŸš« useSemanticColors contains NO hardcoded bg- classes","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084863547,"status":"failed","title":"ðŸš« useSemanticColors contains NO hardcoded bg- classes"},{"ancestorTitles":["ðŸ” Hardcoded Pattern Detection"],"duration":10,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ðŸ” Hardcoded Pattern Detection ðŸš¨ Detect remaining hardcoded bg- patterns in codebase","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084863551,"status":"passed","title":"ðŸš¨ Detect remaining hardcoded bg- patterns in codebase"},{"ancestorTitles":["ðŸ” Hardcoded Pattern Detection"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ðŸ” Hardcoded Pattern Detection ðŸš« Detect inline background styles","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1768084863561,"status":"passed","title":"ðŸš« Detect inline background styles"},{"ancestorTitles":["ðŸŽ¨ Visual Consistency Validation"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ðŸŽ¨ Visual Consistency Validation ðŸŒˆ Theme switching preserves visual hierarchy","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084863562,"status":"passed","title":"ðŸŒˆ Theme switching preserves visual hierarchy"},{"ancestorTitles":["ðŸŽ¨ Visual Consistency Validation"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ðŸŽ¨ Visual Consistency Validation â™¿ Accessibility contrast ratios maintained","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084863564,"status":"passed","title":"â™¿ Accessibility contrast ratios maintained"},{"ancestorTitles":["âš¡ Performance Benchmarks"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"âš¡ Performance Benchmarks ðŸƒâ€â™‚ï¸ Hook performance within enterprise limits","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084863566,"status":"passed","title":"ðŸƒâ€â™‚ï¸ Hook performance within enterprise limits"},{"ancestorTitles":["âš¡ Performance Benchmarks"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"âš¡ Performance Benchmarks ðŸ’¾ Memory usage within acceptable limits","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084863567,"status":"passed","title":"ðŸ’¾ Memory usage within acceptable limits"},{"ancestorTitles":["ðŸ›¡ï¸ Regression Prevention"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ðŸ›¡ï¸ Regression Prevention ðŸ”’ Existing components maintain visual appearance","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084863567,"status":"passed","title":"ðŸ”’ Existing components maintain visual appearance"},{"ancestorTitles":["ðŸ›¡ï¸ Regression Prevention"],"duration":1,"failing":false,"failureDetails":[{}],"failureMessages":["TypeError: CSS.supports is not a function\n    at Object.supports (C:\\Nestor_Pagonis\\src\\hooks\\__tests__\\background-centralization.test.ts:260:16)\n    at Promise.finally.completed (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at _runTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\index.js:275:16)\n    at runTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\index.js:343:7)"],"fullName":"ðŸ›¡ï¸ Regression Prevention ðŸŒ Cross-browser compatibility maintained","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1768084863568,"status":"failed","title":"ðŸŒ Cross-browser compatibility maintained"},{"ancestorTitles":["ðŸ“ˆ Migration Progress Tracking"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ðŸ“ˆ Migration Progress Tracking ðŸ“Š Track migration completion percentage","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1768084863569,"status":"passed","title":"ðŸ“Š Track migration completion percentage"}],"endTime":1768084863623,"message":"  â— ðŸ—ï¸ CSS Variables Foundation â€º ðŸ¢ PHASE 1.3 VALIDATION: Global override capability proof\n\n    expect(received).not.toBe(expected) // Object.is equality\n\n    Expected: not \"hsl(var(--bg-primary))\"\n\n    \u001b[0m \u001b[90m 73 |\u001b[39m     \u001b[36mconst\u001b[39m updatedBg \u001b[33m=\u001b[39m updatedStyle\u001b[33m.\u001b[39mbackgroundColor\u001b[33m;\u001b[39m\n     \u001b[90m 74 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 75 |\u001b[39m     expect(updatedBg)\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoBe(initialBg)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 76 |\u001b[39m     expect(updatedBg)\u001b[33m.\u001b[39mtoBe(\u001b[32m'rgb(255, 0, 255)'\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// Magenta proof\u001b[39m\n     \u001b[90m 77 |\u001b[39m\n     \u001b[90m 78 |\u001b[39m     \u001b[90m// Cleanup\u001b[39m\u001b[0m\n\n      at Object.toBe (src/hooks/__tests__/background-centralization.test.ts:75:27)\n\n  â— ðŸ—ï¸ CSS Variables Foundation â€º ðŸŽ¨ CSS variables produce valid HSL colors\n\n    expect(received).toMatch(expected)\n\n    Expected pattern: /^\\d{1,3}\\s+\\d{1,3}%\\s+\\d{1,3}%$/\n    Received string:  \"\"\n\n    \u001b[0m \u001b[90m 88 |\u001b[39m\n     \u001b[90m 89 |\u001b[39m     \u001b[90m// Should be HSL values without the hsl() wrapper\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 90 |\u001b[39m     expect(successBg)\u001b[33m.\u001b[39mtoMatch(\u001b[35m/^\\d{1,3}\\s+\\d{1,3}%\\s+\\d{1,3}%$/\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 91 |\u001b[39m     expect(errorBg)\u001b[33m.\u001b[39mtoMatch(\u001b[35m/^\\d{1,3}\\s+\\d{1,3}%\\s+\\d{1,3}%$/\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 92 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 93 |\u001b[39m\u001b[0m\n\n      at Object.toMatch (src/hooks/__tests__/background-centralization.test.ts:90:23)\n\n  â— ðŸ”— useSemanticColors Integration â€º âœ… useSemanticColors returns CSS variable classes\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: \"bg-[hsl(var(--bg-primary))]\"\n    Received: \"bg-background\"\n\n    \u001b[0m \u001b[90m 121 |\u001b[39m     expect(result\u001b[33m.\u001b[39mcurrent\u001b[33m.\u001b[39mbg\u001b[33m.\u001b[39minfo)\u001b[33m.\u001b[39mtoBe(\u001b[32m'bg-[hsl(var(--bg-info))]'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 122 |\u001b[39m     expect(result\u001b[33m.\u001b[39mcurrent\u001b[33m.\u001b[39mbg\u001b[33m.\u001b[39mwarning)\u001b[33m.\u001b[39mtoBe(\u001b[32m'bg-[hsl(var(--bg-warning))]'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 123 |\u001b[39m     expect(result\u001b[33m.\u001b[39mcurrent\u001b[33m.\u001b[39mbg\u001b[33m.\u001b[39mprimary)\u001b[33m.\u001b[39mtoBe(\u001b[32m'bg-[hsl(var(--bg-primary))]'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 124 |\u001b[39m     expect(result\u001b[33m.\u001b[39mcurrent\u001b[33m.\u001b[39mbg\u001b[33m.\u001b[39msecondary)\u001b[33m.\u001b[39mtoBe(\u001b[32m'bg-[hsl(var(--bg-secondary))]'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 125 |\u001b[39m     expect(result\u001b[33m.\u001b[39mcurrent\u001b[33m.\u001b[39mbg\u001b[33m.\u001b[39mhover)\u001b[33m.\u001b[39mtoBe(\u001b[32m'bg-[hsl(var(--bg-hover))]'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 126 |\u001b[39m     expect(result\u001b[33m.\u001b[39mcurrent\u001b[33m.\u001b[39mbg\u001b[33m.\u001b[39mactive)\u001b[33m.\u001b[39mtoBe(\u001b[32m'bg-[hsl(var(--bg-active))]'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (src/hooks/__tests__/background-centralization.test.ts:123:39)\n\n  â— ðŸ”— useSemanticColors Integration â€º ðŸš« useSemanticColors contains NO hardcoded bg- classes\n\n    expect(received).toMatch(expected)\n\n    Expected pattern: /bg-\\[hsl\\(var\\(--bg-[a-z]+\\)\\)\\]/\n    Received string:  \"bg-background\"\n\n    \u001b[0m \u001b[90m 134 |\u001b[39m     allBgValues\u001b[33m.\u001b[39mforEach(bgClass \u001b[33m=>\u001b[39m {\n     \u001b[90m 135 |\u001b[39m       expect(bgClass)\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoMatch(\u001b[35m/bg-(green|blue|red|yellow|gray|slate|white)-\\d+/\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 136 |\u001b[39m       expect(bgClass)\u001b[33m.\u001b[39mtoMatch(\u001b[35m/bg-\\[hsl\\(var\\(--bg-[a-z]+\\)\\)\\]/\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// Must be CSS variable format\u001b[39m\n     \u001b[90m     |\u001b[39m                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 137 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 138 |\u001b[39m\n     \u001b[90m 139 |\u001b[39m     \u001b[90m// Additional validation: Ensure all patterns use CSS variables\u001b[39m\u001b[0m\n\n      at toMatch (src/hooks/__tests__/background-centralization.test.ts:136:23)\n          at Array.forEach (<anonymous>)\n      at Object.forEach (src/hooks/__tests__/background-centralization.test.ts:134:17)\n\n  â— ðŸ›¡ï¸ Regression Prevention â€º ðŸŒ Cross-browser compatibility maintained\n\n    TypeError: CSS.supports is not a function\n\n    \u001b[0m \u001b[90m 258 |\u001b[39m   test(\u001b[32m'ðŸŒ Cross-browser compatibility maintained'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 259 |\u001b[39m     \u001b[90m// TODO: Test CSS variable support across target browsers\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 260 |\u001b[39m     expect(\u001b[33mCSS\u001b[39m\u001b[33m.\u001b[39msupports(\u001b[32m'color'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'hsl(var(--bg-success))'\u001b[39m))\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 261 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 262 |\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 263 |\u001b[39m\u001b[0m\n\n      at Object.supports (src/hooks/__tests__/background-centralization.test.ts:260:16)\n","name":"C:\\Nestor_Pagonis\\src\\hooks\\__tests__\\background-centralization.test.ts","startTime":1768084862977,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["calculateBackoffDelay"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"calculateBackoffDelay should calculate correct delay for first attempt","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084863970,"status":"passed","title":"should calculate correct delay for first attempt"},{"ancestorTitles":["calculateBackoffDelay"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"calculateBackoffDelay should calculate correct delay for second attempt","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084863974,"status":"passed","title":"should calculate correct delay for second attempt"},{"ancestorTitles":["calculateBackoffDelay"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"calculateBackoffDelay should calculate correct delay for third attempt","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084863975,"status":"passed","title":"should calculate correct delay for third attempt"},{"ancestorTitles":["calculateBackoffDelay"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"calculateBackoffDelay should cap delay at maxDelayMs","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084863976,"status":"passed","title":"should cap delay at maxDelayMs"},{"ancestorTitles":["calculateBackoffDelay"],"duration":5,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"calculateBackoffDelay should add jitter when enabled","invocations":1,"location":null,"numPassingAsserts":20,"retryReasons":[],"startAt":1768084863977,"status":"passed","title":"should add jitter when enabled"},{"ancestorTitles":["isRetryableError"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"isRetryableError should return true for retryable error","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084863982,"status":"passed","title":"should return true for retryable error"},{"ancestorTitles":["isRetryableError"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"isRetryableError should return true for timeout error","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084863983,"status":"passed","title":"should return true for timeout error"},{"ancestorTitles":["isRetryableError"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"isRetryableError should return false for non-retryable error","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084863984,"status":"passed","title":"should return false for non-retryable error"},{"ancestorTitles":["isRetryableError"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"isRetryableError should return true when no retryable errors specified","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084863985,"status":"passed","title":"should return true when no retryable errors specified"},{"ancestorTitles":["withRetry"],"duration":9,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"withRetry should succeed on first attempt","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1768084863986,"status":"passed","title":"should succeed on first attempt"},{"ancestorTitles":["withRetry"],"duration":45,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"withRetry should retry and succeed after failures","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1768084863995,"status":"passed","title":"should retry and succeed after failures"},{"ancestorTitles":["withRetry"],"duration":48,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"withRetry should fail after max attempts","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1768084864041,"status":"passed","title":"should fail after max attempts"},{"ancestorTitles":["withRetry"],"duration":2,"failing":false,"failureDetails":[{"matcherResult":{"message":"expect(received).toBeLessThanOrEqual(expected)\n\nExpected: <= 1\nReceived:    3","pass":false}}],"failureMessages":["Error: expect(received).toBeLessThanOrEqual(expected)\n\nExpected: <= 1\nReceived:    3\n    at Object.toBeLessThanOrEqual (C:\\Nestor_Pagonis\\src\\services\\entity-linking\\__tests__\\retry.test.ts:195:29)"],"fullName":"withRetry should not retry non-retryable errors","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084864089,"status":"failed","title":"should not retry non-retryable errors"},{"ancestorTitles":["withRetry"],"duration":20,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"withRetry should track total time","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084864100,"status":"passed","title":"should track total time"},{"ancestorTitles":["withRetry"],"duration":16,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"withRetry should call onRetry callback","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084864121,"status":"passed","title":"should call onRetry callback"},{"ancestorTitles":["withFastRetry"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"withFastRetry should use fast retry config","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084864138,"status":"passed","title":"should use fast retry config"},{"ancestorTitles":["withFastRetry"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"withFastRetry should have fewer max attempts than default","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084864139,"status":"passed","title":"should have fewer max attempts than default"},{"ancestorTitles":["withFastRetry"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"withFastRetry should have shorter base delay than default","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084864140,"status":"passed","title":"should have shorter base delay than default"},{"ancestorTitles":["Retry Integration"],"duration":29,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Retry Integration should handle concurrent retries","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084864140,"status":"passed","title":"should handle concurrent retries"},{"ancestorTitles":["Retry Integration"],"duration":48,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Retry Integration should work with real async operations","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1768084864169,"status":"passed","title":"should work with real async operations"}],"endTime":1768084864228,"message":"  â— withRetry â€º should not retry non-retryable errors\n\n    expect(received).toBeLessThanOrEqual(expected)\n\n    Expected: <= 1\n    Received:    3\n\n    \u001b[0m \u001b[90m 193 |\u001b[39m\n     \u001b[90m 194 |\u001b[39m     expect(result\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 195 |\u001b[39m     expect(result\u001b[33m.\u001b[39mattempts)\u001b[33m.\u001b[39mtoBeLessThanOrEqual(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 196 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 197 |\u001b[39m\n     \u001b[90m 198 |\u001b[39m   test(\u001b[32m'should track total time'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toBeLessThanOrEqual (src/services/entity-linking/__tests__/retry.test.ts:195:29)\n","name":"C:\\Nestor_Pagonis\\src\\services\\entity-linking\\__tests__\\retry.test.ts","startTime":1768084863662,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["ðŸŽ¯ Line Drawing Smoke Test (CRITICAL)","âœ… Critical Files Exist"],"duration":9,"failing":false,"failureDetails":[{"matcherResult":{"actual":false,"expected":true,"message":"expect(received).toBe(expected) // Object.is equality\n\nExpected: true\nReceived: false","name":"toBe","pass":false}}],"failureMessages":["Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: true\nReceived: false\n    at Object.toBe (C:\\Nestor_Pagonis\\src\\subapps\\dxf-viewer\\__tests__\\line-drawing-smoke.test.ts:22:39)\n    at Promise.finally.completed (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at _runTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\index.js:275:16)\n    at runTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\index.js:343:7)"],"fullName":"ðŸŽ¯ Line Drawing Smoke Test (CRITICAL) âœ… Critical Files Exist should have useUnifiedDrawing hook file","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1768084864655,"status":"failed","title":"should have useUnifiedDrawing hook file"},{"ancestorTitles":["ðŸŽ¯ Line Drawing Smoke Test (CRITICAL)","âœ… Critical Files Exist"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ðŸŽ¯ Line Drawing Smoke Test (CRITICAL) âœ… Critical Files Exist should have useDrawingHandlers hook file","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084864672,"status":"passed","title":"should have useDrawingHandlers hook file"},{"ancestorTitles":["ðŸŽ¯ Line Drawing Smoke Test (CRITICAL)","âœ… Critical Files Exist"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ðŸŽ¯ Line Drawing Smoke Test (CRITICAL) âœ… Critical Files Exist should have CanvasSection component file","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084864674,"status":"passed","title":"should have CanvasSection component file"},{"ancestorTitles":["ðŸŽ¯ Line Drawing Smoke Test (CRITICAL)","âš ï¸ REGRESSION: Critical Bug Fixes Present"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ðŸŽ¯ Line Drawing Smoke Test (CRITICAL) âš ï¸ REGRESSION: Critical Bug Fixes Present ðŸ› Fix #1: onDrawingHover handler exists in useDrawingHandlers","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084864676,"status":"passed","title":"ðŸ› Fix #1: onDrawingHover handler exists in useDrawingHandlers"},{"ancestorTitles":["ðŸŽ¯ Line Drawing Smoke Test (CRITICAL)","âš ï¸ REGRESSION: Critical Bug Fixes Present"],"duration":7,"failing":false,"failureDetails":[{"matcherResult":{"message":"expect(received).toContain(expected) // indexOf\n\nExpected substring: \"drawingHandlers.state.previewEntity\"\nReceived string:    \"'use client';Â·\nimport React, { useRef, useState } from 'react';Â·\n// === CANVAS V2 IMPORTS ===Â·\nimport { DxfCanvas, LayerCanvas, type ColorLayer, type SnapSettings, type GridSettings, type RulerSettings, type SelectionSettings, type DxfScene, type DxfEntityUnion } from '../../canvas-v2';Â·\nimport { createCombinedBounds } from '../../systems/zoom/utils/bounds';Â·\nimport type { CrosshairSettings } from '../../rendering/ui/crosshair/CrosshairTypes';Â·\n// âœ… CURSOR SETTINGS: Import Î±Ï€ÏŒ ÎºÎµÎ½Ï„ÏÎ¹ÎºÏŒ system Î±Î½Ï„Î¯ Î³Î¹Î± duplicateÂ·\nimport type { CursorSettings } from '../../systems/cursor/config';Â·\nimport { useCanvasOperations } from '../../hooks/interfaces/useCanvasOperations';Â·\nimport { useCanvasContext } from '../../contexts/CanvasContext';Â·\nimport { useDrawingHandlers } from '../../hooks/drawing/useDrawingHandlers';Â·\nimport { UI_COLORS } from '../../config/color-config';Â·\n// CanvasProvider removed - not needed for Canvas V2Â·\n// OverlayCanvas import removed - it was dead codeÂ·\nimport { FloatingPanelContainer } from '../../ui/FloatingPanelContainer';Â·\nimport { OverlayList } from '../../ui/OverlayList';Â·\nimport { OverlayProperties } from '../../ui/OverlayProperties';Â·\nimport { useOverlayStore } from '../../overlays/overlay-store';Â·\nimport { useLevels } from '../../systems/levels';Â·\nimport { useRulersGridContext } from '../../systems/rulers-grid/RulersGridSystem';Â·\nimport { useCursorSettings } from '../../systems/cursor';Â·\nimport { globalRulerStore } from '../../settings-provider';Â·\nimport type { DXFViewerLayoutProps } from '../../integration/types';Â·\nimport type { OverlayEditorMode, Status, OverlayKind } from '../../overlays/types';Â·\nimport { getStatusColors } from '../../config/color-mapping';Â·\nimport { createOverlayHandlers } from '../../overlays/types';Â·\nimport { calculateDistance } from '../../rendering/entities/shared/geometry-rendering-utils';Â·\nimport type { ViewTransform, Point2D } from '../../rendering/types/Types';Â·\nimport { useZoom } from '../../systems/zoom';Â·\nimport { CoordinateTransforms } from '../../rendering/core/CoordinateTransforms';Â·\n// âœ… ENTERPRISE MIGRATION: Using ServiceRegistryÂ·\nimport { serviceRegistry } from '../../services';Â·\n// âœ… ADR-006 FIX: Import CrosshairOverlay Î³Î¹Î± crosshair renderingÂ·\nimport CrosshairOverlay from '../../canvas-v2/overlays/CrosshairOverlay';Â·\n// âœ… ADR-009: Import RulerCornerBox for interactive corner box (AutoCAD/Revit standard)Â·\nimport RulerCornerBox from '../../canvas-v2/overlays/RulerCornerBox';Â·\n// ðŸŽ¯ SNAP INDICATOR: Import for visual snap feedbackÂ·\nimport SnapIndicatorOverlay from '../../canvas-v2/overlays/SnapIndicatorOverlay';Â·\nimport { useSnapContext } from '../../snapping/context/SnapContext';Â·\n// Enterprise Canvas UI Migration - Phase BÂ·\nimport { canvasUI } from '@/styles/design-tokens/canvas';Â·\n// ðŸ¢ ENTERPRISE: Centralized spacing tokens (ADR-013)Â·\nimport { PANEL_LAYOUT } from '../../config/panel-tokens';Â·\n// ðŸ¢ PDF BACKGROUND: Enterprise PDF background systemÂ·\nimport { PdfBackgroundCanvas, usePdfBackgroundStore } from '../../pdf-background';Â·Â·Â·\n/**Â·\n * Renders the main canvas area, including the renderer and floating panels.Â·\n */Â·\nexport const CanvasSection: React.FC<DXFViewerLayoutProps & { overlayMode: OverlayEditorMode, currentStatus: Status, currentKind: OverlayKind }> = (props) => {Â·\n  // âœ… FIX: Use DxfCanvasRef type Î³Î¹Î± getCanvas() method accessÂ·\n  const dxfCanvasRef = useRef<any>(null); // DxfCanvasRef type (Î¼Îµ getCanvas() method)Â·\n  const overlayCanvasRef = useRef<HTMLCanvasElement>(null);Â·Â·Â·\n  // === NEW ZOOM SYSTEM ===Â·\n  const initialTransform: ViewTransform = { scale: 1, offsetX: 0, offsetY: 0 };Â·\n  const [transform, setTransform] = useState<ViewTransform>(initialTransform);Â·Â·Â·\n  // âœ… CENTRALIZED VIEWPORT: Single source of truth Î³Î¹Î± viewport dimensionsÂ·\n  const [viewport, setViewport] = useState<{ width: number; height: number }>({ width: 0, height: 0 });Â·Â·Â·\n  const zoomSystem = useZoom({Â·\n    initialTransform,Â·\n    onTransformChange: (newTransform) => {Â·\n      setTransform(newTransform); // âœ… SYNC WITH STATEÂ·\n    },Â·\n    // ðŸ¢ ENTERPRISE: Inject viewport Î³Î¹Î± accurate zoom-to-cursorÂ·\n    viewportÂ·\n  });Â·\n  const [canvasRect, setCanvasRect] = useState<DOMRect | null>(null);Â·\n  const [mouseCss, setMouseCss] = useState<Point2D | null>(null);Â·\n  const [mouseWorld, setMouseWorld] = useState<Point2D | null>(null);Â·Â·Â·\n  // ðŸŽ¯ Canvas visibility Î±Ï€ÏŒ parent props (Î¼Îµ fallback ÏƒÏ„Î± defaults)Â·\n  const showDxfCanvas = props.dxfCanvasVisible ?? true;Â·\n  const showLayerCanvasDebug = props.layerCanvasVisible ?? true;Â·Â·Â·Â·Â·\n  const overlayStore = useOverlayStore();Â·\n  const levelManager = useLevels();Â·\n  const [draftPolygon, setDraftPolygon] = useState<Array<[number, number]>>([]);Â·Â·Â·\n  // ðŸ¢ ENTERPRISE: Provide zoom system to contextÂ·\n  const canvasContext = useCanvasContext();Â·\n  // ðŸŽ¯ SNAP INDICATOR: Get current snap result for visual feedbackÂ·\n  const { currentSnapResult } = useSnapContext();Â·\n  // ðŸ¢ PDF BACKGROUND: Get PDF background state and setViewport actionÂ·\n  const {Â·\n    enabled: pdfEnabled,Â·\n    opacity: pdfOpacity,Â·\n    transform: pdfTransform,Â·\n    renderedImageUrl: pdfImageUrl,Â·\n    setViewport: setPdfViewport,Â·\n  } = usePdfBackgroundStore();Â·\n  // âœ… CENTRALIZED VIEWPORT: Update viewport Î±Ï€ÏŒ canvas dimensionsÂ·\n  // ðŸ¢ FIX (2026-01-04): Use ResizeObserver for reliable viewport trackingÂ·\n  React.useEffect(() => {Â·\n    let resizeObserver: ResizeObserver | null = null;Â·Â·Â·\n    const updateViewport = () => {Â·\n      // ðŸ¢ FIX: dxfCanvasRef.current is NOT HTMLCanvasElement - it has getCanvas() method!Â·\n      // Try to get the actual canvas element from DxfCanvas component refÂ·\n      const dxfCanvas = dxfCanvasRef.current?.getCanvas?.();Â·\n      const layerCanvas = overlayCanvasRef.current;Â·Â·Â·\n      // Use DxfCanvas as primary (has the actual canvas element)Â·\n      const canvas = dxfCanvas || layerCanvas;Â·Â·Â·\n      if (canvas && canvas instanceof HTMLCanvasElement) {Â·\n        const rect = canvas.getBoundingClientRect();Â·\n        // Only update if dimensions are valid (not 0x0)Â·\n        if (rect.width > 0 && rect.height > 0) {Â·\n          setViewport({ width: rect.width, height: rect.height });Â·\n          // ðŸ¢ PDF BACKGROUND: Sync viewport to PDF store for fit-to-viewÂ·\n          setPdfViewport({ width: rect.width, height: rect.height });Â·\n          console.log('âœ… [Viewport] Updated:', rect.width, 'x', rect.height);Â·\n        }Â·\n      }Â·\n    };Â·Â·Â·\n    // ðŸ¢ ENTERPRISE: Use ResizeObserver for precise dimension trackingÂ·\n    const setupObserver = () => {Â·\n      const dxfCanvas = dxfCanvasRef.current?.getCanvas?.();Â·\n      const layerCanvas = overlayCanvasRef.current;Â·\n      const canvas = dxfCanvas || layerCanvas;Â·Â·Â·\n      if (canvas && canvas instanceof HTMLCanvasElement) {Â·\n        resizeObserver = new ResizeObserver((entries) => {Â·\n          for (const entry of entries) {Â·\n            const { width, height } = entry.contentRect;Â·\n            if (width > 0 && height > 0) {Â·\n              setViewport({ width, height });Â·\n              // ðŸ¢ PDF BACKGROUND: Sync viewport to PDF store for fit-to-viewÂ·\n              setPdfViewport({ width, height });Â·\n            }Â·\n          }Â·\n        });Â·\n        resizeObserver.observe(canvas);Â·Â·Â·\n        // Initial updateÂ·\n        updateViewport();Â·\n      }Â·\n    };Â·Â·Â·\n    // ðŸ¢ ENTERPRISE: Retry mechanism for canvas mount timingÂ·\n    let retryCount = 0;Â·\n    const maxRetries = 10;Â·Â·Â·\n    const trySetupObserver = () => {Â·\n      const dxfCanvas = dxfCanvasRef.current?.getCanvas?.();Â·\n      const layerCanvas = overlayCanvasRef.current;Â·Â·Â·\n      if (dxfCanvas || layerCanvas) {Â·\n        setupObserver();Â·\n      } else if (retryCount < maxRetries) {Â·\n        retryCount++;Â·\n        setTimeout(trySetupObserver, PANEL_LAYOUT.TIMING.OBSERVER_RETRY); // Retry every 100msÂ·\n      } else {Â·\n        console.warn('âš ï¸ [Viewport] Canvas not available after', maxRetries, 'retries');Â·\n      }Â·\n    };Â·Â·Â·\n    // Initial setup with delay to ensure canvas is mountedÂ·\n    const timer = setTimeout(trySetupObserver, PANEL_LAYOUT.TIMING.OBSERVER_RETRY);Â·Â·Â·\n    // Fallback: Also listen for window resizeÂ·\n    window.addEventListener('resize', updateViewport);Â·Â·Â·\n    return () => {Â·\n      clearTimeout(timer);Â·\n      window.removeEventListener('resize', updateViewport);Â·\n      if (resizeObserver) {Â·\n        resizeObserver.disconnect();Â·\n      }Â·\n    };Â·\n  }, []); // ðŸ¢ FIX: Empty deps - setup once, ResizeObserver handles updatesÂ·Â·Â·\n  // âœ… AUTO FIT TO VIEW: Trigger existing fit-to-view event after canvas mountÂ·\n  // âš ï¸ DISABLED: Î‘Ï†Î±Î¹ÏÎ­Î¸Î·ÎºÎµ Î³Î¹Î±Ï„Î¯ Ï€ÏÎ¿ÎºÎ±Î»Î¿ÏÏƒÎµ issues Î¼Îµ origin marker visibilityÂ·\n  // ÎŸ Ï‡ÏÎ®ÏƒÏ„Î·Ï‚ Î¼Ï€Î¿ÏÎµÎ¯ Î½Î± Ï€Î±Ï„Î®ÏƒÎµÎ¹ manual \\\"Î•Ï…Î¸Ï…Î³ÏÎ¬Î¼Î¼Î¹ÏƒÎ·\\\" ÏŒÏ„Î±Î½ Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹Â·\n  /*Â·\n  const hasTriggeredAutoFit = React.useRef(false);Â·\n  React.useEffect(() => {Â·\n    // Only trigger ONCE after viewport is readyÂ·\n    if (!hasTriggeredAutoFit.current && viewport.width > 0 && viewport.height > 0) {Â·\n      const timer = setTimeout(() => {Â·\n        console.log('ðŸŽ¯ AUTO FIT TO VIEW: Dispatching canvas-fit-to-view event');Â·\n        // âœ… ZERO DUPLICATES: Î§ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹ÏŽ Ï„Î¿ Î¥Î Î‘Î¡Î§ÎŸÎ event systemÂ·\n        document.dispatchEvent(new CustomEvent('canvas-fit-to-view', {Â·\n          detail: { viewport }Â·\n        }));Â·\n        hasTriggeredAutoFit.current = true; // Mark as triggeredÂ·\n      }, 200); // Small delay to ensure all canvas setup is completeÂ·Â·Â·\n      return () => clearTimeout(timer);Â·\n    }Â·\n  }, [viewport.width, viewport.height]); // âœ… FIX: Only depend on viewport, not colorLayersÂ·\n  */Â·Â·Â·\n  // Get rulers and grid settings from RulersGridSystemÂ·\n  const {Â·\n    state: { grid: gridContextSettings, rulers: rulerContextSettings }Â·\n  } = useRulersGridContext();Â·Â·Â·\n  // ðŸ”§ FIX: React state hook Î³Î¹Î± GlobalRulerStore reactivityÂ·\n  const [globalRulerSettings, setGlobalRulerSettings] = React.useState(globalRulerStore.settings);Â·Â·Â·\n  React.useEffect(() => {Â·\n    const unsubscribe = globalRulerStore.subscribe((newSettings) => {Â·\n      setGlobalRulerSettings(newSettings);Â·\n    });Â·\n    return unsubscribe;Â·\n  }, []);Â·Â·Â·\n  // Get cursor settings from CursorSystemÂ·\n  const { settings: cursorSettings } = useCursorSettings();Â·Â·Â·\n  // ðŸ”º CURSOR SYSTEM INTEGRATION - Î£ÏÎ½Î´ÎµÏƒÎ· Î¼Îµ floating panelÂ·\n  const crosshairSettings: CrosshairSettings = {Â·\n    enabled: cursorSettings.crosshair.enabled,Â·\n    visible: cursorSettings.crosshair.enabled, // visible follows enabled stateÂ·\n    color: cursorSettings.crosshair.color,Â·\n    size: cursorSettings.crosshair.size_percent,Â·\n    opacity: cursorSettings.crosshair.opacity,Â·\n    style: cursorSettings.crosshair.line_style,Â·\n    // Extended properties Î±Ï€ÏŒ CursorSystemÂ·\n    lineWidth: cursorSettings.crosshair.line_width,Â·\n    useCursorGap: cursorSettings.crosshair.use_cursor_gap,Â·\n    centerGapPx: cursorSettings.crosshair.center_gap_px,Â·\n    showCenterDot: true,  // Default: show center dotÂ·\n    centerDotSize: 2      // Default: 2px center dotÂ·\n  };Â·Â·Â·\n  // ðŸ”º CURSOR SETTINGS INTEGRATION - Pass complete cursor settings to LayerCanvasÂ·\n  // LayerCanvas expects the full CursorSettings object from systems/cursor/config.tsÂ·\n  const cursorCanvasSettings: CursorSettings = cursorSettings;Â·Â·Â·\n  const snapSettings: SnapSettings = {Â·\n    enabled: true,Â·\n    types: ['endpoint', 'midpoint', 'center'],Â·\n    tolerance: 10Â·\n  };Â·Â·Â·\n  // Convert RulersGridSystem settings to Canvas V2 formatÂ·\n  const rulerSettings: RulerSettings = {Â·\n    enabled: true, // âœ… FORCE ENABLE RULERSÂ·\n    unit: (rulerContextSettings?.units as 'mm' | 'cm' | 'm') ?? 'mm',Â·\n    color: rulerContextSettings?.horizontal?.color ?? UI_COLORS.WHITE, // âœ… CENTRALIZED WHITE Î³Î¹Î± visibilityÂ·\n    backgroundColor: rulerContextSettings?.horizontal?.backgroundColor ?? UI_COLORS.DARK_BACKGROUND, // âœ… CENTRALIZED DARK BACKGROUND Î³Î¹Î± contrastÂ·\n    fontSize: rulerContextSettings?.horizontal?.fontSize ?? 12,Â·\n    // Extended properties Î±Ï€ÏŒ RulersGridSystemÂ·\n    textColor: rulerContextSettings?.horizontal?.textColor ?? UI_COLORS.WHITE, // âœ… CENTRALIZED WHITE TEXT Î³Î¹Î± visibilityÂ·\n    showLabels: rulerContextSettings?.horizontal?.showLabels ?? true,Â·\n    showUnits: rulerContextSettings?.horizontal?.showUnits ?? true,Â·\n    showBackground: rulerContextSettings?.horizontal?.showBackground ?? true,Â·\n    showMajorTicks: rulerContextSettings?.horizontal?.showMajorTicks ?? true,Â·\n    showMinorTicks: rulerContextSettings?.horizontal?.showMinorTicks ?? true,Â·\n    majorTickColor: rulerContextSettings?.horizontal?.majorTickColor ?? UI_COLORS.WHITE, // âœ… CENTRALIZED WHITE TICKSÂ·\n    minorTickColor: rulerContextSettings?.horizontal?.minorTickColor ?? UI_COLORS.LIGHT_GRAY, // âœ… CENTRALIZED LIGHT GRAY MINOR TICKSÂ·\n    majorTickLength: rulerContextSettings?.horizontal?.majorTickLength ?? 10,Â·\n    minorTickLength: rulerContextSettings?.horizontal?.minorTickLength ?? 5,Â·\n    height: rulerContextSettings?.horizontal?.height ?? 30,Â·\n    width: rulerContextSettings?.vertical?.width ?? 30,Â·\n    position: rulerContextSettings?.horizontal?.position ?? 'bottom',Â·\n    // ðŸ”º MISSING UNITS SETTINGS - Î£ÏÎ½Î´ÎµÏƒÎ· Î¼Îµ floating panelÂ·\n    unitsFontSize: rulerContextSettings?.horizontal?.unitsFontSize ?? 10,Â·\n    unitsColor: rulerContextSettings?.horizontal?.unitsColor ?? UI_COLORS.WHITE // âœ… CENTRALIZED WHITE UNITS TEXTÂ·\n  };Â·Â·Â·\n  const {Â·\n    activeTool,Â·\n    showGrid,Â·\n    showLayers, // âœ… Î¥Î Î‘Î¡Î§ÎŸÎ SYSTEM: Layer visibility Î±Ï€Î¿ useDxfViewerStateÂ·\n    overlayMode = 'select',Â·\n    currentStatus = 'for-sale',Â·\n    currentKind = 'unit',Â·\n    ...restPropsÂ·\n  } = props;Â·Â·Â·\n  // âœ… LAYER VISIBILITY: Show LayerCanvas controlled by debug toggleÂ·\n  const showLayerCanvas = showLayerCanvasDebug; // Debug toggleableÂ·Â·Â·\n  // âœ… CONVERT RulersGridSystem grid settings to Canvas V2 GridSettings formatÂ·\n  // RulersGridSystem uses: gridSettings.visual.colorÂ·\n  // Canvas GridRenderer uses: gridSettings.colorÂ·\n  const gridSettings: GridSettings = {Â·\n    // Enabled state: Î Î¡Î©Î¤Î‘ Î±Ï€ÏŒ panel, Î¼ÎµÏ„Î¬ toolbar fallback, Ï„Î­Î»Î¿Ï‚ Î Î‘ÎÎ¤Î‘ true Î³Î¹Î± stabilityÂ·\n    // ðŸ›¡ï¸ NULL GUARD: Ensure grid is always enabled, even if context is temporarily undefined during re-rendersÂ·\n    enabled: gridContextSettings?.visual?.enabled ?? showGrid ?? true,Â·\n    visible: gridContextSettings?.visual?.enabled ?? true, // âœ… VISIBILITY: Controls grid renderingÂ·Â·Â·\n    // âœ… SIZE: Î‘Ï€ÏŒ panel settingsÂ·\n    size: gridContextSettings?.visual?.step ?? 10,Â·Â·Â·\n    // âœ… COLORS: Î‘Ï€ÏŒ panel settings (NOT hardcoded!)Â·\n    color: gridContextSettings?.visual?.color ?? UI_COLORS.BLUE_DEFAULT, // CENTRALIZED default blue Î±Ï€ÏŒ panelÂ·\n    majorGridColor: gridContextSettings?.visual?.majorGridColor ?? UI_COLORS.MEDIUM_GRAY,Â·\n    minorGridColor: gridContextSettings?.visual?.minorGridColor ?? UI_COLORS.LIGHT_GRAY_ALT,Â·Â·Â·\n    // âœ… OPACITY: Î‘Ï€ÏŒ panel settingsÂ·\n    opacity: gridContextSettings?.visual?.opacity ?? 0.6,Â·Â·Â·\n    // âœ… LINE WIDTHS: Î‘Ï€ÏŒ panel settingsÂ·\n    lineWidth: gridContextSettings?.visual?.minorGridWeight ?? 0.5,Â·\n    majorGridWeight: gridContextSettings?.visual?.majorGridWeight ?? 1,Â·\n    minorGridWeight: gridContextSettings?.visual?.minorGridWeight ?? 0.5,Â·Â·Â·\n    // âœ… GRID STYLE: Î‘Ï€ÏŒ panel settings (lines/dots/crosses)Â·\n    style: gridContextSettings?.visual?.style ?? 'lines',Â·\n    majorInterval: gridContextSettings?.visual?.subDivisions ?? 5, // Extended property for grid subdivisionsÂ·\n    showMajorGrid: true,Â·\n    showMinorGrid: true,Â·\n    adaptiveOpacity: false, // âŒ DISABLE Î³Î¹Î± Î½Î± Ï†Î±Î¯Î½ÎµÏ„Î±Î¹ Ï€Î¬Î½Ï„Î±Â·\n    minVisibleSize: 0 // âœ… ALWAYS SHOW regardless of zoomÂ·\n  };Â·Â·Â·\n  // ðŸ”§ Grid major interval for ruler tick calculationsÂ·\n  const gridMajorInterval = gridContextSettings?.visual?.subDivisions ?? 5;Â·Â·Â·\n  // ðŸ”º SELECTION SETTINGS INTEGRATION - Î£ÏÎ½Î´ÎµÏƒÎ· selection boxes Î¼Îµ floating panelÂ·\n  const selectionSettings: SelectionSettings = {Â·\n    window: {Â·\n      fillColor: cursorSettings.selection.window.fillColor,Â·\n      fillOpacity: cursorSettings.selection.window.fillOpacity,Â·\n      borderColor: cursorSettings.selection.window.borderColor,Â·\n      borderOpacity: cursorSettings.selection.window.borderOpacity,Â·\n      borderStyle: cursorSettings.selection.window.borderStyle,Â·\n      borderWidth: cursorSettings.selection.window.borderWidthÂ·\n    },Â·\n    crossing: {Â·\n      fillColor: cursorSettings.selection.crossing.fillColor,Â·\n      fillOpacity: cursorSettings.selection.crossing.fillOpacity,Â·\n      borderColor: cursorSettings.selection.crossing.borderColor,Â·\n      borderOpacity: cursorSettings.selection.crossing.borderOpacity,Â·\n      borderStyle: cursorSettings.selection.crossing.borderStyle,Â·\n      borderWidth: cursorSettings.selection.crossing.borderWidthÂ·\n    }Â·\n  };Â·Â·Â·\n  // Get overlays for current levelÂ·\n  const currentOverlays = levelManager.currentLevelIdÂ·\n    ? overlayStore.getByLevel(levelManager.currentLevelId)Â·\n    : [];Â·Â·Â·\n  const selectedOverlay = overlayStore.getSelectedOverlay();Â·Â·Â·Â·Â·\n  // === CONVERT OVERLAYS TO CANVAS V2 FORMAT ===Â·\n  const convertToColorLayers = (overlays: any[]): ColorLayer[] => {Â·\n    // Simple debug - only log count and first overlay sample (no infinite re-render)Â·\n    if (overlays.length > 0) {Â·\n      // // console.log('ðŸ” Converting overlays:', {Â·\n      //   count: overlays.length,Â·\n      //   sample: { id: overlays[0].id, hasPolygon: !!overlays[0].polygon }Â·\n      // });Â·\n    }Â·Â·Â·\n    return overlaysÂ·\n      .filter(overlay => overlay.polygon && Array.isArray(overlay.polygon) && overlay.polygon.length >= 3)Â·\n      .map((overlay, index) => {Â·\n        const vertices = overlay.polygon.map((point: [number, number]) => ({ x: point[0], y: point[1] }));Â·Â·Â·\n        // Debug Î³Î¹Î± Ï„Î¿ Ï€ÏÏŽÏ„Î¿ overlayÂ·\n        if (index === 0) {Â·\n          // // console.log('ðŸ” convertToColorLayers - First overlay conversion:', {Â·\n          //   overlayId: overlay.id,Â·\n          //   originalPolygon: overlay.polygon.slice(0, 3), // Î¤Î± Ï€ÏÏŽÏ„Î± 3 pointsÂ·\n          //   convertedVertices: vertices.slice(0, 3), // Î¤Î± Ï€ÏÏŽÏ„Î± 3 verticesÂ·\n          //   color: overlay.color || UI_COLORS.OVERLAY_REDÂ·\n          // });Â·\n        }Â·Â·Â·\n        return {Â·\n          id: overlay.id,Â·\n          name: `Layer ${index + 1}`,Â·\n          color: overlay.color || getStatusColors(overlay.status)?.fill || UI_COLORS.BUTTON_PRIMARY,Â·\n          opacity: overlay.opacity || 0.7,  // Slightly transparent so we can see themÂ·\n          visible: overlay.visible !== false,Â·\n          zIndex: index,Â·\n          polygons: [{Â·\n            id: `polygon_${overlay.id}`,Â·\n            vertices,Â·\n            fillColor: overlay.color || getStatusColors(overlay.status)?.fill || UI_COLORS.BUTTON_PRIMARY,  // Use ÎºÎµÎ½Ï„ÏÎ¹ÎºÎ¬ STATUS_COLORSÂ·\n            strokeColor: overlay.selected ? UI_COLORS.SELECTED_RED : UI_COLORS.BLACK,  // Black stroke for visibilityÂ·\n            strokeWidth: overlay.selected ? 3 : 2,  // Thicker strokeÂ·\n            selected: overlay.id === overlayStore.selectedOverlayIdÂ·\n          }]Â·\n        };Â·\n      });Â·\n  };Â·Â·Â·\n  const colorLayers = convertToColorLayers(currentOverlays);Â·Â·Â·\n  // === ðŸŽ¨ DRAWING SYSTEM ===Â·\n  // useDrawingHandlers Î³Î¹Î± DXF entity drawing (Line, Circle, Rectangle, etc.)Â·\n  const drawingHandlers = useDrawingHandlers(Â·\n    activeTool,Â·\n    (entity) => {Â·\n      // Callback ÏŒÏ„Î±Î½ Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î·Î¸ÎµÎ¯ entityÂ·\n      if (props.handleSceneChange && props.currentScene) {Â·\n        // ðŸŽ¯ TYPE-SAFE: Entity is already properly typed from useDrawingHandlersÂ·\n        const updatedScene = {Â·\n          ...props.currentScene,Â·\n          entities: [...(props.currentScene.entities || []), entity]Â·\n        };Â·\n        props.handleSceneChange(updatedScene);Â·\n      }Â·\n    },Â·\n    (tool) => {Â·\n      // Tool change callbackÂ·\n      if (props.onToolChange) {Â·\n        props.onToolChange(tool);Â·\n      }Â·\n    },Â·\n    props.currentScene ?? undefined // âœ… Convert null to undefined for type compatibilityÂ·\n  );Â·Â·Â·\n  // === ðŸŽ¯ DRAWING HANDLERS REF ===Â·\n  // Î§ÏÎ®ÏƒÎ· ref pattern Î³Î¹Î± Î½Î± Î±Ï€Î¿Ï†ÏÎ³Î¿Ï…Î¼Îµ infinite loops (Bug #1 fix)Â·\n  const drawingHandlersRef = React.useRef(drawingHandlers);Â·\n  React.useEffect(() => {Â·\n    drawingHandlersRef.current = drawingHandlers;Â·\n  }, [drawingHandlers]);Â·Â·Â·\n  // === ðŸš€ AUTO-START DRAWING ===Â·\n  // ÎŒÏ„Î±Î½ ÎµÏ€Î¹Î»Î­Î³ÎµÏ„Î±Î¹ drawing tool, Î¾ÎµÎºÎ¹Î½Î¬ Î±Ï…Ï„ÏŒÎ¼Î±Ï„Î± Ï„Î¿ drawing modeÂ·\n  React.useEffect(() => {Â·\n    const isDrawingTool = activeTool === 'line' || activeTool === 'polyline' ||Â·\n                          activeTool === 'polygon' || activeTool === 'circle' ||Â·\n                          activeTool === 'rectangle'; // âœ… Removed 'arc' - not in ToolType unionÂ·\n    if (isDrawingTool && drawingHandlersRef.current?.startDrawing) {Â·\n      // ðŸŽ¯ TYPE-SAFE: activeTool is already narrowed to drawing tools by if statementÂ·\n      drawingHandlersRef.current.startDrawing(activeTool);Â·\n    }Â·\n  }, [activeTool]);Â·Â·Â·\n  // === CONVERT SCENE TO CANVAS V2 FORMAT ===Â·\n  const dxfScene: DxfScene | null = props.currentScene ? {Â·\n    entities: [Â·\n      ...(props.currentScene.entities?.map((entity): DxfEntityUnion | null => {Â·\n        // Get layer color informationÂ·\n        const layerInfo = entity.layer ? props.currentScene?.layers?.[entity.layer] : null;Â·Â·Â·\n        // Convert SceneEntity to DxfEntityUnionÂ·\n        const base = {Â·\n          id: entity.id,Â·\n          layer: entity.layer || 'default',Â·\n          color: String(entity.color || layerInfo?.color || UI_COLORS.WHITE), // âœ… ENTERPRISE FIX: Ensure string typeÂ·\n          lineWidth: entity.lineweight || 1,Â·\n          visible: entity.visible ?? true // âœ… ENTERPRISE FIX: Default to true if undefinedÂ·\n        };Â·Â·Â·\n        switch (entity.type) {Â·\n          case 'line': {Â·\n            // Type guard: Entity Î¼Îµ type 'line' Î­Ï‡ÎµÎ¹ start & endÂ·\n            const lineEntity = entity as typeof entity & { start: Point2D; end: Point2D };Â·\n            return { ...base, type: 'line' as const, start: lineEntity.start, end: lineEntity.end } as DxfEntityUnion;Â·\n          }Â·\n          case 'circle': {Â·\n            // Type guard: Entity Î¼Îµ type 'circle' Î­Ï‡ÎµÎ¹ center & radiusÂ·\n            const circleEntity = entity as typeof entity & { center: Point2D; radius: number };Â·\n            return { ...base, type: 'circle' as const, center: circleEntity.center, radius: circleEntity.radius } as DxfEntityUnion;Â·\n          }Â·\n          case 'polyline': {Â·\n            // Type guard: Entity Î¼Îµ type 'polyline' Î­Ï‡ÎµÎ¹ vertices & closedÂ·\n            const polylineEntity = entity as typeof entity & { vertices: Point2D[]; closed: boolean };Â·\n            return { ...base, type: 'polyline' as const, vertices: polylineEntity.vertices, closed: polylineEntity.closed } as DxfEntityUnion;Â·\n          }Â·\n          case 'arc': {Â·\n            // Type guard: Entity Î¼Îµ type 'arc' Î­Ï‡ÎµÎ¹ center, radius, startAngle, endAngleÂ·\n            const arcEntity = entity as typeof entity & { center: Point2D; radius: number; startAngle: number; endAngle: number };Â·\n            return { ...base, type: 'arc' as const, center: arcEntity.center, radius: arcEntity.radius, startAngle: arcEntity.startAngle, endAngle: arcEntity.endAngle } as DxfEntityUnion;Â·\n          }Â·\n          case 'text': {Â·\n            // â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—Â·\n            // â•‘ âš ï¸ VERIFIED WORKING (2026-01-03) - ÎœÎ—Î Î‘Î›Î›Î‘ÎžÎ•Î¤Î•!                   â•‘Â·\n            // â•‘ height || fontSize || 12 ÎµÎ¯Î½Î±Î¹ Î· Î£Î©Î£Î¤Î— ÏƒÎµÎ¹ÏÎ¬ Ï€ÏÎ¿Ï„ÎµÏÎ±Î¹ÏŒÏ„Î·Ï„Î±Ï‚       â•‘Â·\n            // â•‘ ÎœÎ—Î Î±Î»Î»Î¬Î¾ÎµÏ„Îµ ÏƒÎµ fontSize || height - Î§Î‘Î›Î‘Î•Î™ Ï„Î± ÎºÎµÎ¯Î¼ÎµÎ½Î±!           â•‘Â·\n            // â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•Â·\n            const textEntity = entity as typeof entity & { position: Point2D; text: string; fontSize?: number; height?: number; rotation?: number };Â·\n            const textHeight = textEntity.height || textEntity.fontSize || 12;Â·\n            return { ...base, type: 'text' as const, position: textEntity.position, text: textEntity.text, height: textHeight, rotation: textEntity.rotation } as DxfEntityUnion;Â·\n          }Â·\n          default:Â·\n            console.warn('ðŸ” Unsupported entity type for DxfCanvas:', entity.type);Â·\n            return null;Â·\n        }Â·\n      }).filter(Boolean) as DxfEntityUnion[] || []),Â·\n      // ðŸŽ¯ ADD PREVIEW ENTITY: Include preview entity from drawing state for real-time renderingÂ·\n      ...(drawingHandlers.drawingState.previewEntity ? (() => {Â·\n        const preview = drawingHandlers.drawingState.previewEntity;Â·Â·Â·\n        // Type-safe preview entity mapping based on entity typeÂ·\n        if (preview.type === 'line') {Â·\n          const linePreview = preview as typeof preview & {Â·\n            start: Point2D;Â·\n            end: Point2D;Â·\n            color?: string;Â·\n            lineweight?: numberÂ·\n          };Â·\n          return [{Â·\n            id: linePreview.id,Â·\n            type: 'line' as const,Â·\n            layer: linePreview.layer || '0',Â·\n            color: linePreview.color || UI_COLORS.BRIGHT_GREEN, // Green for previewÂ·\n            lineWidth: linePreview.lineweight || 1,Â·\n            visible: true,Â·\n            start: linePreview.start,Â·\n            end: linePreview.endÂ·\n          }] as DxfEntityUnion[];Â·\n        }Â·Â·Â·\n        // Note: DxfEntityUnion Î´ÎµÎ½ Ï…Ï€Î¿ÏƒÏ„Î·ÏÎ¯Î¶ÎµÎ¹ 'point', 'rectangle', etc - skip Î³Î¹Î± Ï„ÏŽÏÎ±Â·\n        // Î‘Î½ Ï‡ÏÎµÎ¹Î±ÏƒÏ„ÎµÎ¯, Î¸Î± Ï€ÏÎ­Ï€ÎµÎ¹ Î½Î± ÎµÏ€ÎµÎºÏ„Î±Î¸ÎµÎ¯ Ï„Î¿ DxfEntityUnion typeÂ·\n        return [];Â·\n      })() : [])Â·\n    ],Â·\n    layers: Object.keys(props.currentScene.layers || {}), // âœ… FIX: Convert layers object to arrayÂ·\n    bounds: props.currentScene.bounds // âœ… FIX: Use actual bounds from sceneÂ·\n  } : null;Â·Â·Â·\n  // ðŸ” DEBUG - Check if DXF scene has entities and auto-fit to viewÂ·\n  React.useEffect(() => {Â·\n    if (dxfScene && dxfScene.entities.length > 0) {Â·\n      // DxfScene loaded with entities - debug disabled for performanceÂ·Â·Â·\n      // âœ… AUTO-FIT TO VIEW - Using new zoom system with DYNAMIC VIEWPORTÂ·\n      if (dxfScene.bounds) {Â·\n        // Auto-fitting DXF to view - debug disabled for performanceÂ·Â·Â·\n        // Get actual canvas dimensions instead of hardcoded valuesÂ·\n        const canvas = dxfCanvasRef.current || overlayCanvasRef.current;Â·\n        if (canvas && canvas instanceof HTMLCanvasElement) {Â·\n          // âœ… ENTERPRISE MIGRATION: Get service from registryÂ·\n          const canvasBounds = serviceRegistry.get('canvas-bounds');Â·\n          const rect = canvasBounds.getBounds(canvas);Â·\n          const viewport = { width: rect.width, height: rect.height };Â·Â·Â·\n          // Use professional zoom system for fit-to-view with actual viewportÂ·\n          // ðŸŽ¯ ENTERPRISE: alignToOrigin=true to position world (0,0) at bottom-left ruler intersectionÂ·\n          zoomSystem.zoomToFit(dxfScene.bounds, viewport, true);Â·\n        } else {Â·\n          // Fallback to container dimensions if canvas not readyÂ·\n          const container = document.querySelector('.relative.w-full.h-full.overflow-hidden');Â·\n          if (container) {Â·\n            // âœ… ÎšÎ•ÎÎ¤Î¡Î™ÎšÎŸÎ ÎŸÎ™Î—Î£Î—: Î§ÏÎ®ÏƒÎ· CanvasBoundsService (works with any element)Â·\n            const rect = container.getBoundingClientRect();Â·\n            // ðŸŽ¯ ENTERPRISE: alignToOrigin=true to position world (0,0) at bottom-left ruler intersectionÂ·\n            zoomSystem.zoomToFit(dxfScene.bounds, { width: rect.width, height: rect.height }, true);Â·\n          }Â·\n        }Â·\n      }Â·\n    } else if (dxfScene) {Â·\n      // console.log('ðŸ” DxfScene loaded but NO entities:', { dxfScene });Â·\n    }Â·\n  }, [props.currentScene]); // Use props instead of derived state to prevent infinite loopÂ·Â·Â·\n  // Use shared overlay handlers to eliminate duplicate codeÂ·\n  const { handleOverlaySelect, handleOverlayEdit, handleOverlayDelete, handleOverlayUpdate } =Â·\n    createOverlayHandlers({Â·\n      setSelectedOverlay: overlayStore.setSelectedOverlay,Â·\n      remove: overlayStore.remove,Â·\n      update: overlayStore.update,Â·\n      getSelectedOverlay: overlayStore.getSelectedOverlay,Â·\n      overlays: overlayStore.overlaysÂ·\n    }, undefined);  // âœ… CanvasSection Î´ÎµÎ½ Î­Ï‡ÎµÎ¹ levelSwitcher, Î¬ÏÎ± Ï€ÎµÏÎ½Î¬Ï‰ undefinedÂ·Â·Â·\n  // âœ… ÎšÎ•ÎÎ¤Î¡Î™ÎšÎŸÎ ÎŸÎ™Î—Î£Î—: FIT TO OVERLAY - Î§ÏÎ®ÏƒÎ· ÎºÎµÎ½Ï„ÏÎ¹ÎºÎ®Ï‚ Ï…Ï€Î·ÏÎµÏƒÎ¯Î±Ï‚ Î±Î½Ï„Î¯ Î³Î¹Î± Î´Î¹Î¬ÏƒÏ€Î±ÏÏ„Î· logicÂ·\n  const fitToOverlay = (overlayId: string) => {Â·\n    const overlay = currentOverlays.find(o => o.id === overlayId);Â·\n    if (!overlay || !overlay.polygon || overlay.polygon.length < 3) {Â·\n      return;Â·\n    }Â·Â·Â·\n    // Calculate bounding box of overlay polygonÂ·\n    const xs = overlay.polygon.map(([x]) => x);Â·\n    const ys = overlay.polygon.map(([, y]) => y);Â·\n    const bounds = {Â·\n      min: { x: Math.min(...xs), y: Math.min(...ys) },Â·\n      max: { x: Math.max(...xs), y: Math.max(...ys) }Â·\n    };Â·Â·Â·\n    // âœ… ENTERPRISE MIGRATION: Get service from registryÂ·\n    const fitToView = serviceRegistry.get('fit-to-view');Â·\n    const viewport = { width: 800, height: 600 }; // Default fallback - should get from actual canvasÂ·\n    const result = fitToView.calculateFitToViewFromBounds(bounds, viewport, { padding: 0.1 });Â·Â·Â·\n    if (result.success && result.transform) {Â·\n      // Apply transform to zoom systemÂ·\n      zoomSystem.setTransform(result.transform);Â·\n    }Â·\n  };Â·Â·Â·Â·Â·\n  // Drawing logicÂ·\n  const handleOverlayClick = (overlayId: string, point: Point2D) => {Â·\n    // console.log('ðŸ” handleOverlayClick called:', { overlayId, point, overlayMode, activeTool });Â·Â·Â·\n    // ðŸš€ PROFESSIONAL CAD: Î‘Ï…Ï„ÏŒÎ¼Î±Ï„Î· ÎµÏ€Î¹Î»Î¿Î³Î® layers ÏŒÏ„Î±Î½ layering tool ÎµÎ¯Î½Î±Î¹ ÎµÎ½ÎµÏÎ³ÏŒÂ·\n    if (activeTool === 'layering' || overlayMode === 'select') {Â·\n      // console.log('ðŸ” Selecting overlay:', overlayId);Â·\n      handleOverlaySelect(overlayId);Â·\n      // ðŸ”§ AUTO FIT TO VIEW - Zoom to selected overlayÂ·\n      // console.log('ðŸ” Calling fitToOverlay in 100ms...');Â·\n      setTimeout(() => {Â·\n        // console.log('ðŸ” Now calling fitToOverlay:', overlayId);Â·\n        fitToOverlay(overlayId);Â·\n      }, 100); // Small delay to ensure selection state updatesÂ·\n    }Â·\n  };Â·Â·Â·\n  const handleCanvasClick = (point: Point2D) => {Â·\n    // âœ… ÎšÎ•ÎÎ¤Î¡Î™ÎšÎŸÎ ÎŸÎ™Î—Î£Î—: Route click to unified drawing system for drawing toolsÂ·\n    const isDrawingTool = activeTool === 'line' || activeTool === 'polyline' || activeTool === 'polygon'Â·\n      || activeTool === 'rectangle' || activeTool === 'circle'; // âœ… Removed 'arc' - not in ToolType unionÂ·Â·Â·\n    if (isDrawingTool && drawingHandlersRef.current) {Â·\n      // ðŸ”¥ FIX: Use ONLY dxfCanvasRef for drawing tools (NOT overlayCanvasRef!)Â·\n      // Drawing tools (Line/Circle/Rectangle) draw on DxfCanvasÂ·\n      // Color layers draw on LayerCanvas (overlayCanvasRef)Â·\n      const canvasElement = dxfCanvasRef.current?.getCanvas?.();Â·\n      if (!canvasElement) {Â·\n        return;Â·\n      }Â·Â·Â·\n      const viewport = { width: canvasElement.clientWidth, height: canvasElement.clientHeight };Â·\n      const worldPoint = CoordinateTransforms.screenToWorld(point, transform, viewport);Â·Â·Â·\n      // Call the centralized drawing handler - USE REF!Â·\n      drawingHandlersRef.current.onDrawingPoint(worldPoint);Â·\n      return;Â·\n    }Â·Â·Â·\n    // âœ… OVERLAY MODE: Use legacy overlay system with draftPolygonÂ·\n    if (overlayMode === 'draw') {Â·\n      // ðŸ”§ Use UNIFIED CoordinateTransforms Î³Î¹Î± consistencyÂ·\n      const canvas = dxfCanvasRef.current || overlayCanvasRef.current;Â·\n      if (!canvas) return;Â·Â·Â·\n      const viewport = { width: canvas.clientWidth, height: canvas.clientHeight };Â·\n      const worldPoint = CoordinateTransforms.screenToWorld(point, transform, viewport);Â·\n      const worldPointArray: [number, number] = [worldPoint.x, worldPoint.y];Â·Â·Â·\n      // console.log('ðŸ” Adding point to draft polygon:', {Â·\n      //   screenPoint: point,Â·\n      //   worldPoint,Â·\n      //   currentDraftLength: draftPolygon.lengthÂ·\n      // });Â·Â·Â·\n      setDraftPolygon(prev => {Â·\n        const newPolygon = [...prev, worldPointArray];Â·\n        // console.log('ðŸ” Draft polygon updated:', {Â·\n        //   oldLength: prev.length,Â·\n        //   newLength: newPolygon.length,Â·\n        //   newPolygon: newPolygon.slice(0, 3) // First 3 pointsÂ·\n        // });Â·\n        return newPolygon;Â·\n      });Â·Â·Â·\n      // Close polygon if clicking near first pointÂ·\n      if (draftPolygon.length >= 3) {Â·\n        const firstPoint = draftPolygon[0];Â·\n        const distance = calculateDistance(Â·\n          { x: worldPointArray[0], y: worldPointArray[1] },Â·\n          { x: firstPoint[0], y: firstPoint[1] }Â·\n        );Â·Â·Â·\n        // console.log('ðŸ” Checking polygon close:', {Â·\n        //   distance,Â·\n        //   threshold: 20 / transform.scale,Â·\n        //   shouldClose: distance < (20 / transform.scale)Â·\n        // });Â·Â·Â·\n        if (distance < (20 / transform.scale)) { // Close threshold adjusted for scaleÂ·\n          // console.log('ðŸ” Closing polygon - finishing drawing');Â·\n          finishDrawing();Â·\n          return;Â·\n        }Â·\n      }Â·\n    } else {Â·\n      // Clicked on empty space - deselectÂ·\n      // console.log('ðŸ” Deselecting overlay (clicked empty space)');Â·\n      handleOverlaySelect(null);Â·\n    }Â·\n  };Â·Â·Â·\n  const finishDrawing = async () => {Â·\n    // Debug disabled to prevent console spamÂ·Â·Â·\n    if (draftPolygon.length >= 3 && levelManager.currentLevelId) {Â·\n      try {Â·\n        const newOverlay = await overlayStore.add({Â·\n          levelId: levelManager.currentLevelId,Â·\n          kind: currentKind,Â·\n          polygon: draftPolygon,Â·\n          status: currentStatus,Â·\n          label: `Overlay ${Date.now()}`, // Temporary labelÂ·\n        });Â·Â·Â·\n        // console.log('ðŸ” New Overlay Created:', newOverlay);Â·Â·Â·\n      } catch (error) {Â·\n        console.error('Failed to create overlay:', error);Â·\n      }Â·\n    }Â·\n    setDraftPolygon([]);Â·\n  };Â·Â·Â·\n  // Handle fit-to-view event from useCanvasOperations fallbackÂ·\n  React.useEffect(() => {Â·\n    const handleFitToView = (e: CustomEvent) => {Â·\n      // ðŸš€ USE COMBINED BOUNDS - DXF + overlaysÂ·\n      // ðŸ¢ FIX (2026-01-04): forceRecalculate=true includes dynamically drawn entitiesÂ·\n      const combinedBounds = createCombinedBounds(dxfScene, colorLayers, true);Â·Â·Â·\n      if (combinedBounds) {Â·\n        const viewport = e.detail?.viewport || { width: 800, height: 600 };Â·Â·Â·\n        try {Â·\n          // ðŸŽ¯ ENTERPRISE: alignToOrigin = true â†’ (0,0) at axis intersection (bottom-left)Â·\n          const zoomResult = zoomSystem.zoomToFit(combinedBounds, viewport, true);Â·Â·Â·\n          // ðŸ”¥ ÎšÎ¡Î™Î£Î™ÎœÎŸ: Î•Ï†Î±ÏÎ¼Î¿Î³Î® Ï„Î¿Ï… Î½Î­Î¿Ï… transform Î¼Îµ null checks + NaN guardsÂ·\n          if (zoomResult && zoomResult.transform) {Â·\n            const { scale, offsetX, offsetY } = zoomResult.transform;Â·Â·Â·\n            // ðŸ›¡ï¸ GUARD: Check for NaN values before applying transformÂ·\n            if (isNaN(scale) || isNaN(offsetX) || isNaN(offsetY)) {Â·\n              console.error('ðŸš¨ Shift+1 failed: Invalid transform (NaN values)');Â·\n              return;Â·\n            }Â·Â·Â·\n            setTransform(zoomResult.transform);Â·\n          }Â·\n        } catch (error) {Â·\n          console.error('ðŸš¨ Shift+1 failed:', error);Â·\n        }Â·\n      }Â·\n    };Â·Â·Â·\n    document.addEventListener('canvas-fit-to-view', handleFitToView as EventListener);Â·\n    return () => document.removeEventListener('canvas-fit-to-view', handleFitToView as EventListener);Â·\n  }, [dxfScene, colorLayers, zoomSystem]); // ðŸš€ Include colorLayers Î³Î¹Î± combined boundsÂ·Â·Â·\n  // Handle keyboard shortcuts for drawing and zoomÂ·\n  React.useEffect(() => {Â·\n    const handleKeyDown = (e: KeyboardEvent) => {Â·\n      // Prevent shortcuts when typing in inputsÂ·\n      const target = e.target as HTMLElement;Â·\n      if (target.tagName === 'INPUT' || target.tagName === 'TEXTAREA' || target.contentEditable === 'true') {Â·\n        return;Â·\n      }Â·Â·Â·\n      // âœ… ÎšÎ•ÎÎ¤Î¡Î™ÎšÎŸÎ ÎŸÎ™Î—Î£Î—: Zoom shortcuts Î¼ÎµÏ„Î±ÎºÏŒÎ¼Î¹ÏƒÎ±Î½ ÏƒÏ„Î¿ hooks/useKeyboardShortcuts.tsÂ·\n      // Î•Î´ÏŽ ÎºÏÎ±Ï„Î¬Î¼Îµ ÎœÎŸÎÎŸ local shortcuts Î³Î¹Î± drawing mode (Escape, Enter)Â·Â·Â·\n      switch (e.key) {Â·\n        case 'Escape':Â·\n          setDraftPolygon([]);Â·\n          break;Â·\n        case 'Enter':Â·\n          if (draftPolygon.length >= 3) {Â·\n            finishDrawing();Â·\n          }Â·\n          break;Â·\n      }Â·\n    };Â·Â·Â·\n    window.addEventListener('keydown', handleKeyDown);Â·\n    return () => window.removeEventListener('keydown', handleKeyDown);Â·\n  }, [draftPolygon, finishDrawing]);Â·Â·Â·Â·Â·\n  // âŒ REMOVED: Duplicate zoom handlers - now using centralized zoomSystem.handleKeyboardZoom()Â·\n  // All keyboard zoom is handled through the unified system in the keyboard event handler aboveÂ·Â·Â·\n  return (Â·\n    <>Â·\n      {/* Left Sidebar - REMOVED - FloatingPanelContainer handles this */}Â·Â·Â·\n      {/* Main Canvas Area */}Â·\n      {/* â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—Â·\n          â•‘ âš ï¸ CRITICAL FIX (2026-01-03) - Canvas container backgrounds           â•‘Â·\n          â•‘ ÎœÎ—Î Î Î¡ÎŸÎ£Î˜Î•Î¤Î•Î¤Î• bg-muted Î® PANEL_COLORS.BG_SECONDARY ÎµÎ´ÏŽ!              â•‘Â·\n          â•‘ Î‘Ï…Ï„Î¬ Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î¿ÏÎ½ \\\"Ï€Î­Ï€Î»Î¿\\\" Ï€Î¿Ï… ÎºÎ±Î»ÏÏ€Ï„ÎµÎ¹ Ï„Î± Ï‡ÏÏŽÎ¼Î±Ï„Î± DXF Î¿Î½Ï„Î¿Ï„Î®Ï„Ï‰Î½.       â•‘Â·\n          â•‘ Î¤Î¿ transparent background ÎµÏ€Î¹Ï„ÏÎ­Ï€ÎµÎ¹ ÏƒÏ‰ÏƒÏ„Î® Î±Ï€ÎµÎ¹ÎºÏŒÎ½Î¹ÏƒÎ· canvas.          â•‘Â·\n          â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */}Â·\n      <div className=\\\"flex-1 relative\\\">Â·\n        {/* DEBUG BUTTONS MOVED TO HEADER */}Â·Â·Â·\n        <divÂ·\n          className={`canvas-stack relative w-full h-full ${PANEL_LAYOUT.OVERFLOW.HIDDEN}`}Â·\n          style={{ cursor: 'none' }} // âœ… ADR-008 CAD-GRADE: ALWAYS hide CSS cursor - crosshair is the only cursorÂ·\n        >Â·\n          {/* ðŸ¢ PDF BACKGROUND: Lowest layer in canvas stack (z-[-10]) */}Â·\n          <PdfBackgroundCanvasÂ·\n            imageUrl={pdfImageUrl}Â·\n            pdfTransform={pdfTransform}Â·\n            canvasTransform={transform}Â·\n            viewport={viewport}Â·\n            enabled={pdfEnabled}Â·\n            opacity={pdfOpacity}Â·\n          />Â·Â·Â·\n          {/* ðŸ”º CANVAS V2: Layer Canvas - Background Overlays (Semi-transparent colored layers) */}Â·\n          {showLayerCanvas && (Â·\n            <LayerCanvasÂ·\n              ref={overlayCanvasRef}Â·\n              layers={colorLayers}Â·\n              transform={transform}Â·\n              viewport={viewport} // âœ… CENTRALIZED: Pass centralized viewportÂ·\n              activeTool={activeTool} // ðŸ”¥ ÎšÎ¡Î™Î£Î™ÎœÎŸ: Pass activeTool Î³Î¹Î± pan cursorÂ·\n              layersVisible={showLayers} // âœ… Î¥Î Î‘Î¡Î§ÎŸÎ SYSTEM: Existing layer visibilityÂ·\n              dxfScene={dxfScene} // ðŸŽ¯ SNAP FIX: Pass DXF scene for snap engine initializationÂ·\n              enableUnifiedCanvas={true} // âœ… Î•ÎÎ•Î¡Î“ÎŸÎ ÎŸÎ™Î—Î£Î—: Unified event system Î³Î¹Î± debuggingÂ·\n              data-canvas-type=\\\"layer\\\" // ðŸŽ¯ DEBUG: Identifier Î³Î¹Î± alignment testÂ·\n              onTransformChange={(newTransform) => {Â·\n                setTransform(newTransform); // âœ… SYNC: ÎšÎ¿Î¹Î½ÏŒ transform state Î³Î¹Î± LayerCanvasÂ·\n                zoomSystem.setTransform(newTransform);Â·\n              }}Â·\n              onWheelZoom={zoomSystem.handleWheelZoom} // âœ… CONNECT ZOOM SYSTEMÂ·\n              crosshairSettings={crosshairSettings} // Crosshair Î¼ÏŒÎ½Î¿ Î³Î¹Î± layersÂ·\n              cursorSettings={cursorCanvasSettings}Â·\n              snapSettings={snapSettings}Â·\n              gridSettings={{ ...gridSettings, enabled: false }} // ðŸ”§ FIX: Disable grid in LayerCanvas (now in DxfCanvas)Â·\n              rulerSettings={{ ...rulerSettings, enabled: false }} // ðŸ”§ FIX: Disable rulers in LayerCanvas (now in DxfCanvas)Â·\n              selectionSettings={selectionSettings}Â·\n              onLayerClick={handleOverlayClick}Â·\n              onCanvasClick={handleCanvasClick}Â·\n              onMouseMove={(point) => {Â·\n                setMouseCss(point);Â·\n                setMouseWorld(point); // TODO: Transform CSS to world coordinatesÂ·\n                // âœ… Î”Î™ÎŸÎ¡Î˜Î©Î£Î—: ÎšÎ±Î»ÏŽ ÎºÎ±Î¹ Ï„Î¿ props.onMouseMove Î³Î¹Î± cursor-centered zoomÂ·\n                if (props.onMouseMove) {Â·\n                  // ðŸŽ¯ TYPE-SAFE: Create proper mock event (event not available in this context)Â·\n                  const mockEvent = {Â·\n                    clientX: point.x,Â·\n                    clientY: point.y,Â·\n                    preventDefault: () => {},Â·\n                    stopPropagation: () => {}Â·\n                  } as React.MouseEvent;Â·\n                  props.onMouseMove(point, mockEvent);Â·\n                }Â·\n              }}Â·\n              className={`absolute ${PANEL_LAYOUT.INSET['0']} w-full h-full ${PANEL_LAYOUT.Z_INDEX['0']}`} // ðŸŽ¯ Z-INDEX FIX: LayerCanvas BACKGROUND (z-0)Â·\n              style={canvasUI.positioning.layers.layerCanvasWithTools(activeTool, crosshairSettings.enabled)}Â·\n            />Â·\n          )}Â·Â·Â·\n          {/* ðŸ”º CANVAS V2: DXF Canvas - Foreground DXF Drawing (Over colored layers) */}Â·\n          {showDxfCanvas && (Â·\n            <DxfCanvasÂ·\n              ref={dxfCanvasRef}Â·\n              scene={dxfScene}Â·\n              transform={transform}Â·\n              viewport={viewport} // âœ… CENTRALIZED: Pass centralized viewportÂ·\n              activeTool={activeTool} // ðŸ”¥ ÎšÎ¡Î™Î£Î™ÎœÎŸ: Pass activeTool Î³Î¹Î± pan cursorÂ·\n              colorLayers={colorLayers} // âœ… FIX: Pass color layers Î³Î¹Î± fit to view boundsÂ·\n              crosshairSettings={crosshairSettings} // âœ… RESTORED: Crosshair enabledÂ·\n              gridSettings={gridSettings} // âœ… RESTORED: Grid enabledÂ·\n              rulerSettings={{Â·\n                // ðŸ›¡ï¸ NULL GUARD: Ensure rulers are always enabled, even if context is temporarily undefinedÂ·\n                enabled: (globalRulerSettings?.horizontal?.enabled && globalRulerSettings?.vertical?.enabled) ?? true,Â·\n                visible: true,Â·\n                opacity: 1.0,Â·\n                unit: globalRulerSettings.units as 'mm' | 'cm' | 'm',Â·\n                color: globalRulerSettings.horizontal.color,Â·\n                backgroundColor: globalRulerSettings.horizontal.backgroundColor,Â·\n                fontSize: globalRulerSettings.horizontal.fontSize,Â·\n                textColor: globalRulerSettings.horizontal.textColor,Â·\n                height: 30,Â·\n                width: 30,Â·\n                showLabels: globalRulerSettings.horizontal.showLabels,Â·\n                showUnits: globalRulerSettings.horizontal.showUnits,Â·\n                showBackground: globalRulerSettings.horizontal.showBackground,Â·\n                showMajorTicks: globalRulerSettings.horizontal.showMajorTicks,Â·\n                showMinorTicks: true,Â·\n                majorTickColor: globalRulerSettings.horizontal.color,Â·\n                minorTickColor: UI_COLORS.BUTTON_SECONDARY,Â·\n                majorTickLength: 10,Â·\n                minorTickLength: 5,Â·\n                tickInterval: gridSettings.size * gridMajorInterval, // âœ… SYNC WITH GRID: Use major grid interval!Â·\n                unitsFontSize: 10,Â·\n                unitsColor: globalRulerSettings.horizontal.textColor,Â·\n                labelPrecision: 1,Â·\n                borderColor: globalRulerSettings.horizontal.color,Â·\n                borderWidth: 1Â·\n              }}Â·\n              data-canvas-type=\\\"dxf\\\" // ðŸŽ¯ DEBUG: Identifier Î³Î¹Î± alignment testÂ·\n              className={`absolute ${PANEL_LAYOUT.INSET['0']} w-full h-full ${PANEL_LAYOUT.Z_INDEX['10']}`} // ðŸŽ¯ Z-INDEX FIX: DxfCanvas FOREGROUND (z-10) - Î Î‘ÎÎ© Î±Ï€ÏŒ LayerCanvas!Â·\n              onCanvasClick={handleCanvasClick} // ðŸŽ¯ FIX: Connect canvas clicks Î³Î¹Î± drawing tools!Â·\n              onTransformChange={(newTransform) => {Â·\n                setTransform(newTransform); // âœ… SYNC: ÎšÎ¿Î¹Î½ÏŒ transform state Î³Î¹Î± DxfCanvasÂ·\n                zoomSystem.setTransform(newTransform);Â·\n              }}Â·\n              onWheelZoom={zoomSystem.handleWheelZoom} // âœ… CONNECT ZOOM SYSTEMÂ·\n              onMouseMove={(screenPos, worldPos) => {Â·\n                // âœ… Î”Î™ÎŸÎ¡Î˜Î©Î£Î—: Î ÎµÏÎ½Î¬Ï‰ Ï„Î¿ worldPos ÏƒÏ„Î¿ props.onMouseMove Î³Î¹Î± cursor-centered zoomÂ·\n                // Note: event is not available in this context, so we create a minimal mock eventÂ·\n                if (props.onMouseMove && worldPos) {Â·\n                  const mockEvent = {Â·\n                    clientX: screenPos.x,Â·\n                    clientY: screenPos.y,Â·\n                    preventDefault: () => {},Â·\n                    stopPropagation: () => {}Â·\n                  } as React.MouseEvent;Â·\n                  props.onMouseMove(worldPos, mockEvent);Â·\n                }Â·Â·Â·\n                // âœ… ADR-006 FIX: Update mouseCss/mouseWorld Î³Î¹Î± CrosshairOverlayÂ·\n                setMouseCss(screenPos);Â·\n                setMouseWorld(worldPos);Â·Â·Â·\n                // ðŸŽ¯ FIX: Call onDrawingHover Î³Î¹Î± preview phase renderingÂ·\n                const isDrawingTool = activeTool === 'line' || activeTool === 'polyline' || activeTool === 'polygon'Â·\n                  || activeTool === 'rectangle' || activeTool === 'circle';Â·Â·Â·\n                if (isDrawingTool && worldPos && drawingHandlersRef.current?.onDrawingHover) {Â·\n                  drawingHandlersRef.current.onDrawingHover(worldPos);Â·\n                }Â·\n              }}Â·\n            />Â·\n          )}Â·Â·Â·\n          {/* âœ… ADR-008: CrosshairOverlay - INTERNAL mouse tracking for pixel-perfect alignment */}Â·\n          {/* ðŸ¢ CAD-GRADE: CrosshairOverlay tracks mouse position internally AND gets size from layout */}Â·\n          <CrosshairOverlayÂ·\n            isActive={crosshairSettings.enabled}Â·\n            // âœ… ADR-008: REMOVED viewport prop - canvas gets actual size from layout via ResizeObserverÂ·\n            rulerMargins={{Â·\n              left: rulerSettings.width ?? 30,Â·\n              top: 0,Â·\n              bottom: 0Â·\n            }}Â·\n            className={`absolute ${PANEL_LAYOUT.POSITION.LEFT_0} ${PANEL_LAYOUT.POSITION.RIGHT_0} ${PANEL_LAYOUT.POSITION.TOP_0} ${PANEL_LAYOUT.Z_INDEX['20']} ${PANEL_LAYOUT.POINTER_EVENTS.NONE}`}Â·\n            style={{ height: `calc(100% - ${rulerSettings.height ?? 30}px)` }}Â·\n          />Â·Â·Â·\n          {/* ðŸŽ¯ SNAP INDICATOR: Visual feedback for snap points (AutoCAD/MicroStation style)Â·\n              @see docs/features/snapping/SNAP_INDICATOR_LINE.md - Î’Î®Î¼Î± 5: ÎšÎ»Î¹Îº ÎºÎ±Î¹ Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î± Î½Î­Î±Ï‚ Î³ÏÎ±Î¼Î¼Î®Ï‚ */}Â·\n          <SnapIndicatorOverlayÂ·\n            snapResult={currentSnapResult ? {Â·\n              point: currentSnapResult.snappedPoint,Â·\n              type: currentSnapResult.activeMode || 'endpoint'Â·\n            } : null}Â·\n            viewport={viewport}Â·\n            canvasRect={dxfCanvasRef.current?.getCanvas?.()?.getBoundingClientRect() ?? null}Â·\n            transform={transform}Â·\n            className={`absolute ${PANEL_LAYOUT.INSET['0']} ${PANEL_LAYOUT.POINTER_EVENTS.NONE} ${PANEL_LAYOUT.Z_INDEX['30']}`}Â·\n          />Â·Â·Â·\n          {/* âœ… ADR-009: RulerCornerBox - Interactive corner box at ruler intersection */}Â·\n          {/* ðŸ¢ CAD-GRADE: Industry standard (AutoCAD/Revit/Blender) corner box with zoom controls */}Â·\n          <RulerCornerBoxÂ·\n            rulerWidth={rulerSettings.width ?? 30}Â·\n            rulerHeight={rulerSettings.height ?? 30}Â·\n            currentScale={transform.scale}Â·\n            backgroundColor={globalRulerSettings.horizontal.backgroundColor}Â·\n            textColor={globalRulerSettings.horizontal.textColor}Â·\n            onZoomToFit={() => {Â·\n              // âœ… ÎšÎ•ÎÎ¤Î¡Î™ÎšÎŸÎ ÎŸÎ™Î—Î£Î—: Use existing createCombinedBounds for unified boundsÂ·\n              // ðŸ¢ FIX (2026-01-04): forceRecalculate=true includes dynamically drawn entitiesÂ·\n              const combinedBounds = createCombinedBounds(dxfScene, colorLayers, true);Â·Â·Â·\n              // ðŸ” DEBUG: Log bounds and entities (remove after fixing)Â·\n              console.log('ðŸŽ¯ [ZoomToFit] dxfScene entities:', dxfScene?.entities?.length, dxfScene?.entities);Â·\n              console.log('ðŸŽ¯ [ZoomToFit] combinedBounds:', combinedBounds);Â·\n              console.log('ðŸŽ¯ [ZoomToFit] viewport:', viewport);Â·Â·Â·\n              if (combinedBounds && viewport.width > 0 && viewport.height > 0) {Â·\n                const result = zoomSystem.zoomToFit(combinedBounds, viewport, true);Â·\n                console.log('ðŸŽ¯ [ZoomToFit] result:', result);Â·\n              } else {Â·\n                console.warn('ðŸš¨ [ZoomToFit] Invalid bounds or viewport!', { combinedBounds, viewport });Â·\n              }Â·\n            }}Â·\n            onZoom100={() => zoomSystem.zoomTo100()}Â·\n            onZoomIn={() => zoomSystem.zoomIn()}Â·\n            onZoomOut={() => zoomSystem.zoomOut()}Â·\n            onZoomPrevious={() => zoomSystem.zoomPrevious()}Â·\n            onZoomToScale={(scale) => zoomSystem.zoomToScale(scale)}Â·\n            onWheelZoom={(delta) => {Â·\n              // Convert delta to zoom direction and use cursor-centered zoomÂ·\n              if (mouseCss) {Â·\n                zoomSystem.handleWheelZoom(delta, mouseCss);Â·\n              }Â·\n            }}Â·\n            viewport={viewport}Â·\n            className={PANEL_LAYOUT.Z_INDEX['30']}Â·\n          />Â·\n        </div>Â·\n      </div>Â·Â·Â·Â·Â·\n      {/* Right Sidebar - MOVED TO DxfViewerContent */}Â·\n    </>Â·\n  );Â·\n};Â·\n\"","pass":false}}],"failureMessages":["Error: expect(received).toContain(expected) // indexOf\n\nExpected substring: \"drawingHandlers.state.previewEntity\"\nReceived string:    \"'use client';Â·\nimport React, { useRef, useState } from 'react';Â·\n// === CANVAS V2 IMPORTS ===Â·\nimport { DxfCanvas, LayerCanvas, type ColorLayer, type SnapSettings, type GridSettings, type RulerSettings, type SelectionSettings, type DxfScene, type DxfEntityUnion } from '../../canvas-v2';Â·\nimport { createCombinedBounds } from '../../systems/zoom/utils/bounds';Â·\nimport type { CrosshairSettings } from '../../rendering/ui/crosshair/CrosshairTypes';Â·\n// âœ… CURSOR SETTINGS: Import Î±Ï€ÏŒ ÎºÎµÎ½Ï„ÏÎ¹ÎºÏŒ system Î±Î½Ï„Î¯ Î³Î¹Î± duplicateÂ·\nimport type { CursorSettings } from '../../systems/cursor/config';Â·\nimport { useCanvasOperations } from '../../hooks/interfaces/useCanvasOperations';Â·\nimport { useCanvasContext } from '../../contexts/CanvasContext';Â·\nimport { useDrawingHandlers } from '../../hooks/drawing/useDrawingHandlers';Â·\nimport { UI_COLORS } from '../../config/color-config';Â·\n// CanvasProvider removed - not needed for Canvas V2Â·\n// OverlayCanvas import removed - it was dead codeÂ·\nimport { FloatingPanelContainer } from '../../ui/FloatingPanelContainer';Â·\nimport { OverlayList } from '../../ui/OverlayList';Â·\nimport { OverlayProperties } from '../../ui/OverlayProperties';Â·\nimport { useOverlayStore } from '../../overlays/overlay-store';Â·\nimport { useLevels } from '../../systems/levels';Â·\nimport { useRulersGridContext } from '../../systems/rulers-grid/RulersGridSystem';Â·\nimport { useCursorSettings } from '../../systems/cursor';Â·\nimport { globalRulerStore } from '../../settings-provider';Â·\nimport type { DXFViewerLayoutProps } from '../../integration/types';Â·\nimport type { OverlayEditorMode, Status, OverlayKind } from '../../overlays/types';Â·\nimport { getStatusColors } from '../../config/color-mapping';Â·\nimport { createOverlayHandlers } from '../../overlays/types';Â·\nimport { calculateDistance } from '../../rendering/entities/shared/geometry-rendering-utils';Â·\nimport type { ViewTransform, Point2D } from '../../rendering/types/Types';Â·\nimport { useZoom } from '../../systems/zoom';Â·\nimport { CoordinateTransforms } from '../../rendering/core/CoordinateTransforms';Â·\n// âœ… ENTERPRISE MIGRATION: Using ServiceRegistryÂ·\nimport { serviceRegistry } from '../../services';Â·\n// âœ… ADR-006 FIX: Import CrosshairOverlay Î³Î¹Î± crosshair renderingÂ·\nimport CrosshairOverlay from '../../canvas-v2/overlays/CrosshairOverlay';Â·\n// âœ… ADR-009: Import RulerCornerBox for interactive corner box (AutoCAD/Revit standard)Â·\nimport RulerCornerBox from '../../canvas-v2/overlays/RulerCornerBox';Â·\n// ðŸŽ¯ SNAP INDICATOR: Import for visual snap feedbackÂ·\nimport SnapIndicatorOverlay from '../../canvas-v2/overlays/SnapIndicatorOverlay';Â·\nimport { useSnapContext } from '../../snapping/context/SnapContext';Â·\n// Enterprise Canvas UI Migration - Phase BÂ·\nimport { canvasUI } from '@/styles/design-tokens/canvas';Â·\n// ðŸ¢ ENTERPRISE: Centralized spacing tokens (ADR-013)Â·\nimport { PANEL_LAYOUT } from '../../config/panel-tokens';Â·\n// ðŸ¢ PDF BACKGROUND: Enterprise PDF background systemÂ·\nimport { PdfBackgroundCanvas, usePdfBackgroundStore } from '../../pdf-background';Â·Â·Â·\n/**Â·\n * Renders the main canvas area, including the renderer and floating panels.Â·\n */Â·\nexport const CanvasSection: React.FC<DXFViewerLayoutProps & { overlayMode: OverlayEditorMode, currentStatus: Status, currentKind: OverlayKind }> = (props) => {Â·\n  // âœ… FIX: Use DxfCanvasRef type Î³Î¹Î± getCanvas() method accessÂ·\n  const dxfCanvasRef = useRef<any>(null); // DxfCanvasRef type (Î¼Îµ getCanvas() method)Â·\n  const overlayCanvasRef = useRef<HTMLCanvasElement>(null);Â·Â·Â·\n  // === NEW ZOOM SYSTEM ===Â·\n  const initialTransform: ViewTransform = { scale: 1, offsetX: 0, offsetY: 0 };Â·\n  const [transform, setTransform] = useState<ViewTransform>(initialTransform);Â·Â·Â·\n  // âœ… CENTRALIZED VIEWPORT: Single source of truth Î³Î¹Î± viewport dimensionsÂ·\n  const [viewport, setViewport] = useState<{ width: number; height: number }>({ width: 0, height: 0 });Â·Â·Â·\n  const zoomSystem = useZoom({Â·\n    initialTransform,Â·\n    onTransformChange: (newTransform) => {Â·\n      setTransform(newTransform); // âœ… SYNC WITH STATEÂ·\n    },Â·\n    // ðŸ¢ ENTERPRISE: Inject viewport Î³Î¹Î± accurate zoom-to-cursorÂ·\n    viewportÂ·\n  });Â·\n  const [canvasRect, setCanvasRect] = useState<DOMRect | null>(null);Â·\n  const [mouseCss, setMouseCss] = useState<Point2D | null>(null);Â·\n  const [mouseWorld, setMouseWorld] = useState<Point2D | null>(null);Â·Â·Â·\n  // ðŸŽ¯ Canvas visibility Î±Ï€ÏŒ parent props (Î¼Îµ fallback ÏƒÏ„Î± defaults)Â·\n  const showDxfCanvas = props.dxfCanvasVisible ?? true;Â·\n  const showLayerCanvasDebug = props.layerCanvasVisible ?? true;Â·Â·Â·Â·Â·\n  const overlayStore = useOverlayStore();Â·\n  const levelManager = useLevels();Â·\n  const [draftPolygon, setDraftPolygon] = useState<Array<[number, number]>>([]);Â·Â·Â·\n  // ðŸ¢ ENTERPRISE: Provide zoom system to contextÂ·\n  const canvasContext = useCanvasContext();Â·\n  // ðŸŽ¯ SNAP INDICATOR: Get current snap result for visual feedbackÂ·\n  const { currentSnapResult } = useSnapContext();Â·\n  // ðŸ¢ PDF BACKGROUND: Get PDF background state and setViewport actionÂ·\n  const {Â·\n    enabled: pdfEnabled,Â·\n    opacity: pdfOpacity,Â·\n    transform: pdfTransform,Â·\n    renderedImageUrl: pdfImageUrl,Â·\n    setViewport: setPdfViewport,Â·\n  } = usePdfBackgroundStore();Â·\n  // âœ… CENTRALIZED VIEWPORT: Update viewport Î±Ï€ÏŒ canvas dimensionsÂ·\n  // ðŸ¢ FIX (2026-01-04): Use ResizeObserver for reliable viewport trackingÂ·\n  React.useEffect(() => {Â·\n    let resizeObserver: ResizeObserver | null = null;Â·Â·Â·\n    const updateViewport = () => {Â·\n      // ðŸ¢ FIX: dxfCanvasRef.current is NOT HTMLCanvasElement - it has getCanvas() method!Â·\n      // Try to get the actual canvas element from DxfCanvas component refÂ·\n      const dxfCanvas = dxfCanvasRef.current?.getCanvas?.();Â·\n      const layerCanvas = overlayCanvasRef.current;Â·Â·Â·\n      // Use DxfCanvas as primary (has the actual canvas element)Â·\n      const canvas = dxfCanvas || layerCanvas;Â·Â·Â·\n      if (canvas && canvas instanceof HTMLCanvasElement) {Â·\n        const rect = canvas.getBoundingClientRect();Â·\n        // Only update if dimensions are valid (not 0x0)Â·\n        if (rect.width > 0 && rect.height > 0) {Â·\n          setViewport({ width: rect.width, height: rect.height });Â·\n          // ðŸ¢ PDF BACKGROUND: Sync viewport to PDF store for fit-to-viewÂ·\n          setPdfViewport({ width: rect.width, height: rect.height });Â·\n          console.log('âœ… [Viewport] Updated:', rect.width, 'x', rect.height);Â·\n        }Â·\n      }Â·\n    };Â·Â·Â·\n    // ðŸ¢ ENTERPRISE: Use ResizeObserver for precise dimension trackingÂ·\n    const setupObserver = () => {Â·\n      const dxfCanvas = dxfCanvasRef.current?.getCanvas?.();Â·\n      const layerCanvas = overlayCanvasRef.current;Â·\n      const canvas = dxfCanvas || layerCanvas;Â·Â·Â·\n      if (canvas && canvas instanceof HTMLCanvasElement) {Â·\n        resizeObserver = new ResizeObserver((entries) => {Â·\n          for (const entry of entries) {Â·\n            const { width, height } = entry.contentRect;Â·\n            if (width > 0 && height > 0) {Â·\n              setViewport({ width, height });Â·\n              // ðŸ¢ PDF BACKGROUND: Sync viewport to PDF store for fit-to-viewÂ·\n              setPdfViewport({ width, height });Â·\n            }Â·\n          }Â·\n        });Â·\n        resizeObserver.observe(canvas);Â·Â·Â·\n        // Initial updateÂ·\n        updateViewport();Â·\n      }Â·\n    };Â·Â·Â·\n    // ðŸ¢ ENTERPRISE: Retry mechanism for canvas mount timingÂ·\n    let retryCount = 0;Â·\n    const maxRetries = 10;Â·Â·Â·\n    const trySetupObserver = () => {Â·\n      const dxfCanvas = dxfCanvasRef.current?.getCanvas?.();Â·\n      const layerCanvas = overlayCanvasRef.current;Â·Â·Â·\n      if (dxfCanvas || layerCanvas) {Â·\n        setupObserver();Â·\n      } else if (retryCount < maxRetries) {Â·\n        retryCount++;Â·\n        setTimeout(trySetupObserver, PANEL_LAYOUT.TIMING.OBSERVER_RETRY); // Retry every 100msÂ·\n      } else {Â·\n        console.warn('âš ï¸ [Viewport] Canvas not available after', maxRetries, 'retries');Â·\n      }Â·\n    };Â·Â·Â·\n    // Initial setup with delay to ensure canvas is mountedÂ·\n    const timer = setTimeout(trySetupObserver, PANEL_LAYOUT.TIMING.OBSERVER_RETRY);Â·Â·Â·\n    // Fallback: Also listen for window resizeÂ·\n    window.addEventListener('resize', updateViewport);Â·Â·Â·\n    return () => {Â·\n      clearTimeout(timer);Â·\n      window.removeEventListener('resize', updateViewport);Â·\n      if (resizeObserver) {Â·\n        resizeObserver.disconnect();Â·\n      }Â·\n    };Â·\n  }, []); // ðŸ¢ FIX: Empty deps - setup once, ResizeObserver handles updatesÂ·Â·Â·\n  // âœ… AUTO FIT TO VIEW: Trigger existing fit-to-view event after canvas mountÂ·\n  // âš ï¸ DISABLED: Î‘Ï†Î±Î¹ÏÎ­Î¸Î·ÎºÎµ Î³Î¹Î±Ï„Î¯ Ï€ÏÎ¿ÎºÎ±Î»Î¿ÏÏƒÎµ issues Î¼Îµ origin marker visibilityÂ·\n  // ÎŸ Ï‡ÏÎ®ÏƒÏ„Î·Ï‚ Î¼Ï€Î¿ÏÎµÎ¯ Î½Î± Ï€Î±Ï„Î®ÏƒÎµÎ¹ manual \\\"Î•Ï…Î¸Ï…Î³ÏÎ¬Î¼Î¼Î¹ÏƒÎ·\\\" ÏŒÏ„Î±Î½ Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹Â·\n  /*Â·\n  const hasTriggeredAutoFit = React.useRef(false);Â·\n  React.useEffect(() => {Â·\n    // Only trigger ONCE after viewport is readyÂ·\n    if (!hasTriggeredAutoFit.current && viewport.width > 0 && viewport.height > 0) {Â·\n      const timer = setTimeout(() => {Â·\n        console.log('ðŸŽ¯ AUTO FIT TO VIEW: Dispatching canvas-fit-to-view event');Â·\n        // âœ… ZERO DUPLICATES: Î§ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹ÏŽ Ï„Î¿ Î¥Î Î‘Î¡Î§ÎŸÎ event systemÂ·\n        document.dispatchEvent(new CustomEvent('canvas-fit-to-view', {Â·\n          detail: { viewport }Â·\n        }));Â·\n        hasTriggeredAutoFit.current = true; // Mark as triggeredÂ·\n      }, 200); // Small delay to ensure all canvas setup is completeÂ·Â·Â·\n      return () => clearTimeout(timer);Â·\n    }Â·\n  }, [viewport.width, viewport.height]); // âœ… FIX: Only depend on viewport, not colorLayersÂ·\n  */Â·Â·Â·\n  // Get rulers and grid settings from RulersGridSystemÂ·\n  const {Â·\n    state: { grid: gridContextSettings, rulers: rulerContextSettings }Â·\n  } = useRulersGridContext();Â·Â·Â·\n  // ðŸ”§ FIX: React state hook Î³Î¹Î± GlobalRulerStore reactivityÂ·\n  const [globalRulerSettings, setGlobalRulerSettings] = React.useState(globalRulerStore.settings);Â·Â·Â·\n  React.useEffect(() => {Â·\n    const unsubscribe = globalRulerStore.subscribe((newSettings) => {Â·\n      setGlobalRulerSettings(newSettings);Â·\n    });Â·\n    return unsubscribe;Â·\n  }, []);Â·Â·Â·\n  // Get cursor settings from CursorSystemÂ·\n  const { settings: cursorSettings } = useCursorSettings();Â·Â·Â·\n  // ðŸ”º CURSOR SYSTEM INTEGRATION - Î£ÏÎ½Î´ÎµÏƒÎ· Î¼Îµ floating panelÂ·\n  const crosshairSettings: CrosshairSettings = {Â·\n    enabled: cursorSettings.crosshair.enabled,Â·\n    visible: cursorSettings.crosshair.enabled, // visible follows enabled stateÂ·\n    color: cursorSettings.crosshair.color,Â·\n    size: cursorSettings.crosshair.size_percent,Â·\n    opacity: cursorSettings.crosshair.opacity,Â·\n    style: cursorSettings.crosshair.line_style,Â·\n    // Extended properties Î±Ï€ÏŒ CursorSystemÂ·\n    lineWidth: cursorSettings.crosshair.line_width,Â·\n    useCursorGap: cursorSettings.crosshair.use_cursor_gap,Â·\n    centerGapPx: cursorSettings.crosshair.center_gap_px,Â·\n    showCenterDot: true,  // Default: show center dotÂ·\n    centerDotSize: 2      // Default: 2px center dotÂ·\n  };Â·Â·Â·\n  // ðŸ”º CURSOR SETTINGS INTEGRATION - Pass complete cursor settings to LayerCanvasÂ·\n  // LayerCanvas expects the full CursorSettings object from systems/cursor/config.tsÂ·\n  const cursorCanvasSettings: CursorSettings = cursorSettings;Â·Â·Â·\n  const snapSettings: SnapSettings = {Â·\n    enabled: true,Â·\n    types: ['endpoint', 'midpoint', 'center'],Â·\n    tolerance: 10Â·\n  };Â·Â·Â·\n  // Convert RulersGridSystem settings to Canvas V2 formatÂ·\n  const rulerSettings: RulerSettings = {Â·\n    enabled: true, // âœ… FORCE ENABLE RULERSÂ·\n    unit: (rulerContextSettings?.units as 'mm' | 'cm' | 'm') ?? 'mm',Â·\n    color: rulerContextSettings?.horizontal?.color ?? UI_COLORS.WHITE, // âœ… CENTRALIZED WHITE Î³Î¹Î± visibilityÂ·\n    backgroundColor: rulerContextSettings?.horizontal?.backgroundColor ?? UI_COLORS.DARK_BACKGROUND, // âœ… CENTRALIZED DARK BACKGROUND Î³Î¹Î± contrastÂ·\n    fontSize: rulerContextSettings?.horizontal?.fontSize ?? 12,Â·\n    // Extended properties Î±Ï€ÏŒ RulersGridSystemÂ·\n    textColor: rulerContextSettings?.horizontal?.textColor ?? UI_COLORS.WHITE, // âœ… CENTRALIZED WHITE TEXT Î³Î¹Î± visibilityÂ·\n    showLabels: rulerContextSettings?.horizontal?.showLabels ?? true,Â·\n    showUnits: rulerContextSettings?.horizontal?.showUnits ?? true,Â·\n    showBackground: rulerContextSettings?.horizontal?.showBackground ?? true,Â·\n    showMajorTicks: rulerContextSettings?.horizontal?.showMajorTicks ?? true,Â·\n    showMinorTicks: rulerContextSettings?.horizontal?.showMinorTicks ?? true,Â·\n    majorTickColor: rulerContextSettings?.horizontal?.majorTickColor ?? UI_COLORS.WHITE, // âœ… CENTRALIZED WHITE TICKSÂ·\n    minorTickColor: rulerContextSettings?.horizontal?.minorTickColor ?? UI_COLORS.LIGHT_GRAY, // âœ… CENTRALIZED LIGHT GRAY MINOR TICKSÂ·\n    majorTickLength: rulerContextSettings?.horizontal?.majorTickLength ?? 10,Â·\n    minorTickLength: rulerContextSettings?.horizontal?.minorTickLength ?? 5,Â·\n    height: rulerContextSettings?.horizontal?.height ?? 30,Â·\n    width: rulerContextSettings?.vertical?.width ?? 30,Â·\n    position: rulerContextSettings?.horizontal?.position ?? 'bottom',Â·\n    // ðŸ”º MISSING UNITS SETTINGS - Î£ÏÎ½Î´ÎµÏƒÎ· Î¼Îµ floating panelÂ·\n    unitsFontSize: rulerContextSettings?.horizontal?.unitsFontSize ?? 10,Â·\n    unitsColor: rulerContextSettings?.horizontal?.unitsColor ?? UI_COLORS.WHITE // âœ… CENTRALIZED WHITE UNITS TEXTÂ·\n  };Â·Â·Â·\n  const {Â·\n    activeTool,Â·\n    showGrid,Â·\n    showLayers, // âœ… Î¥Î Î‘Î¡Î§ÎŸÎ SYSTEM: Layer visibility Î±Ï€Î¿ useDxfViewerStateÂ·\n    overlayMode = 'select',Â·\n    currentStatus = 'for-sale',Â·\n    currentKind = 'unit',Â·\n    ...restPropsÂ·\n  } = props;Â·Â·Â·\n  // âœ… LAYER VISIBILITY: Show LayerCanvas controlled by debug toggleÂ·\n  const showLayerCanvas = showLayerCanvasDebug; // Debug toggleableÂ·Â·Â·\n  // âœ… CONVERT RulersGridSystem grid settings to Canvas V2 GridSettings formatÂ·\n  // RulersGridSystem uses: gridSettings.visual.colorÂ·\n  // Canvas GridRenderer uses: gridSettings.colorÂ·\n  const gridSettings: GridSettings = {Â·\n    // Enabled state: Î Î¡Î©Î¤Î‘ Î±Ï€ÏŒ panel, Î¼ÎµÏ„Î¬ toolbar fallback, Ï„Î­Î»Î¿Ï‚ Î Î‘ÎÎ¤Î‘ true Î³Î¹Î± stabilityÂ·\n    // ðŸ›¡ï¸ NULL GUARD: Ensure grid is always enabled, even if context is temporarily undefined during re-rendersÂ·\n    enabled: gridContextSettings?.visual?.enabled ?? showGrid ?? true,Â·\n    visible: gridContextSettings?.visual?.enabled ?? true, // âœ… VISIBILITY: Controls grid renderingÂ·Â·Â·\n    // âœ… SIZE: Î‘Ï€ÏŒ panel settingsÂ·\n    size: gridContextSettings?.visual?.step ?? 10,Â·Â·Â·\n    // âœ… COLORS: Î‘Ï€ÏŒ panel settings (NOT hardcoded!)Â·\n    color: gridContextSettings?.visual?.color ?? UI_COLORS.BLUE_DEFAULT, // CENTRALIZED default blue Î±Ï€ÏŒ panelÂ·\n    majorGridColor: gridContextSettings?.visual?.majorGridColor ?? UI_COLORS.MEDIUM_GRAY,Â·\n    minorGridColor: gridContextSettings?.visual?.minorGridColor ?? UI_COLORS.LIGHT_GRAY_ALT,Â·Â·Â·\n    // âœ… OPACITY: Î‘Ï€ÏŒ panel settingsÂ·\n    opacity: gridContextSettings?.visual?.opacity ?? 0.6,Â·Â·Â·\n    // âœ… LINE WIDTHS: Î‘Ï€ÏŒ panel settingsÂ·\n    lineWidth: gridContextSettings?.visual?.minorGridWeight ?? 0.5,Â·\n    majorGridWeight: gridContextSettings?.visual?.majorGridWeight ?? 1,Â·\n    minorGridWeight: gridContextSettings?.visual?.minorGridWeight ?? 0.5,Â·Â·Â·\n    // âœ… GRID STYLE: Î‘Ï€ÏŒ panel settings (lines/dots/crosses)Â·\n    style: gridContextSettings?.visual?.style ?? 'lines',Â·\n    majorInterval: gridContextSettings?.visual?.subDivisions ?? 5, // Extended property for grid subdivisionsÂ·\n    showMajorGrid: true,Â·\n    showMinorGrid: true,Â·\n    adaptiveOpacity: false, // âŒ DISABLE Î³Î¹Î± Î½Î± Ï†Î±Î¯Î½ÎµÏ„Î±Î¹ Ï€Î¬Î½Ï„Î±Â·\n    minVisibleSize: 0 // âœ… ALWAYS SHOW regardless of zoomÂ·\n  };Â·Â·Â·\n  // ðŸ”§ Grid major interval for ruler tick calculationsÂ·\n  const gridMajorInterval = gridContextSettings?.visual?.subDivisions ?? 5;Â·Â·Â·\n  // ðŸ”º SELECTION SETTINGS INTEGRATION - Î£ÏÎ½Î´ÎµÏƒÎ· selection boxes Î¼Îµ floating panelÂ·\n  const selectionSettings: SelectionSettings = {Â·\n    window: {Â·\n      fillColor: cursorSettings.selection.window.fillColor,Â·\n      fillOpacity: cursorSettings.selection.window.fillOpacity,Â·\n      borderColor: cursorSettings.selection.window.borderColor,Â·\n      borderOpacity: cursorSettings.selection.window.borderOpacity,Â·\n      borderStyle: cursorSettings.selection.window.borderStyle,Â·\n      borderWidth: cursorSettings.selection.window.borderWidthÂ·\n    },Â·\n    crossing: {Â·\n      fillColor: cursorSettings.selection.crossing.fillColor,Â·\n      fillOpacity: cursorSettings.selection.crossing.fillOpacity,Â·\n      borderColor: cursorSettings.selection.crossing.borderColor,Â·\n      borderOpacity: cursorSettings.selection.crossing.borderOpacity,Â·\n      borderStyle: cursorSettings.selection.crossing.borderStyle,Â·\n      borderWidth: cursorSettings.selection.crossing.borderWidthÂ·\n    }Â·\n  };Â·Â·Â·\n  // Get overlays for current levelÂ·\n  const currentOverlays = levelManager.currentLevelIdÂ·\n    ? overlayStore.getByLevel(levelManager.currentLevelId)Â·\n    : [];Â·Â·Â·\n  const selectedOverlay = overlayStore.getSelectedOverlay();Â·Â·Â·Â·Â·\n  // === CONVERT OVERLAYS TO CANVAS V2 FORMAT ===Â·\n  const convertToColorLayers = (overlays: any[]): ColorLayer[] => {Â·\n    // Simple debug - only log count and first overlay sample (no infinite re-render)Â·\n    if (overlays.length > 0) {Â·\n      // // console.log('ðŸ” Converting overlays:', {Â·\n      //   count: overlays.length,Â·\n      //   sample: { id: overlays[0].id, hasPolygon: !!overlays[0].polygon }Â·\n      // });Â·\n    }Â·Â·Â·\n    return overlaysÂ·\n      .filter(overlay => overlay.polygon && Array.isArray(overlay.polygon) && overlay.polygon.length >= 3)Â·\n      .map((overlay, index) => {Â·\n        const vertices = overlay.polygon.map((point: [number, number]) => ({ x: point[0], y: point[1] }));Â·Â·Â·\n        // Debug Î³Î¹Î± Ï„Î¿ Ï€ÏÏŽÏ„Î¿ overlayÂ·\n        if (index === 0) {Â·\n          // // console.log('ðŸ” convertToColorLayers - First overlay conversion:', {Â·\n          //   overlayId: overlay.id,Â·\n          //   originalPolygon: overlay.polygon.slice(0, 3), // Î¤Î± Ï€ÏÏŽÏ„Î± 3 pointsÂ·\n          //   convertedVertices: vertices.slice(0, 3), // Î¤Î± Ï€ÏÏŽÏ„Î± 3 verticesÂ·\n          //   color: overlay.color || UI_COLORS.OVERLAY_REDÂ·\n          // });Â·\n        }Â·Â·Â·\n        return {Â·\n          id: overlay.id,Â·\n          name: `Layer ${index + 1}`,Â·\n          color: overlay.color || getStatusColors(overlay.status)?.fill || UI_COLORS.BUTTON_PRIMARY,Â·\n          opacity: overlay.opacity || 0.7,  // Slightly transparent so we can see themÂ·\n          visible: overlay.visible !== false,Â·\n          zIndex: index,Â·\n          polygons: [{Â·\n            id: `polygon_${overlay.id}`,Â·\n            vertices,Â·\n            fillColor: overlay.color || getStatusColors(overlay.status)?.fill || UI_COLORS.BUTTON_PRIMARY,  // Use ÎºÎµÎ½Ï„ÏÎ¹ÎºÎ¬ STATUS_COLORSÂ·\n            strokeColor: overlay.selected ? UI_COLORS.SELECTED_RED : UI_COLORS.BLACK,  // Black stroke for visibilityÂ·\n            strokeWidth: overlay.selected ? 3 : 2,  // Thicker strokeÂ·\n            selected: overlay.id === overlayStore.selectedOverlayIdÂ·\n          }]Â·\n        };Â·\n      });Â·\n  };Â·Â·Â·\n  const colorLayers = convertToColorLayers(currentOverlays);Â·Â·Â·\n  // === ðŸŽ¨ DRAWING SYSTEM ===Â·\n  // useDrawingHandlers Î³Î¹Î± DXF entity drawing (Line, Circle, Rectangle, etc.)Â·\n  const drawingHandlers = useDrawingHandlers(Â·\n    activeTool,Â·\n    (entity) => {Â·\n      // Callback ÏŒÏ„Î±Î½ Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î·Î¸ÎµÎ¯ entityÂ·\n      if (props.handleSceneChange && props.currentScene) {Â·\n        // ðŸŽ¯ TYPE-SAFE: Entity is already properly typed from useDrawingHandlersÂ·\n        const updatedScene = {Â·\n          ...props.currentScene,Â·\n          entities: [...(props.currentScene.entities || []), entity]Â·\n        };Â·\n        props.handleSceneChange(updatedScene);Â·\n      }Â·\n    },Â·\n    (tool) => {Â·\n      // Tool change callbackÂ·\n      if (props.onToolChange) {Â·\n        props.onToolChange(tool);Â·\n      }Â·\n    },Â·\n    props.currentScene ?? undefined // âœ… Convert null to undefined for type compatibilityÂ·\n  );Â·Â·Â·\n  // === ðŸŽ¯ DRAWING HANDLERS REF ===Â·\n  // Î§ÏÎ®ÏƒÎ· ref pattern Î³Î¹Î± Î½Î± Î±Ï€Î¿Ï†ÏÎ³Î¿Ï…Î¼Îµ infinite loops (Bug #1 fix)Â·\n  const drawingHandlersRef = React.useRef(drawingHandlers);Â·\n  React.useEffect(() => {Â·\n    drawingHandlersRef.current = drawingHandlers;Â·\n  }, [drawingHandlers]);Â·Â·Â·\n  // === ðŸš€ AUTO-START DRAWING ===Â·\n  // ÎŒÏ„Î±Î½ ÎµÏ€Î¹Î»Î­Î³ÎµÏ„Î±Î¹ drawing tool, Î¾ÎµÎºÎ¹Î½Î¬ Î±Ï…Ï„ÏŒÎ¼Î±Ï„Î± Ï„Î¿ drawing modeÂ·\n  React.useEffect(() => {Â·\n    const isDrawingTool = activeTool === 'line' || activeTool === 'polyline' ||Â·\n                          activeTool === 'polygon' || activeTool === 'circle' ||Â·\n                          activeTool === 'rectangle'; // âœ… Removed 'arc' - not in ToolType unionÂ·\n    if (isDrawingTool && drawingHandlersRef.current?.startDrawing) {Â·\n      // ðŸŽ¯ TYPE-SAFE: activeTool is already narrowed to drawing tools by if statementÂ·\n      drawingHandlersRef.current.startDrawing(activeTool);Â·\n    }Â·\n  }, [activeTool]);Â·Â·Â·\n  // === CONVERT SCENE TO CANVAS V2 FORMAT ===Â·\n  const dxfScene: DxfScene | null = props.currentScene ? {Â·\n    entities: [Â·\n      ...(props.currentScene.entities?.map((entity): DxfEntityUnion | null => {Â·\n        // Get layer color informationÂ·\n        const layerInfo = entity.layer ? props.currentScene?.layers?.[entity.layer] : null;Â·Â·Â·\n        // Convert SceneEntity to DxfEntityUnionÂ·\n        const base = {Â·\n          id: entity.id,Â·\n          layer: entity.layer || 'default',Â·\n          color: String(entity.color || layerInfo?.color || UI_COLORS.WHITE), // âœ… ENTERPRISE FIX: Ensure string typeÂ·\n          lineWidth: entity.lineweight || 1,Â·\n          visible: entity.visible ?? true // âœ… ENTERPRISE FIX: Default to true if undefinedÂ·\n        };Â·Â·Â·\n        switch (entity.type) {Â·\n          case 'line': {Â·\n            // Type guard: Entity Î¼Îµ type 'line' Î­Ï‡ÎµÎ¹ start & endÂ·\n            const lineEntity = entity as typeof entity & { start: Point2D; end: Point2D };Â·\n            return { ...base, type: 'line' as const, start: lineEntity.start, end: lineEntity.end } as DxfEntityUnion;Â·\n          }Â·\n          case 'circle': {Â·\n            // Type guard: Entity Î¼Îµ type 'circle' Î­Ï‡ÎµÎ¹ center & radiusÂ·\n            const circleEntity = entity as typeof entity & { center: Point2D; radius: number };Â·\n            return { ...base, type: 'circle' as const, center: circleEntity.center, radius: circleEntity.radius } as DxfEntityUnion;Â·\n          }Â·\n          case 'polyline': {Â·\n            // Type guard: Entity Î¼Îµ type 'polyline' Î­Ï‡ÎµÎ¹ vertices & closedÂ·\n            const polylineEntity = entity as typeof entity & { vertices: Point2D[]; closed: boolean };Â·\n            return { ...base, type: 'polyline' as const, vertices: polylineEntity.vertices, closed: polylineEntity.closed } as DxfEntityUnion;Â·\n          }Â·\n          case 'arc': {Â·\n            // Type guard: Entity Î¼Îµ type 'arc' Î­Ï‡ÎµÎ¹ center, radius, startAngle, endAngleÂ·\n            const arcEntity = entity as typeof entity & { center: Point2D; radius: number; startAngle: number; endAngle: number };Â·\n            return { ...base, type: 'arc' as const, center: arcEntity.center, radius: arcEntity.radius, startAngle: arcEntity.startAngle, endAngle: arcEntity.endAngle } as DxfEntityUnion;Â·\n          }Â·\n          case 'text': {Â·\n            // â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—Â·\n            // â•‘ âš ï¸ VERIFIED WORKING (2026-01-03) - ÎœÎ—Î Î‘Î›Î›Î‘ÎžÎ•Î¤Î•!                   â•‘Â·\n            // â•‘ height || fontSize || 12 ÎµÎ¯Î½Î±Î¹ Î· Î£Î©Î£Î¤Î— ÏƒÎµÎ¹ÏÎ¬ Ï€ÏÎ¿Ï„ÎµÏÎ±Î¹ÏŒÏ„Î·Ï„Î±Ï‚       â•‘Â·\n            // â•‘ ÎœÎ—Î Î±Î»Î»Î¬Î¾ÎµÏ„Îµ ÏƒÎµ fontSize || height - Î§Î‘Î›Î‘Î•Î™ Ï„Î± ÎºÎµÎ¯Î¼ÎµÎ½Î±!           â•‘Â·\n            // â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•Â·\n            const textEntity = entity as typeof entity & { position: Point2D; text: string; fontSize?: number; height?: number; rotation?: number };Â·\n            const textHeight = textEntity.height || textEntity.fontSize || 12;Â·\n            return { ...base, type: 'text' as const, position: textEntity.position, text: textEntity.text, height: textHeight, rotation: textEntity.rotation } as DxfEntityUnion;Â·\n          }Â·\n          default:Â·\n            console.warn('ðŸ” Unsupported entity type for DxfCanvas:', entity.type);Â·\n            return null;Â·\n        }Â·\n      }).filter(Boolean) as DxfEntityUnion[] || []),Â·\n      // ðŸŽ¯ ADD PREVIEW ENTITY: Include preview entity from drawing state for real-time renderingÂ·\n      ...(drawingHandlers.drawingState.previewEntity ? (() => {Â·\n        const preview = drawingHandlers.drawingState.previewEntity;Â·Â·Â·\n        // Type-safe preview entity mapping based on entity typeÂ·\n        if (preview.type === 'line') {Â·\n          const linePreview = preview as typeof preview & {Â·\n            start: Point2D;Â·\n            end: Point2D;Â·\n            color?: string;Â·\n            lineweight?: numberÂ·\n          };Â·\n          return [{Â·\n            id: linePreview.id,Â·\n            type: 'line' as const,Â·\n            layer: linePreview.layer || '0',Â·\n            color: linePreview.color || UI_COLORS.BRIGHT_GREEN, // Green for previewÂ·\n            lineWidth: linePreview.lineweight || 1,Â·\n            visible: true,Â·\n            start: linePreview.start,Â·\n            end: linePreview.endÂ·\n          }] as DxfEntityUnion[];Â·\n        }Â·Â·Â·\n        // Note: DxfEntityUnion Î´ÎµÎ½ Ï…Ï€Î¿ÏƒÏ„Î·ÏÎ¯Î¶ÎµÎ¹ 'point', 'rectangle', etc - skip Î³Î¹Î± Ï„ÏŽÏÎ±Â·\n        // Î‘Î½ Ï‡ÏÎµÎ¹Î±ÏƒÏ„ÎµÎ¯, Î¸Î± Ï€ÏÎ­Ï€ÎµÎ¹ Î½Î± ÎµÏ€ÎµÎºÏ„Î±Î¸ÎµÎ¯ Ï„Î¿ DxfEntityUnion typeÂ·\n        return [];Â·\n      })() : [])Â·\n    ],Â·\n    layers: Object.keys(props.currentScene.layers || {}), // âœ… FIX: Convert layers object to arrayÂ·\n    bounds: props.currentScene.bounds // âœ… FIX: Use actual bounds from sceneÂ·\n  } : null;Â·Â·Â·\n  // ðŸ” DEBUG - Check if DXF scene has entities and auto-fit to viewÂ·\n  React.useEffect(() => {Â·\n    if (dxfScene && dxfScene.entities.length > 0) {Â·\n      // DxfScene loaded with entities - debug disabled for performanceÂ·Â·Â·\n      // âœ… AUTO-FIT TO VIEW - Using new zoom system with DYNAMIC VIEWPORTÂ·\n      if (dxfScene.bounds) {Â·\n        // Auto-fitting DXF to view - debug disabled for performanceÂ·Â·Â·\n        // Get actual canvas dimensions instead of hardcoded valuesÂ·\n        const canvas = dxfCanvasRef.current || overlayCanvasRef.current;Â·\n        if (canvas && canvas instanceof HTMLCanvasElement) {Â·\n          // âœ… ENTERPRISE MIGRATION: Get service from registryÂ·\n          const canvasBounds = serviceRegistry.get('canvas-bounds');Â·\n          const rect = canvasBounds.getBounds(canvas);Â·\n          const viewport = { width: rect.width, height: rect.height };Â·Â·Â·\n          // Use professional zoom system for fit-to-view with actual viewportÂ·\n          // ðŸŽ¯ ENTERPRISE: alignToOrigin=true to position world (0,0) at bottom-left ruler intersectionÂ·\n          zoomSystem.zoomToFit(dxfScene.bounds, viewport, true);Â·\n        } else {Â·\n          // Fallback to container dimensions if canvas not readyÂ·\n          const container = document.querySelector('.relative.w-full.h-full.overflow-hidden');Â·\n          if (container) {Â·\n            // âœ… ÎšÎ•ÎÎ¤Î¡Î™ÎšÎŸÎ ÎŸÎ™Î—Î£Î—: Î§ÏÎ®ÏƒÎ· CanvasBoundsService (works with any element)Â·\n            const rect = container.getBoundingClientRect();Â·\n            // ðŸŽ¯ ENTERPRISE: alignToOrigin=true to position world (0,0) at bottom-left ruler intersectionÂ·\n            zoomSystem.zoomToFit(dxfScene.bounds, { width: rect.width, height: rect.height }, true);Â·\n          }Â·\n        }Â·\n      }Â·\n    } else if (dxfScene) {Â·\n      // console.log('ðŸ” DxfScene loaded but NO entities:', { dxfScene });Â·\n    }Â·\n  }, [props.currentScene]); // Use props instead of derived state to prevent infinite loopÂ·Â·Â·\n  // Use shared overlay handlers to eliminate duplicate codeÂ·\n  const { handleOverlaySelect, handleOverlayEdit, handleOverlayDelete, handleOverlayUpdate } =Â·\n    createOverlayHandlers({Â·\n      setSelectedOverlay: overlayStore.setSelectedOverlay,Â·\n      remove: overlayStore.remove,Â·\n      update: overlayStore.update,Â·\n      getSelectedOverlay: overlayStore.getSelectedOverlay,Â·\n      overlays: overlayStore.overlaysÂ·\n    }, undefined);  // âœ… CanvasSection Î´ÎµÎ½ Î­Ï‡ÎµÎ¹ levelSwitcher, Î¬ÏÎ± Ï€ÎµÏÎ½Î¬Ï‰ undefinedÂ·Â·Â·\n  // âœ… ÎšÎ•ÎÎ¤Î¡Î™ÎšÎŸÎ ÎŸÎ™Î—Î£Î—: FIT TO OVERLAY - Î§ÏÎ®ÏƒÎ· ÎºÎµÎ½Ï„ÏÎ¹ÎºÎ®Ï‚ Ï…Ï€Î·ÏÎµÏƒÎ¯Î±Ï‚ Î±Î½Ï„Î¯ Î³Î¹Î± Î´Î¹Î¬ÏƒÏ€Î±ÏÏ„Î· logicÂ·\n  const fitToOverlay = (overlayId: string) => {Â·\n    const overlay = currentOverlays.find(o => o.id === overlayId);Â·\n    if (!overlay || !overlay.polygon || overlay.polygon.length < 3) {Â·\n      return;Â·\n    }Â·Â·Â·\n    // Calculate bounding box of overlay polygonÂ·\n    const xs = overlay.polygon.map(([x]) => x);Â·\n    const ys = overlay.polygon.map(([, y]) => y);Â·\n    const bounds = {Â·\n      min: { x: Math.min(...xs), y: Math.min(...ys) },Â·\n      max: { x: Math.max(...xs), y: Math.max(...ys) }Â·\n    };Â·Â·Â·\n    // âœ… ENTERPRISE MIGRATION: Get service from registryÂ·\n    const fitToView = serviceRegistry.get('fit-to-view');Â·\n    const viewport = { width: 800, height: 600 }; // Default fallback - should get from actual canvasÂ·\n    const result = fitToView.calculateFitToViewFromBounds(bounds, viewport, { padding: 0.1 });Â·Â·Â·\n    if (result.success && result.transform) {Â·\n      // Apply transform to zoom systemÂ·\n      zoomSystem.setTransform(result.transform);Â·\n    }Â·\n  };Â·Â·Â·Â·Â·\n  // Drawing logicÂ·\n  const handleOverlayClick = (overlayId: string, point: Point2D) => {Â·\n    // console.log('ðŸ” handleOverlayClick called:', { overlayId, point, overlayMode, activeTool });Â·Â·Â·\n    // ðŸš€ PROFESSIONAL CAD: Î‘Ï…Ï„ÏŒÎ¼Î±Ï„Î· ÎµÏ€Î¹Î»Î¿Î³Î® layers ÏŒÏ„Î±Î½ layering tool ÎµÎ¯Î½Î±Î¹ ÎµÎ½ÎµÏÎ³ÏŒÂ·\n    if (activeTool === 'layering' || overlayMode === 'select') {Â·\n      // console.log('ðŸ” Selecting overlay:', overlayId);Â·\n      handleOverlaySelect(overlayId);Â·\n      // ðŸ”§ AUTO FIT TO VIEW - Zoom to selected overlayÂ·\n      // console.log('ðŸ” Calling fitToOverlay in 100ms...');Â·\n      setTimeout(() => {Â·\n        // console.log('ðŸ” Now calling fitToOverlay:', overlayId);Â·\n        fitToOverlay(overlayId);Â·\n      }, 100); // Small delay to ensure selection state updatesÂ·\n    }Â·\n  };Â·Â·Â·\n  const handleCanvasClick = (point: Point2D) => {Â·\n    // âœ… ÎšÎ•ÎÎ¤Î¡Î™ÎšÎŸÎ ÎŸÎ™Î—Î£Î—: Route click to unified drawing system for drawing toolsÂ·\n    const isDrawingTool = activeTool === 'line' || activeTool === 'polyline' || activeTool === 'polygon'Â·\n      || activeTool === 'rectangle' || activeTool === 'circle'; // âœ… Removed 'arc' - not in ToolType unionÂ·Â·Â·\n    if (isDrawingTool && drawingHandlersRef.current) {Â·\n      // ðŸ”¥ FIX: Use ONLY dxfCanvasRef for drawing tools (NOT overlayCanvasRef!)Â·\n      // Drawing tools (Line/Circle/Rectangle) draw on DxfCanvasÂ·\n      // Color layers draw on LayerCanvas (overlayCanvasRef)Â·\n      const canvasElement = dxfCanvasRef.current?.getCanvas?.();Â·\n      if (!canvasElement) {Â·\n        return;Â·\n      }Â·Â·Â·\n      const viewport = { width: canvasElement.clientWidth, height: canvasElement.clientHeight };Â·\n      const worldPoint = CoordinateTransforms.screenToWorld(point, transform, viewport);Â·Â·Â·\n      // Call the centralized drawing handler - USE REF!Â·\n      drawingHandlersRef.current.onDrawingPoint(worldPoint);Â·\n      return;Â·\n    }Â·Â·Â·\n    // âœ… OVERLAY MODE: Use legacy overlay system with draftPolygonÂ·\n    if (overlayMode === 'draw') {Â·\n      // ðŸ”§ Use UNIFIED CoordinateTransforms Î³Î¹Î± consistencyÂ·\n      const canvas = dxfCanvasRef.current || overlayCanvasRef.current;Â·\n      if (!canvas) return;Â·Â·Â·\n      const viewport = { width: canvas.clientWidth, height: canvas.clientHeight };Â·\n      const worldPoint = CoordinateTransforms.screenToWorld(point, transform, viewport);Â·\n      const worldPointArray: [number, number] = [worldPoint.x, worldPoint.y];Â·Â·Â·\n      // console.log('ðŸ” Adding point to draft polygon:', {Â·\n      //   screenPoint: point,Â·\n      //   worldPoint,Â·\n      //   currentDraftLength: draftPolygon.lengthÂ·\n      // });Â·Â·Â·\n      setDraftPolygon(prev => {Â·\n        const newPolygon = [...prev, worldPointArray];Â·\n        // console.log('ðŸ” Draft polygon updated:', {Â·\n        //   oldLength: prev.length,Â·\n        //   newLength: newPolygon.length,Â·\n        //   newPolygon: newPolygon.slice(0, 3) // First 3 pointsÂ·\n        // });Â·\n        return newPolygon;Â·\n      });Â·Â·Â·\n      // Close polygon if clicking near first pointÂ·\n      if (draftPolygon.length >= 3) {Â·\n        const firstPoint = draftPolygon[0];Â·\n        const distance = calculateDistance(Â·\n          { x: worldPointArray[0], y: worldPointArray[1] },Â·\n          { x: firstPoint[0], y: firstPoint[1] }Â·\n        );Â·Â·Â·\n        // console.log('ðŸ” Checking polygon close:', {Â·\n        //   distance,Â·\n        //   threshold: 20 / transform.scale,Â·\n        //   shouldClose: distance < (20 / transform.scale)Â·\n        // });Â·Â·Â·\n        if (distance < (20 / transform.scale)) { // Close threshold adjusted for scaleÂ·\n          // console.log('ðŸ” Closing polygon - finishing drawing');Â·\n          finishDrawing();Â·\n          return;Â·\n        }Â·\n      }Â·\n    } else {Â·\n      // Clicked on empty space - deselectÂ·\n      // console.log('ðŸ” Deselecting overlay (clicked empty space)');Â·\n      handleOverlaySelect(null);Â·\n    }Â·\n  };Â·Â·Â·\n  const finishDrawing = async () => {Â·\n    // Debug disabled to prevent console spamÂ·Â·Â·\n    if (draftPolygon.length >= 3 && levelManager.currentLevelId) {Â·\n      try {Â·\n        const newOverlay = await overlayStore.add({Â·\n          levelId: levelManager.currentLevelId,Â·\n          kind: currentKind,Â·\n          polygon: draftPolygon,Â·\n          status: currentStatus,Â·\n          label: `Overlay ${Date.now()}`, // Temporary labelÂ·\n        });Â·Â·Â·\n        // console.log('ðŸ” New Overlay Created:', newOverlay);Â·Â·Â·\n      } catch (error) {Â·\n        console.error('Failed to create overlay:', error);Â·\n      }Â·\n    }Â·\n    setDraftPolygon([]);Â·\n  };Â·Â·Â·\n  // Handle fit-to-view event from useCanvasOperations fallbackÂ·\n  React.useEffect(() => {Â·\n    const handleFitToView = (e: CustomEvent) => {Â·\n      // ðŸš€ USE COMBINED BOUNDS - DXF + overlaysÂ·\n      // ðŸ¢ FIX (2026-01-04): forceRecalculate=true includes dynamically drawn entitiesÂ·\n      const combinedBounds = createCombinedBounds(dxfScene, colorLayers, true);Â·Â·Â·\n      if (combinedBounds) {Â·\n        const viewport = e.detail?.viewport || { width: 800, height: 600 };Â·Â·Â·\n        try {Â·\n          // ðŸŽ¯ ENTERPRISE: alignToOrigin = true â†’ (0,0) at axis intersection (bottom-left)Â·\n          const zoomResult = zoomSystem.zoomToFit(combinedBounds, viewport, true);Â·Â·Â·\n          // ðŸ”¥ ÎšÎ¡Î™Î£Î™ÎœÎŸ: Î•Ï†Î±ÏÎ¼Î¿Î³Î® Ï„Î¿Ï… Î½Î­Î¿Ï… transform Î¼Îµ null checks + NaN guardsÂ·\n          if (zoomResult && zoomResult.transform) {Â·\n            const { scale, offsetX, offsetY } = zoomResult.transform;Â·Â·Â·\n            // ðŸ›¡ï¸ GUARD: Check for NaN values before applying transformÂ·\n            if (isNaN(scale) || isNaN(offsetX) || isNaN(offsetY)) {Â·\n              console.error('ðŸš¨ Shift+1 failed: Invalid transform (NaN values)');Â·\n              return;Â·\n            }Â·Â·Â·\n            setTransform(zoomResult.transform);Â·\n          }Â·\n        } catch (error) {Â·\n          console.error('ðŸš¨ Shift+1 failed:', error);Â·\n        }Â·\n      }Â·\n    };Â·Â·Â·\n    document.addEventListener('canvas-fit-to-view', handleFitToView as EventListener);Â·\n    return () => document.removeEventListener('canvas-fit-to-view', handleFitToView as EventListener);Â·\n  }, [dxfScene, colorLayers, zoomSystem]); // ðŸš€ Include colorLayers Î³Î¹Î± combined boundsÂ·Â·Â·\n  // Handle keyboard shortcuts for drawing and zoomÂ·\n  React.useEffect(() => {Â·\n    const handleKeyDown = (e: KeyboardEvent) => {Â·\n      // Prevent shortcuts when typing in inputsÂ·\n      const target = e.target as HTMLElement;Â·\n      if (target.tagName === 'INPUT' || target.tagName === 'TEXTAREA' || target.contentEditable === 'true') {Â·\n        return;Â·\n      }Â·Â·Â·\n      // âœ… ÎšÎ•ÎÎ¤Î¡Î™ÎšÎŸÎ ÎŸÎ™Î—Î£Î—: Zoom shortcuts Î¼ÎµÏ„Î±ÎºÏŒÎ¼Î¹ÏƒÎ±Î½ ÏƒÏ„Î¿ hooks/useKeyboardShortcuts.tsÂ·\n      // Î•Î´ÏŽ ÎºÏÎ±Ï„Î¬Î¼Îµ ÎœÎŸÎÎŸ local shortcuts Î³Î¹Î± drawing mode (Escape, Enter)Â·Â·Â·\n      switch (e.key) {Â·\n        case 'Escape':Â·\n          setDraftPolygon([]);Â·\n          break;Â·\n        case 'Enter':Â·\n          if (draftPolygon.length >= 3) {Â·\n            finishDrawing();Â·\n          }Â·\n          break;Â·\n      }Â·\n    };Â·Â·Â·\n    window.addEventListener('keydown', handleKeyDown);Â·\n    return () => window.removeEventListener('keydown', handleKeyDown);Â·\n  }, [draftPolygon, finishDrawing]);Â·Â·Â·Â·Â·\n  // âŒ REMOVED: Duplicate zoom handlers - now using centralized zoomSystem.handleKeyboardZoom()Â·\n  // All keyboard zoom is handled through the unified system in the keyboard event handler aboveÂ·Â·Â·\n  return (Â·\n    <>Â·\n      {/* Left Sidebar - REMOVED - FloatingPanelContainer handles this */}Â·Â·Â·\n      {/* Main Canvas Area */}Â·\n      {/* â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—Â·\n          â•‘ âš ï¸ CRITICAL FIX (2026-01-03) - Canvas container backgrounds           â•‘Â·\n          â•‘ ÎœÎ—Î Î Î¡ÎŸÎ£Î˜Î•Î¤Î•Î¤Î• bg-muted Î® PANEL_COLORS.BG_SECONDARY ÎµÎ´ÏŽ!              â•‘Â·\n          â•‘ Î‘Ï…Ï„Î¬ Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î¿ÏÎ½ \\\"Ï€Î­Ï€Î»Î¿\\\" Ï€Î¿Ï… ÎºÎ±Î»ÏÏ€Ï„ÎµÎ¹ Ï„Î± Ï‡ÏÏŽÎ¼Î±Ï„Î± DXF Î¿Î½Ï„Î¿Ï„Î®Ï„Ï‰Î½.       â•‘Â·\n          â•‘ Î¤Î¿ transparent background ÎµÏ€Î¹Ï„ÏÎ­Ï€ÎµÎ¹ ÏƒÏ‰ÏƒÏ„Î® Î±Ï€ÎµÎ¹ÎºÏŒÎ½Î¹ÏƒÎ· canvas.          â•‘Â·\n          â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */}Â·\n      <div className=\\\"flex-1 relative\\\">Â·\n        {/* DEBUG BUTTONS MOVED TO HEADER */}Â·Â·Â·\n        <divÂ·\n          className={`canvas-stack relative w-full h-full ${PANEL_LAYOUT.OVERFLOW.HIDDEN}`}Â·\n          style={{ cursor: 'none' }} // âœ… ADR-008 CAD-GRADE: ALWAYS hide CSS cursor - crosshair is the only cursorÂ·\n        >Â·\n          {/* ðŸ¢ PDF BACKGROUND: Lowest layer in canvas stack (z-[-10]) */}Â·\n          <PdfBackgroundCanvasÂ·\n            imageUrl={pdfImageUrl}Â·\n            pdfTransform={pdfTransform}Â·\n            canvasTransform={transform}Â·\n            viewport={viewport}Â·\n            enabled={pdfEnabled}Â·\n            opacity={pdfOpacity}Â·\n          />Â·Â·Â·\n          {/* ðŸ”º CANVAS V2: Layer Canvas - Background Overlays (Semi-transparent colored layers) */}Â·\n          {showLayerCanvas && (Â·\n            <LayerCanvasÂ·\n              ref={overlayCanvasRef}Â·\n              layers={colorLayers}Â·\n              transform={transform}Â·\n              viewport={viewport} // âœ… CENTRALIZED: Pass centralized viewportÂ·\n              activeTool={activeTool} // ðŸ”¥ ÎšÎ¡Î™Î£Î™ÎœÎŸ: Pass activeTool Î³Î¹Î± pan cursorÂ·\n              layersVisible={showLayers} // âœ… Î¥Î Î‘Î¡Î§ÎŸÎ SYSTEM: Existing layer visibilityÂ·\n              dxfScene={dxfScene} // ðŸŽ¯ SNAP FIX: Pass DXF scene for snap engine initializationÂ·\n              enableUnifiedCanvas={true} // âœ… Î•ÎÎ•Î¡Î“ÎŸÎ ÎŸÎ™Î—Î£Î—: Unified event system Î³Î¹Î± debuggingÂ·\n              data-canvas-type=\\\"layer\\\" // ðŸŽ¯ DEBUG: Identifier Î³Î¹Î± alignment testÂ·\n              onTransformChange={(newTransform) => {Â·\n                setTransform(newTransform); // âœ… SYNC: ÎšÎ¿Î¹Î½ÏŒ transform state Î³Î¹Î± LayerCanvasÂ·\n                zoomSystem.setTransform(newTransform);Â·\n              }}Â·\n              onWheelZoom={zoomSystem.handleWheelZoom} // âœ… CONNECT ZOOM SYSTEMÂ·\n              crosshairSettings={crosshairSettings} // Crosshair Î¼ÏŒÎ½Î¿ Î³Î¹Î± layersÂ·\n              cursorSettings={cursorCanvasSettings}Â·\n              snapSettings={snapSettings}Â·\n              gridSettings={{ ...gridSettings, enabled: false }} // ðŸ”§ FIX: Disable grid in LayerCanvas (now in DxfCanvas)Â·\n              rulerSettings={{ ...rulerSettings, enabled: false }} // ðŸ”§ FIX: Disable rulers in LayerCanvas (now in DxfCanvas)Â·\n              selectionSettings={selectionSettings}Â·\n              onLayerClick={handleOverlayClick}Â·\n              onCanvasClick={handleCanvasClick}Â·\n              onMouseMove={(point) => {Â·\n                setMouseCss(point);Â·\n                setMouseWorld(point); // TODO: Transform CSS to world coordinatesÂ·\n                // âœ… Î”Î™ÎŸÎ¡Î˜Î©Î£Î—: ÎšÎ±Î»ÏŽ ÎºÎ±Î¹ Ï„Î¿ props.onMouseMove Î³Î¹Î± cursor-centered zoomÂ·\n                if (props.onMouseMove) {Â·\n                  // ðŸŽ¯ TYPE-SAFE: Create proper mock event (event not available in this context)Â·\n                  const mockEvent = {Â·\n                    clientX: point.x,Â·\n                    clientY: point.y,Â·\n                    preventDefault: () => {},Â·\n                    stopPropagation: () => {}Â·\n                  } as React.MouseEvent;Â·\n                  props.onMouseMove(point, mockEvent);Â·\n                }Â·\n              }}Â·\n              className={`absolute ${PANEL_LAYOUT.INSET['0']} w-full h-full ${PANEL_LAYOUT.Z_INDEX['0']}`} // ðŸŽ¯ Z-INDEX FIX: LayerCanvas BACKGROUND (z-0)Â·\n              style={canvasUI.positioning.layers.layerCanvasWithTools(activeTool, crosshairSettings.enabled)}Â·\n            />Â·\n          )}Â·Â·Â·\n          {/* ðŸ”º CANVAS V2: DXF Canvas - Foreground DXF Drawing (Over colored layers) */}Â·\n          {showDxfCanvas && (Â·\n            <DxfCanvasÂ·\n              ref={dxfCanvasRef}Â·\n              scene={dxfScene}Â·\n              transform={transform}Â·\n              viewport={viewport} // âœ… CENTRALIZED: Pass centralized viewportÂ·\n              activeTool={activeTool} // ðŸ”¥ ÎšÎ¡Î™Î£Î™ÎœÎŸ: Pass activeTool Î³Î¹Î± pan cursorÂ·\n              colorLayers={colorLayers} // âœ… FIX: Pass color layers Î³Î¹Î± fit to view boundsÂ·\n              crosshairSettings={crosshairSettings} // âœ… RESTORED: Crosshair enabledÂ·\n              gridSettings={gridSettings} // âœ… RESTORED: Grid enabledÂ·\n              rulerSettings={{Â·\n                // ðŸ›¡ï¸ NULL GUARD: Ensure rulers are always enabled, even if context is temporarily undefinedÂ·\n                enabled: (globalRulerSettings?.horizontal?.enabled && globalRulerSettings?.vertical?.enabled) ?? true,Â·\n                visible: true,Â·\n                opacity: 1.0,Â·\n                unit: globalRulerSettings.units as 'mm' | 'cm' | 'm',Â·\n                color: globalRulerSettings.horizontal.color,Â·\n                backgroundColor: globalRulerSettings.horizontal.backgroundColor,Â·\n                fontSize: globalRulerSettings.horizontal.fontSize,Â·\n                textColor: globalRulerSettings.horizontal.textColor,Â·\n                height: 30,Â·\n                width: 30,Â·\n                showLabels: globalRulerSettings.horizontal.showLabels,Â·\n                showUnits: globalRulerSettings.horizontal.showUnits,Â·\n                showBackground: globalRulerSettings.horizontal.showBackground,Â·\n                showMajorTicks: globalRulerSettings.horizontal.showMajorTicks,Â·\n                showMinorTicks: true,Â·\n                majorTickColor: globalRulerSettings.horizontal.color,Â·\n                minorTickColor: UI_COLORS.BUTTON_SECONDARY,Â·\n                majorTickLength: 10,Â·\n                minorTickLength: 5,Â·\n                tickInterval: gridSettings.size * gridMajorInterval, // âœ… SYNC WITH GRID: Use major grid interval!Â·\n                unitsFontSize: 10,Â·\n                unitsColor: globalRulerSettings.horizontal.textColor,Â·\n                labelPrecision: 1,Â·\n                borderColor: globalRulerSettings.horizontal.color,Â·\n                borderWidth: 1Â·\n              }}Â·\n              data-canvas-type=\\\"dxf\\\" // ðŸŽ¯ DEBUG: Identifier Î³Î¹Î± alignment testÂ·\n              className={`absolute ${PANEL_LAYOUT.INSET['0']} w-full h-full ${PANEL_LAYOUT.Z_INDEX['10']}`} // ðŸŽ¯ Z-INDEX FIX: DxfCanvas FOREGROUND (z-10) - Î Î‘ÎÎ© Î±Ï€ÏŒ LayerCanvas!Â·\n              onCanvasClick={handleCanvasClick} // ðŸŽ¯ FIX: Connect canvas clicks Î³Î¹Î± drawing tools!Â·\n              onTransformChange={(newTransform) => {Â·\n                setTransform(newTransform); // âœ… SYNC: ÎšÎ¿Î¹Î½ÏŒ transform state Î³Î¹Î± DxfCanvasÂ·\n                zoomSystem.setTransform(newTransform);Â·\n              }}Â·\n              onWheelZoom={zoomSystem.handleWheelZoom} // âœ… CONNECT ZOOM SYSTEMÂ·\n              onMouseMove={(screenPos, worldPos) => {Â·\n                // âœ… Î”Î™ÎŸÎ¡Î˜Î©Î£Î—: Î ÎµÏÎ½Î¬Ï‰ Ï„Î¿ worldPos ÏƒÏ„Î¿ props.onMouseMove Î³Î¹Î± cursor-centered zoomÂ·\n                // Note: event is not available in this context, so we create a minimal mock eventÂ·\n                if (props.onMouseMove && worldPos) {Â·\n                  const mockEvent = {Â·\n                    clientX: screenPos.x,Â·\n                    clientY: screenPos.y,Â·\n                    preventDefault: () => {},Â·\n                    stopPropagation: () => {}Â·\n                  } as React.MouseEvent;Â·\n                  props.onMouseMove(worldPos, mockEvent);Â·\n                }Â·Â·Â·\n                // âœ… ADR-006 FIX: Update mouseCss/mouseWorld Î³Î¹Î± CrosshairOverlayÂ·\n                setMouseCss(screenPos);Â·\n                setMouseWorld(worldPos);Â·Â·Â·\n                // ðŸŽ¯ FIX: Call onDrawingHover Î³Î¹Î± preview phase renderingÂ·\n                const isDrawingTool = activeTool === 'line' || activeTool === 'polyline' || activeTool === 'polygon'Â·\n                  || activeTool === 'rectangle' || activeTool === 'circle';Â·Â·Â·\n                if (isDrawingTool && worldPos && drawingHandlersRef.current?.onDrawingHover) {Â·\n                  drawingHandlersRef.current.onDrawingHover(worldPos);Â·\n                }Â·\n              }}Â·\n            />Â·\n          )}Â·Â·Â·\n          {/* âœ… ADR-008: CrosshairOverlay - INTERNAL mouse tracking for pixel-perfect alignment */}Â·\n          {/* ðŸ¢ CAD-GRADE: CrosshairOverlay tracks mouse position internally AND gets size from layout */}Â·\n          <CrosshairOverlayÂ·\n            isActive={crosshairSettings.enabled}Â·\n            // âœ… ADR-008: REMOVED viewport prop - canvas gets actual size from layout via ResizeObserverÂ·\n            rulerMargins={{Â·\n              left: rulerSettings.width ?? 30,Â·\n              top: 0,Â·\n              bottom: 0Â·\n            }}Â·\n            className={`absolute ${PANEL_LAYOUT.POSITION.LEFT_0} ${PANEL_LAYOUT.POSITION.RIGHT_0} ${PANEL_LAYOUT.POSITION.TOP_0} ${PANEL_LAYOUT.Z_INDEX['20']} ${PANEL_LAYOUT.POINTER_EVENTS.NONE}`}Â·\n            style={{ height: `calc(100% - ${rulerSettings.height ?? 30}px)` }}Â·\n          />Â·Â·Â·\n          {/* ðŸŽ¯ SNAP INDICATOR: Visual feedback for snap points (AutoCAD/MicroStation style)Â·\n              @see docs/features/snapping/SNAP_INDICATOR_LINE.md - Î’Î®Î¼Î± 5: ÎšÎ»Î¹Îº ÎºÎ±Î¹ Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î± Î½Î­Î±Ï‚ Î³ÏÎ±Î¼Î¼Î®Ï‚ */}Â·\n          <SnapIndicatorOverlayÂ·\n            snapResult={currentSnapResult ? {Â·\n              point: currentSnapResult.snappedPoint,Â·\n              type: currentSnapResult.activeMode || 'endpoint'Â·\n            } : null}Â·\n            viewport={viewport}Â·\n            canvasRect={dxfCanvasRef.current?.getCanvas?.()?.getBoundingClientRect() ?? null}Â·\n            transform={transform}Â·\n            className={`absolute ${PANEL_LAYOUT.INSET['0']} ${PANEL_LAYOUT.POINTER_EVENTS.NONE} ${PANEL_LAYOUT.Z_INDEX['30']}`}Â·\n          />Â·Â·Â·\n          {/* âœ… ADR-009: RulerCornerBox - Interactive corner box at ruler intersection */}Â·\n          {/* ðŸ¢ CAD-GRADE: Industry standard (AutoCAD/Revit/Blender) corner box with zoom controls */}Â·\n          <RulerCornerBoxÂ·\n            rulerWidth={rulerSettings.width ?? 30}Â·\n            rulerHeight={rulerSettings.height ?? 30}Â·\n            currentScale={transform.scale}Â·\n            backgroundColor={globalRulerSettings.horizontal.backgroundColor}Â·\n            textColor={globalRulerSettings.horizontal.textColor}Â·\n            onZoomToFit={() => {Â·\n              // âœ… ÎšÎ•ÎÎ¤Î¡Î™ÎšÎŸÎ ÎŸÎ™Î—Î£Î—: Use existing createCombinedBounds for unified boundsÂ·\n              // ðŸ¢ FIX (2026-01-04): forceRecalculate=true includes dynamically drawn entitiesÂ·\n              const combinedBounds = createCombinedBounds(dxfScene, colorLayers, true);Â·Â·Â·\n              // ðŸ” DEBUG: Log bounds and entities (remove after fixing)Â·\n              console.log('ðŸŽ¯ [ZoomToFit] dxfScene entities:', dxfScene?.entities?.length, dxfScene?.entities);Â·\n              console.log('ðŸŽ¯ [ZoomToFit] combinedBounds:', combinedBounds);Â·\n              console.log('ðŸŽ¯ [ZoomToFit] viewport:', viewport);Â·Â·Â·\n              if (combinedBounds && viewport.width > 0 && viewport.height > 0) {Â·\n                const result = zoomSystem.zoomToFit(combinedBounds, viewport, true);Â·\n                console.log('ðŸŽ¯ [ZoomToFit] result:', result);Â·\n              } else {Â·\n                console.warn('ðŸš¨ [ZoomToFit] Invalid bounds or viewport!', { combinedBounds, viewport });Â·\n              }Â·\n            }}Â·\n            onZoom100={() => zoomSystem.zoomTo100()}Â·\n            onZoomIn={() => zoomSystem.zoomIn()}Â·\n            onZoomOut={() => zoomSystem.zoomOut()}Â·\n            onZoomPrevious={() => zoomSystem.zoomPrevious()}Â·\n            onZoomToScale={(scale) => zoomSystem.zoomToScale(scale)}Â·\n            onWheelZoom={(delta) => {Â·\n              // Convert delta to zoom direction and use cursor-centered zoomÂ·\n              if (mouseCss) {Â·\n                zoomSystem.handleWheelZoom(delta, mouseCss);Â·\n              }Â·\n            }}Â·\n            viewport={viewport}Â·\n            className={PANEL_LAYOUT.Z_INDEX['30']}Â·\n          />Â·\n        </div>Â·\n      </div>Â·Â·Â·Â·Â·\n      {/* Right Sidebar - MOVED TO DxfViewerContent */}Â·\n    </>Â·\n  );Â·\n};Â·\n\"\n    at Object.toContain (C:\\Nestor_Pagonis\\src\\subapps\\dxf-viewer\\__tests__\\line-drawing-smoke.test.ts:57:25)\n    at Promise.finally.completed (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at _runTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\index.js:275:16)\n    at runTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\index.js:343:7)"],"fullName":"ðŸŽ¯ Line Drawing Smoke Test (CRITICAL) âš ï¸ REGRESSION: Critical Bug Fixes Present ðŸ› Fix #2: previewEntity is added to scene in CanvasSection","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1768084864679,"status":"failed","title":"ðŸ› Fix #2: previewEntity is added to scene in CanvasSection"},{"ancestorTitles":["ðŸŽ¯ Line Drawing Smoke Test (CRITICAL)","âš ï¸ REGRESSION: Critical Bug Fixes Present"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ðŸŽ¯ Line Drawing Smoke Test (CRITICAL) âš ï¸ REGRESSION: Critical Bug Fixes Present ðŸ› Fix #3: onMouseMove calls onDrawingHover in DxfCanvas","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084864687,"status":"passed","title":"ðŸ› Fix #3: onMouseMove calls onDrawingHover in DxfCanvas"}],"endTime":1768084864717,"message":"  â— ðŸŽ¯ Line Drawing Smoke Test (CRITICAL) â€º âœ… Critical Files Exist â€º should have useUnifiedDrawing hook file\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: true\n    Received: false\n\n    \u001b[0m \u001b[90m 20 |\u001b[39m     it(\u001b[32m'should have useUnifiedDrawing hook file'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 21 |\u001b[39m       \u001b[36mconst\u001b[39m filePath \u001b[33m=\u001b[39m path\u001b[33m.\u001b[39mjoin(__dirname\u001b[33m,\u001b[39m \u001b[32m'../hooks/drawing/useUnifiedDrawing.ts'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 22 |\u001b[39m       expect(fs\u001b[33m.\u001b[39mexistsSync(filePath))\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 23 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 24 |\u001b[39m\n     \u001b[90m 25 |\u001b[39m     it(\u001b[32m'should have useDrawingHandlers hook file'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toBe (src/subapps/dxf-viewer/__tests__/line-drawing-smoke.test.ts:22:39)\n\n  â— ðŸŽ¯ Line Drawing Smoke Test (CRITICAL) â€º âš ï¸ REGRESSION: Critical Bug Fixes Present â€º ðŸ› Fix #2: previewEntity is added to scene in CanvasSection\n\n    expect(received).toContain(expected) // indexOf\n\n    Expected substring: \"drawingHandlers.state.previewEntity\"\n    Received string:    \"'use client';Â·\n    import React, { useRef, useState } from 'react';Â·\n    // === CANVAS V2 IMPORTS ===Â·\n    import { DxfCanvas, LayerCanvas, type ColorLayer, type SnapSettings, type GridSettings, type RulerSettings, type SelectionSettings, type DxfScene, type DxfEntityUnion } from '../../canvas-v2';Â·\n    import { createCombinedBounds } from '../../systems/zoom/utils/bounds';Â·\n    import type { CrosshairSettings } from '../../rendering/ui/crosshair/CrosshairTypes';Â·\n    // âœ… CURSOR SETTINGS: Import Î±Ï€ÏŒ ÎºÎµÎ½Ï„ÏÎ¹ÎºÏŒ system Î±Î½Ï„Î¯ Î³Î¹Î± duplicateÂ·\n    import type { CursorSettings } from '../../systems/cursor/config';Â·\n    import { useCanvasOperations } from '../../hooks/interfaces/useCanvasOperations';Â·\n    import { useCanvasContext } from '../../contexts/CanvasContext';Â·\n    import { useDrawingHandlers } from '../../hooks/drawing/useDrawingHandlers';Â·\n    import { UI_COLORS } from '../../config/color-config';Â·\n    // CanvasProvider removed - not needed for Canvas V2Â·\n    // OverlayCanvas import removed - it was dead codeÂ·\n    import { FloatingPanelContainer } from '../../ui/FloatingPanelContainer';Â·\n    import { OverlayList } from '../../ui/OverlayList';Â·\n    import { OverlayProperties } from '../../ui/OverlayProperties';Â·\n    import { useOverlayStore } from '../../overlays/overlay-store';Â·\n    import { useLevels } from '../../systems/levels';Â·\n    import { useRulersGridContext } from '../../systems/rulers-grid/RulersGridSystem';Â·\n    import { useCursorSettings } from '../../systems/cursor';Â·\n    import { globalRulerStore } from '../../settings-provider';Â·\n    import type { DXFViewerLayoutProps } from '../../integration/types';Â·\n    import type { OverlayEditorMode, Status, OverlayKind } from '../../overlays/types';Â·\n    import { getStatusColors } from '../../config/color-mapping';Â·\n    import { createOverlayHandlers } from '../../overlays/types';Â·\n    import { calculateDistance } from '../../rendering/entities/shared/geometry-rendering-utils';Â·\n    import type { ViewTransform, Point2D } from '../../rendering/types/Types';Â·\n    import { useZoom } from '../../systems/zoom';Â·\n    import { CoordinateTransforms } from '../../rendering/core/CoordinateTransforms';Â·\n    // âœ… ENTERPRISE MIGRATION: Using ServiceRegistryÂ·\n    import { serviceRegistry } from '../../services';Â·\n    // âœ… ADR-006 FIX: Import CrosshairOverlay Î³Î¹Î± crosshair renderingÂ·\n    import CrosshairOverlay from '../../canvas-v2/overlays/CrosshairOverlay';Â·\n    // âœ… ADR-009: Import RulerCornerBox for interactive corner box (AutoCAD/Revit standard)Â·\n    import RulerCornerBox from '../../canvas-v2/overlays/RulerCornerBox';Â·\n    // ðŸŽ¯ SNAP INDICATOR: Import for visual snap feedbackÂ·\n    import SnapIndicatorOverlay from '../../canvas-v2/overlays/SnapIndicatorOverlay';Â·\n    import { useSnapContext } from '../../snapping/context/SnapContext';Â·\n    // Enterprise Canvas UI Migration - Phase BÂ·\n    import { canvasUI } from '@/styles/design-tokens/canvas';Â·\n    // ðŸ¢ ENTERPRISE: Centralized spacing tokens (ADR-013)Â·\n    import { PANEL_LAYOUT } from '../../config/panel-tokens';Â·\n    // ðŸ¢ PDF BACKGROUND: Enterprise PDF background systemÂ·\n    import { PdfBackgroundCanvas, usePdfBackgroundStore } from '../../pdf-background';Â·Â·Â·\n    /**Â·\n     * Renders the main canvas area, including the renderer and floating panels.Â·\n     */Â·\n    export const CanvasSection: React.FC<DXFViewerLayoutProps & { overlayMode: OverlayEditorMode, currentStatus: Status, currentKind: OverlayKind }> = (props) => {Â·\n      // âœ… FIX: Use DxfCanvasRef type Î³Î¹Î± getCanvas() method accessÂ·\n      const dxfCanvasRef = useRef<any>(null); // DxfCanvasRef type (Î¼Îµ getCanvas() method)Â·\n      const overlayCanvasRef = useRef<HTMLCanvasElement>(null);Â·Â·Â·\n      // === NEW ZOOM SYSTEM ===Â·\n      const initialTransform: ViewTransform = { scale: 1, offsetX: 0, offsetY: 0 };Â·\n      const [transform, setTransform] = useState<ViewTransform>(initialTransform);Â·Â·Â·\n      // âœ… CENTRALIZED VIEWPORT: Single source of truth Î³Î¹Î± viewport dimensionsÂ·\n      const [viewport, setViewport] = useState<{ width: number; height: number }>({ width: 0, height: 0 });Â·Â·Â·\n      const zoomSystem = useZoom({Â·\n        initialTransform,Â·\n        onTransformChange: (newTransform) => {Â·\n          setTransform(newTransform); // âœ… SYNC WITH STATEÂ·\n        },Â·\n        // ðŸ¢ ENTERPRISE: Inject viewport Î³Î¹Î± accurate zoom-to-cursorÂ·\n        viewportÂ·\n      });Â·\n      const [canvasRect, setCanvasRect] = useState<DOMRect | null>(null);Â·\n      const [mouseCss, setMouseCss] = useState<Point2D | null>(null);Â·\n      const [mouseWorld, setMouseWorld] = useState<Point2D | null>(null);Â·Â·Â·\n      // ðŸŽ¯ Canvas visibility Î±Ï€ÏŒ parent props (Î¼Îµ fallback ÏƒÏ„Î± defaults)Â·\n      const showDxfCanvas = props.dxfCanvasVisible ?? true;Â·\n      const showLayerCanvasDebug = props.layerCanvasVisible ?? true;Â·Â·Â·Â·Â·\n      const overlayStore = useOverlayStore();Â·\n      const levelManager = useLevels();Â·\n      const [draftPolygon, setDraftPolygon] = useState<Array<[number, number]>>([]);Â·Â·Â·\n      // ðŸ¢ ENTERPRISE: Provide zoom system to contextÂ·\n      const canvasContext = useCanvasContext();Â·\n      // ðŸŽ¯ SNAP INDICATOR: Get current snap result for visual feedbackÂ·\n      const { currentSnapResult } = useSnapContext();Â·\n      // ðŸ¢ PDF BACKGROUND: Get PDF background state and setViewport actionÂ·\n      const {Â·\n        enabled: pdfEnabled,Â·\n        opacity: pdfOpacity,Â·\n        transform: pdfTransform,Â·\n        renderedImageUrl: pdfImageUrl,Â·\n        setViewport: setPdfViewport,Â·\n      } = usePdfBackgroundStore();Â·\n      // âœ… CENTRALIZED VIEWPORT: Update viewport Î±Ï€ÏŒ canvas dimensionsÂ·\n      // ðŸ¢ FIX (2026-01-04): Use ResizeObserver for reliable viewport trackingÂ·\n      React.useEffect(() => {Â·\n        let resizeObserver: ResizeObserver | null = null;Â·Â·Â·\n        const updateViewport = () => {Â·\n          // ðŸ¢ FIX: dxfCanvasRef.current is NOT HTMLCanvasElement - it has getCanvas() method!Â·\n          // Try to get the actual canvas element from DxfCanvas component refÂ·\n          const dxfCanvas = dxfCanvasRef.current?.getCanvas?.();Â·\n          const layerCanvas = overlayCanvasRef.current;Â·Â·Â·\n          // Use DxfCanvas as primary (has the actual canvas element)Â·\n          const canvas = dxfCanvas || layerCanvas;Â·Â·Â·\n          if (canvas && canvas instanceof HTMLCanvasElement) {Â·\n            const rect = canvas.getBoundingClientRect();Â·\n            // Only update if dimensions are valid (not 0x0)Â·\n            if (rect.width > 0 && rect.height > 0) {Â·\n              setViewport({ width: rect.width, height: rect.height });Â·\n              // ðŸ¢ PDF BACKGROUND: Sync viewport to PDF store for fit-to-viewÂ·\n              setPdfViewport({ width: rect.width, height: rect.height });Â·\n              console.log('âœ… [Viewport] Updated:', rect.width, 'x', rect.height);Â·\n            }Â·\n          }Â·\n        };Â·Â·Â·\n        // ðŸ¢ ENTERPRISE: Use ResizeObserver for precise dimension trackingÂ·\n        const setupObserver = () => {Â·\n          const dxfCanvas = dxfCanvasRef.current?.getCanvas?.();Â·\n          const layerCanvas = overlayCanvasRef.current;Â·\n          const canvas = dxfCanvas || layerCanvas;Â·Â·Â·\n          if (canvas && canvas instanceof HTMLCanvasElement) {Â·\n            resizeObserver = new ResizeObserver((entries) => {Â·\n              for (const entry of entries) {Â·\n                const { width, height } = entry.contentRect;Â·\n                if (width > 0 && height > 0) {Â·\n                  setViewport({ width, height });Â·\n                  // ðŸ¢ PDF BACKGROUND: Sync viewport to PDF store for fit-to-viewÂ·\n                  setPdfViewport({ width, height });Â·\n                }Â·\n              }Â·\n            });Â·\n            resizeObserver.observe(canvas);Â·Â·Â·\n            // Initial updateÂ·\n            updateViewport();Â·\n          }Â·\n        };Â·Â·Â·\n        // ðŸ¢ ENTERPRISE: Retry mechanism for canvas mount timingÂ·\n        let retryCount = 0;Â·\n        const maxRetries = 10;Â·Â·Â·\n        const trySetupObserver = () => {Â·\n          const dxfCanvas = dxfCanvasRef.current?.getCanvas?.();Â·\n          const layerCanvas = overlayCanvasRef.current;Â·Â·Â·\n          if (dxfCanvas || layerCanvas) {Â·\n            setupObserver();Â·\n          } else if (retryCount < maxRetries) {Â·\n            retryCount++;Â·\n            setTimeout(trySetupObserver, PANEL_LAYOUT.TIMING.OBSERVER_RETRY); // Retry every 100msÂ·\n          } else {Â·\n            console.warn('âš ï¸ [Viewport] Canvas not available after', maxRetries, 'retries');Â·\n          }Â·\n        };Â·Â·Â·\n        // Initial setup with delay to ensure canvas is mountedÂ·\n        const timer = setTimeout(trySetupObserver, PANEL_LAYOUT.TIMING.OBSERVER_RETRY);Â·Â·Â·\n        // Fallback: Also listen for window resizeÂ·\n        window.addEventListener('resize', updateViewport);Â·Â·Â·\n        return () => {Â·\n          clearTimeout(timer);Â·\n          window.removeEventListener('resize', updateViewport);Â·\n          if (resizeObserver) {Â·\n            resizeObserver.disconnect();Â·\n          }Â·\n        };Â·\n      }, []); // ðŸ¢ FIX: Empty deps - setup once, ResizeObserver handles updatesÂ·Â·Â·\n      // âœ… AUTO FIT TO VIEW: Trigger existing fit-to-view event after canvas mountÂ·\n      // âš ï¸ DISABLED: Î‘Ï†Î±Î¹ÏÎ­Î¸Î·ÎºÎµ Î³Î¹Î±Ï„Î¯ Ï€ÏÎ¿ÎºÎ±Î»Î¿ÏÏƒÎµ issues Î¼Îµ origin marker visibilityÂ·\n      // ÎŸ Ï‡ÏÎ®ÏƒÏ„Î·Ï‚ Î¼Ï€Î¿ÏÎµÎ¯ Î½Î± Ï€Î±Ï„Î®ÏƒÎµÎ¹ manual \\\"Î•Ï…Î¸Ï…Î³ÏÎ¬Î¼Î¼Î¹ÏƒÎ·\\\" ÏŒÏ„Î±Î½ Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹Â·\n      /*Â·\n      const hasTriggeredAutoFit = React.useRef(false);Â·\n      React.useEffect(() => {Â·\n        // Only trigger ONCE after viewport is readyÂ·\n        if (!hasTriggeredAutoFit.current && viewport.width > 0 && viewport.height > 0) {Â·\n          const timer = setTimeout(() => {Â·\n            console.log('ðŸŽ¯ AUTO FIT TO VIEW: Dispatching canvas-fit-to-view event');Â·\n            // âœ… ZERO DUPLICATES: Î§ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹ÏŽ Ï„Î¿ Î¥Î Î‘Î¡Î§ÎŸÎ event systemÂ·\n            document.dispatchEvent(new CustomEvent('canvas-fit-to-view', {Â·\n              detail: { viewport }Â·\n            }));Â·\n            hasTriggeredAutoFit.current = true; // Mark as triggeredÂ·\n          }, 200); // Small delay to ensure all canvas setup is completeÂ·Â·Â·\n          return () => clearTimeout(timer);Â·\n        }Â·\n      }, [viewport.width, viewport.height]); // âœ… FIX: Only depend on viewport, not colorLayersÂ·\n      */Â·Â·Â·\n      // Get rulers and grid settings from RulersGridSystemÂ·\n      const {Â·\n        state: { grid: gridContextSettings, rulers: rulerContextSettings }Â·\n      } = useRulersGridContext();Â·Â·Â·\n      // ðŸ”§ FIX: React state hook Î³Î¹Î± GlobalRulerStore reactivityÂ·\n      const [globalRulerSettings, setGlobalRulerSettings] = React.useState(globalRulerStore.settings);Â·Â·Â·\n      React.useEffect(() => {Â·\n        const unsubscribe = globalRulerStore.subscribe((newSettings) => {Â·\n          setGlobalRulerSettings(newSettings);Â·\n        });Â·\n        return unsubscribe;Â·\n      }, []);Â·Â·Â·\n      // Get cursor settings from CursorSystemÂ·\n      const { settings: cursorSettings } = useCursorSettings();Â·Â·Â·\n      // ðŸ”º CURSOR SYSTEM INTEGRATION - Î£ÏÎ½Î´ÎµÏƒÎ· Î¼Îµ floating panelÂ·\n      const crosshairSettings: CrosshairSettings = {Â·\n        enabled: cursorSettings.crosshair.enabled,Â·\n        visible: cursorSettings.crosshair.enabled, // visible follows enabled stateÂ·\n        color: cursorSettings.crosshair.color,Â·\n        size: cursorSettings.crosshair.size_percent,Â·\n        opacity: cursorSettings.crosshair.opacity,Â·\n        style: cursorSettings.crosshair.line_style,Â·\n        // Extended properties Î±Ï€ÏŒ CursorSystemÂ·\n        lineWidth: cursorSettings.crosshair.line_width,Â·\n        useCursorGap: cursorSettings.crosshair.use_cursor_gap,Â·\n        centerGapPx: cursorSettings.crosshair.center_gap_px,Â·\n        showCenterDot: true,  // Default: show center dotÂ·\n        centerDotSize: 2      // Default: 2px center dotÂ·\n      };Â·Â·Â·\n      // ðŸ”º CURSOR SETTINGS INTEGRATION - Pass complete cursor settings to LayerCanvasÂ·\n      // LayerCanvas expects the full CursorSettings object from systems/cursor/config.tsÂ·\n      const cursorCanvasSettings: CursorSettings = cursorSettings;Â·Â·Â·\n      const snapSettings: SnapSettings = {Â·\n        enabled: true,Â·\n        types: ['endpoint', 'midpoint', 'center'],Â·\n        tolerance: 10Â·\n      };Â·Â·Â·\n      // Convert RulersGridSystem settings to Canvas V2 formatÂ·\n      const rulerSettings: RulerSettings = {Â·\n        enabled: true, // âœ… FORCE ENABLE RULERSÂ·\n        unit: (rulerContextSettings?.units as 'mm' | 'cm' | 'm') ?? 'mm',Â·\n        color: rulerContextSettings?.horizontal?.color ?? UI_COLORS.WHITE, // âœ… CENTRALIZED WHITE Î³Î¹Î± visibilityÂ·\n        backgroundColor: rulerContextSettings?.horizontal?.backgroundColor ?? UI_COLORS.DARK_BACKGROUND, // âœ… CENTRALIZED DARK BACKGROUND Î³Î¹Î± contrastÂ·\n        fontSize: rulerContextSettings?.horizontal?.fontSize ?? 12,Â·\n        // Extended properties Î±Ï€ÏŒ RulersGridSystemÂ·\n        textColor: rulerContextSettings?.horizontal?.textColor ?? UI_COLORS.WHITE, // âœ… CENTRALIZED WHITE TEXT Î³Î¹Î± visibilityÂ·\n        showLabels: rulerContextSettings?.horizontal?.showLabels ?? true,Â·\n        showUnits: rulerContextSettings?.horizontal?.showUnits ?? true,Â·\n        showBackground: rulerContextSettings?.horizontal?.showBackground ?? true,Â·\n        showMajorTicks: rulerContextSettings?.horizontal?.showMajorTicks ?? true,Â·\n        showMinorTicks: rulerContextSettings?.horizontal?.showMinorTicks ?? true,Â·\n        majorTickColor: rulerContextSettings?.horizontal?.majorTickColor ?? UI_COLORS.WHITE, // âœ… CENTRALIZED WHITE TICKSÂ·\n        minorTickColor: rulerContextSettings?.horizontal?.minorTickColor ?? UI_COLORS.LIGHT_GRAY, // âœ… CENTRALIZED LIGHT GRAY MINOR TICKSÂ·\n        majorTickLength: rulerContextSettings?.horizontal?.majorTickLength ?? 10,Â·\n        minorTickLength: rulerContextSettings?.horizontal?.minorTickLength ?? 5,Â·\n        height: rulerContextSettings?.horizontal?.height ?? 30,Â·\n        width: rulerContextSettings?.vertical?.width ?? 30,Â·\n        position: rulerContextSettings?.horizontal?.position ?? 'bottom',Â·\n        // ðŸ”º MISSING UNITS SETTINGS - Î£ÏÎ½Î´ÎµÏƒÎ· Î¼Îµ floating panelÂ·\n        unitsFontSize: rulerContextSettings?.horizontal?.unitsFontSize ?? 10,Â·\n        unitsColor: rulerContextSettings?.horizontal?.unitsColor ?? UI_COLORS.WHITE // âœ… CENTRALIZED WHITE UNITS TEXTÂ·\n      };Â·Â·Â·\n      const {Â·\n        activeTool,Â·\n        showGrid,Â·\n        showLayers, // âœ… Î¥Î Î‘Î¡Î§ÎŸÎ SYSTEM: Layer visibility Î±Ï€Î¿ useDxfViewerStateÂ·\n        overlayMode = 'select',Â·\n        currentStatus = 'for-sale',Â·\n        currentKind = 'unit',Â·\n        ...restPropsÂ·\n      } = props;Â·Â·Â·\n      // âœ… LAYER VISIBILITY: Show LayerCanvas controlled by debug toggleÂ·\n      const showLayerCanvas = showLayerCanvasDebug; // Debug toggleableÂ·Â·Â·\n      // âœ… CONVERT RulersGridSystem grid settings to Canvas V2 GridSettings formatÂ·\n      // RulersGridSystem uses: gridSettings.visual.colorÂ·\n      // Canvas GridRenderer uses: gridSettings.colorÂ·\n      const gridSettings: GridSettings = {Â·\n        // Enabled state: Î Î¡Î©Î¤Î‘ Î±Ï€ÏŒ panel, Î¼ÎµÏ„Î¬ toolbar fallback, Ï„Î­Î»Î¿Ï‚ Î Î‘ÎÎ¤Î‘ true Î³Î¹Î± stabilityÂ·\n        // ðŸ›¡ï¸ NULL GUARD: Ensure grid is always enabled, even if context is temporarily undefined during re-rendersÂ·\n        enabled: gridContextSettings?.visual?.enabled ?? showGrid ?? true,Â·\n        visible: gridContextSettings?.visual?.enabled ?? true, // âœ… VISIBILITY: Controls grid renderingÂ·Â·Â·\n        // âœ… SIZE: Î‘Ï€ÏŒ panel settingsÂ·\n        size: gridContextSettings?.visual?.step ?? 10,Â·Â·Â·\n        // âœ… COLORS: Î‘Ï€ÏŒ panel settings (NOT hardcoded!)Â·\n        color: gridContextSettings?.visual?.color ?? UI_COLORS.BLUE_DEFAULT, // CENTRALIZED default blue Î±Ï€ÏŒ panelÂ·\n        majorGridColor: gridContextSettings?.visual?.majorGridColor ?? UI_COLORS.MEDIUM_GRAY,Â·\n        minorGridColor: gridContextSettings?.visual?.minorGridColor ?? UI_COLORS.LIGHT_GRAY_ALT,Â·Â·Â·\n        // âœ… OPACITY: Î‘Ï€ÏŒ panel settingsÂ·\n        opacity: gridContextSettings?.visual?.opacity ?? 0.6,Â·Â·Â·\n        // âœ… LINE WIDTHS: Î‘Ï€ÏŒ panel settingsÂ·\n        lineWidth: gridContextSettings?.visual?.minorGridWeight ?? 0.5,Â·\n        majorGridWeight: gridContextSettings?.visual?.majorGridWeight ?? 1,Â·\n        minorGridWeight: gridContextSettings?.visual?.minorGridWeight ?? 0.5,Â·Â·Â·\n        // âœ… GRID STYLE: Î‘Ï€ÏŒ panel settings (lines/dots/crosses)Â·\n        style: gridContextSettings?.visual?.style ?? 'lines',Â·\n        majorInterval: gridContextSettings?.visual?.subDivisions ?? 5, // Extended property for grid subdivisionsÂ·\n        showMajorGrid: true,Â·\n        showMinorGrid: true,Â·\n        adaptiveOpacity: false, // âŒ DISABLE Î³Î¹Î± Î½Î± Ï†Î±Î¯Î½ÎµÏ„Î±Î¹ Ï€Î¬Î½Ï„Î±Â·\n        minVisibleSize: 0 // âœ… ALWAYS SHOW regardless of zoomÂ·\n      };Â·Â·Â·\n      // ðŸ”§ Grid major interval for ruler tick calculationsÂ·\n      const gridMajorInterval = gridContextSettings?.visual?.subDivisions ?? 5;Â·Â·Â·\n      // ðŸ”º SELECTION SETTINGS INTEGRATION - Î£ÏÎ½Î´ÎµÏƒÎ· selection boxes Î¼Îµ floating panelÂ·\n      const selectionSettings: SelectionSettings = {Â·\n        window: {Â·\n          fillColor: cursorSettings.selection.window.fillColor,Â·\n          fillOpacity: cursorSettings.selection.window.fillOpacity,Â·\n          borderColor: cursorSettings.selection.window.borderColor,Â·\n          borderOpacity: cursorSettings.selection.window.borderOpacity,Â·\n          borderStyle: cursorSettings.selection.window.borderStyle,Â·\n          borderWidth: cursorSettings.selection.window.borderWidthÂ·\n        },Â·\n        crossing: {Â·\n          fillColor: cursorSettings.selection.crossing.fillColor,Â·\n          fillOpacity: cursorSettings.selection.crossing.fillOpacity,Â·\n          borderColor: cursorSettings.selection.crossing.borderColor,Â·\n          borderOpacity: cursorSettings.selection.crossing.borderOpacity,Â·\n          borderStyle: cursorSettings.selection.crossing.borderStyle,Â·\n          borderWidth: cursorSettings.selection.crossing.borderWidthÂ·\n        }Â·\n      };Â·Â·Â·\n      // Get overlays for current levelÂ·\n      const currentOverlays = levelManager.currentLevelIdÂ·\n        ? overlayStore.getByLevel(levelManager.currentLevelId)Â·\n        : [];Â·Â·Â·\n      const selectedOverlay = overlayStore.getSelectedOverlay();Â·Â·Â·Â·Â·\n      // === CONVERT OVERLAYS TO CANVAS V2 FORMAT ===Â·\n      const convertToColorLayers = (overlays: any[]): ColorLayer[] => {Â·\n        // Simple debug - only log count and first overlay sample (no infinite re-render)Â·\n        if (overlays.length > 0) {Â·\n          // // console.log('ðŸ” Converting overlays:', {Â·\n          //   count: overlays.length,Â·\n          //   sample: { id: overlays[0].id, hasPolygon: !!overlays[0].polygon }Â·\n          // });Â·\n        }Â·Â·Â·\n        return overlaysÂ·\n          .filter(overlay => overlay.polygon && Array.isArray(overlay.polygon) && overlay.polygon.length >= 3)Â·\n          .map((overlay, index) => {Â·\n            const vertices = overlay.polygon.map((point: [number, number]) => ({ x: point[0], y: point[1] }));Â·Â·Â·\n            // Debug Î³Î¹Î± Ï„Î¿ Ï€ÏÏŽÏ„Î¿ overlayÂ·\n            if (index === 0) {Â·\n              // // console.log('ðŸ” convertToColorLayers - First overlay conversion:', {Â·\n              //   overlayId: overlay.id,Â·\n              //   originalPolygon: overlay.polygon.slice(0, 3), // Î¤Î± Ï€ÏÏŽÏ„Î± 3 pointsÂ·\n              //   convertedVertices: vertices.slice(0, 3), // Î¤Î± Ï€ÏÏŽÏ„Î± 3 verticesÂ·\n              //   color: overlay.color || UI_COLORS.OVERLAY_REDÂ·\n              // });Â·\n            }Â·Â·Â·\n            return {Â·\n              id: overlay.id,Â·\n              name: `Layer ${index + 1}`,Â·\n              color: overlay.color || getStatusColors(overlay.status)?.fill || UI_COLORS.BUTTON_PRIMARY,Â·\n              opacity: overlay.opacity || 0.7,  // Slightly transparent so we can see themÂ·\n              visible: overlay.visible !== false,Â·\n              zIndex: index,Â·\n              polygons: [{Â·\n                id: `polygon_${overlay.id}`,Â·\n                vertices,Â·\n                fillColor: overlay.color || getStatusColors(overlay.status)?.fill || UI_COLORS.BUTTON_PRIMARY,  // Use ÎºÎµÎ½Ï„ÏÎ¹ÎºÎ¬ STATUS_COLORSÂ·\n                strokeColor: overlay.selected ? UI_COLORS.SELECTED_RED : UI_COLORS.BLACK,  // Black stroke for visibilityÂ·\n                strokeWidth: overlay.selected ? 3 : 2,  // Thicker strokeÂ·\n                selected: overlay.id === overlayStore.selectedOverlayIdÂ·\n              }]Â·\n            };Â·\n          });Â·\n      };Â·Â·Â·\n      const colorLayers = convertToColorLayers(currentOverlays);Â·Â·Â·\n      // === ðŸŽ¨ DRAWING SYSTEM ===Â·\n      // useDrawingHandlers Î³Î¹Î± DXF entity drawing (Line, Circle, Rectangle, etc.)Â·\n      const drawingHandlers = useDrawingHandlers(Â·\n        activeTool,Â·\n        (entity) => {Â·\n          // Callback ÏŒÏ„Î±Î½ Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î·Î¸ÎµÎ¯ entityÂ·\n          if (props.handleSceneChange && props.currentScene) {Â·\n            // ðŸŽ¯ TYPE-SAFE: Entity is already properly typed from useDrawingHandlersÂ·\n            const updatedScene = {Â·\n              ...props.currentScene,Â·\n              entities: [...(props.currentScene.entities || []), entity]Â·\n            };Â·\n            props.handleSceneChange(updatedScene);Â·\n          }Â·\n        },Â·\n        (tool) => {Â·\n          // Tool change callbackÂ·\n          if (props.onToolChange) {Â·\n            props.onToolChange(tool);Â·\n          }Â·\n        },Â·\n        props.currentScene ?? undefined // âœ… Convert null to undefined for type compatibilityÂ·\n      );Â·Â·Â·\n      // === ðŸŽ¯ DRAWING HANDLERS REF ===Â·\n      // Î§ÏÎ®ÏƒÎ· ref pattern Î³Î¹Î± Î½Î± Î±Ï€Î¿Ï†ÏÎ³Î¿Ï…Î¼Îµ infinite loops (Bug #1 fix)Â·\n      const drawingHandlersRef = React.useRef(drawingHandlers);Â·\n      React.useEffect(() => {Â·\n        drawingHandlersRef.current = drawingHandlers;Â·\n      }, [drawingHandlers]);Â·Â·Â·\n      // === ðŸš€ AUTO-START DRAWING ===Â·\n      // ÎŒÏ„Î±Î½ ÎµÏ€Î¹Î»Î­Î³ÎµÏ„Î±Î¹ drawing tool, Î¾ÎµÎºÎ¹Î½Î¬ Î±Ï…Ï„ÏŒÎ¼Î±Ï„Î± Ï„Î¿ drawing modeÂ·\n      React.useEffect(() => {Â·\n        const isDrawingTool = activeTool === 'line' || activeTool === 'polyline' ||Â·\n                              activeTool === 'polygon' || activeTool === 'circle' ||Â·\n                              activeTool === 'rectangle'; // âœ… Removed 'arc' - not in ToolType unionÂ·\n        if (isDrawingTool && drawingHandlersRef.current?.startDrawing) {Â·\n          // ðŸŽ¯ TYPE-SAFE: activeTool is already narrowed to drawing tools by if statementÂ·\n          drawingHandlersRef.current.startDrawing(activeTool);Â·\n        }Â·\n      }, [activeTool]);Â·Â·Â·\n      // === CONVERT SCENE TO CANVAS V2 FORMAT ===Â·\n      const dxfScene: DxfScene | null = props.currentScene ? {Â·\n        entities: [Â·\n          ...(props.currentScene.entities?.map((entity): DxfEntityUnion | null => {Â·\n            // Get layer color informationÂ·\n            const layerInfo = entity.layer ? props.currentScene?.layers?.[entity.layer] : null;Â·Â·Â·\n            // Convert SceneEntity to DxfEntityUnionÂ·\n            const base = {Â·\n              id: entity.id,Â·\n              layer: entity.layer || 'default',Â·\n              color: String(entity.color || layerInfo?.color || UI_COLORS.WHITE), // âœ… ENTERPRISE FIX: Ensure string typeÂ·\n              lineWidth: entity.lineweight || 1,Â·\n              visible: entity.visible ?? true // âœ… ENTERPRISE FIX: Default to true if undefinedÂ·\n            };Â·Â·Â·\n            switch (entity.type) {Â·\n              case 'line': {Â·\n                // Type guard: Entity Î¼Îµ type 'line' Î­Ï‡ÎµÎ¹ start & endÂ·\n                const lineEntity = entity as typeof entity & { start: Point2D; end: Point2D };Â·\n                return { ...base, type: 'line' as const, start: lineEntity.start, end: lineEntity.end } as DxfEntityUnion;Â·\n              }Â·\n              case 'circle': {Â·\n                // Type guard: Entity Î¼Îµ type 'circle' Î­Ï‡ÎµÎ¹ center & radiusÂ·\n                const circleEntity = entity as typeof entity & { center: Point2D; radius: number };Â·\n                return { ...base, type: 'circle' as const, center: circleEntity.center, radius: circleEntity.radius } as DxfEntityUnion;Â·\n              }Â·\n              case 'polyline': {Â·\n                // Type guard: Entity Î¼Îµ type 'polyline' Î­Ï‡ÎµÎ¹ vertices & closedÂ·\n                const polylineEntity = entity as typeof entity & { vertices: Point2D[]; closed: boolean };Â·\n                return { ...base, type: 'polyline' as const, vertices: polylineEntity.vertices, closed: polylineEntity.closed } as DxfEntityUnion;Â·\n              }Â·\n              case 'arc': {Â·\n                // Type guard: Entity Î¼Îµ type 'arc' Î­Ï‡ÎµÎ¹ center, radius, startAngle, endAngleÂ·\n                const arcEntity = entity as typeof entity & { center: Point2D; radius: number; startAngle: number; endAngle: number };Â·\n                return { ...base, type: 'arc' as const, center: arcEntity.center, radius: arcEntity.radius, startAngle: arcEntity.startAngle, endAngle: arcEntity.endAngle } as DxfEntityUnion;Â·\n              }Â·\n              case 'text': {Â·\n                // â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—Â·\n                // â•‘ âš ï¸ VERIFIED WORKING (2026-01-03) - ÎœÎ—Î Î‘Î›Î›Î‘ÎžÎ•Î¤Î•!                   â•‘Â·\n                // â•‘ height || fontSize || 12 ÎµÎ¯Î½Î±Î¹ Î· Î£Î©Î£Î¤Î— ÏƒÎµÎ¹ÏÎ¬ Ï€ÏÎ¿Ï„ÎµÏÎ±Î¹ÏŒÏ„Î·Ï„Î±Ï‚       â•‘Â·\n                // â•‘ ÎœÎ—Î Î±Î»Î»Î¬Î¾ÎµÏ„Îµ ÏƒÎµ fontSize || height - Î§Î‘Î›Î‘Î•Î™ Ï„Î± ÎºÎµÎ¯Î¼ÎµÎ½Î±!           â•‘Â·\n                // â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•Â·\n                const textEntity = entity as typeof entity & { position: Point2D; text: string; fontSize?: number; height?: number; rotation?: number };Â·\n                const textHeight = textEntity.height || textEntity.fontSize || 12;Â·\n                return { ...base, type: 'text' as const, position: textEntity.position, text: textEntity.text, height: textHeight, rotation: textEntity.rotation } as DxfEntityUnion;Â·\n              }Â·\n              default:Â·\n                console.warn('ðŸ” Unsupported entity type for DxfCanvas:', entity.type);Â·\n                return null;Â·\n            }Â·\n          }).filter(Boolean) as DxfEntityUnion[] || []),Â·\n          // ðŸŽ¯ ADD PREVIEW ENTITY: Include preview entity from drawing state for real-time renderingÂ·\n          ...(drawingHandlers.drawingState.previewEntity ? (() => {Â·\n            const preview = drawingHandlers.drawingState.previewEntity;Â·Â·Â·\n            // Type-safe preview entity mapping based on entity typeÂ·\n            if (preview.type === 'line') {Â·\n              const linePreview = preview as typeof preview & {Â·\n                start: Point2D;Â·\n                end: Point2D;Â·\n                color?: string;Â·\n                lineweight?: numberÂ·\n              };Â·\n              return [{Â·\n                id: linePreview.id,Â·\n                type: 'line' as const,Â·\n                layer: linePreview.layer || '0',Â·\n                color: linePreview.color || UI_COLORS.BRIGHT_GREEN, // Green for previewÂ·\n                lineWidth: linePreview.lineweight || 1,Â·\n                visible: true,Â·\n                start: linePreview.start,Â·\n                end: linePreview.endÂ·\n              }] as DxfEntityUnion[];Â·\n            }Â·Â·Â·\n            // Note: DxfEntityUnion Î´ÎµÎ½ Ï…Ï€Î¿ÏƒÏ„Î·ÏÎ¯Î¶ÎµÎ¹ 'point', 'rectangle', etc - skip Î³Î¹Î± Ï„ÏŽÏÎ±Â·\n            // Î‘Î½ Ï‡ÏÎµÎ¹Î±ÏƒÏ„ÎµÎ¯, Î¸Î± Ï€ÏÎ­Ï€ÎµÎ¹ Î½Î± ÎµÏ€ÎµÎºÏ„Î±Î¸ÎµÎ¯ Ï„Î¿ DxfEntityUnion typeÂ·\n            return [];Â·\n          })() : [])Â·\n        ],Â·\n        layers: Object.keys(props.currentScene.layers || {}), // âœ… FIX: Convert layers object to arrayÂ·\n        bounds: props.currentScene.bounds // âœ… FIX: Use actual bounds from sceneÂ·\n      } : null;Â·Â·Â·\n      // ðŸ” DEBUG - Check if DXF scene has entities and auto-fit to viewÂ·\n      React.useEffect(() => {Â·\n        if (dxfScene && dxfScene.entities.length > 0) {Â·\n          // DxfScene loaded with entities - debug disabled for performanceÂ·Â·Â·\n          // âœ… AUTO-FIT TO VIEW - Using new zoom system with DYNAMIC VIEWPORTÂ·\n          if (dxfScene.bounds) {Â·\n            // Auto-fitting DXF to view - debug disabled for performanceÂ·Â·Â·\n            // Get actual canvas dimensions instead of hardcoded valuesÂ·\n            const canvas = dxfCanvasRef.current || overlayCanvasRef.current;Â·\n            if (canvas && canvas instanceof HTMLCanvasElement) {Â·\n              // âœ… ENTERPRISE MIGRATION: Get service from registryÂ·\n              const canvasBounds = serviceRegistry.get('canvas-bounds');Â·\n              const rect = canvasBounds.getBounds(canvas);Â·\n              const viewport = { width: rect.width, height: rect.height };Â·Â·Â·\n              // Use professional zoom system for fit-to-view with actual viewportÂ·\n              // ðŸŽ¯ ENTERPRISE: alignToOrigin=true to position world (0,0) at bottom-left ruler intersectionÂ·\n              zoomSystem.zoomToFit(dxfScene.bounds, viewport, true);Â·\n            } else {Â·\n              // Fallback to container dimensions if canvas not readyÂ·\n              const container = document.querySelector('.relative.w-full.h-full.overflow-hidden');Â·\n              if (container) {Â·\n                // âœ… ÎšÎ•ÎÎ¤Î¡Î™ÎšÎŸÎ ÎŸÎ™Î—Î£Î—: Î§ÏÎ®ÏƒÎ· CanvasBoundsService (works with any element)Â·\n                const rect = container.getBoundingClientRect();Â·\n                // ðŸŽ¯ ENTERPRISE: alignToOrigin=true to position world (0,0) at bottom-left ruler intersectionÂ·\n                zoomSystem.zoomToFit(dxfScene.bounds, { width: rect.width, height: rect.height }, true);Â·\n              }Â·\n            }Â·\n          }Â·\n        } else if (dxfScene) {Â·\n          // console.log('ðŸ” DxfScene loaded but NO entities:', { dxfScene });Â·\n        }Â·\n      }, [props.currentScene]); // Use props instead of derived state to prevent infinite loopÂ·Â·Â·\n      // Use shared overlay handlers to eliminate duplicate codeÂ·\n      const { handleOverlaySelect, handleOverlayEdit, handleOverlayDelete, handleOverlayUpdate } =Â·\n        createOverlayHandlers({Â·\n          setSelectedOverlay: overlayStore.setSelectedOverlay,Â·\n          remove: overlayStore.remove,Â·\n          update: overlayStore.update,Â·\n          getSelectedOverlay: overlayStore.getSelectedOverlay,Â·\n          overlays: overlayStore.overlaysÂ·\n        }, undefined);  // âœ… CanvasSection Î´ÎµÎ½ Î­Ï‡ÎµÎ¹ levelSwitcher, Î¬ÏÎ± Ï€ÎµÏÎ½Î¬Ï‰ undefinedÂ·Â·Â·\n      // âœ… ÎšÎ•ÎÎ¤Î¡Î™ÎšÎŸÎ ÎŸÎ™Î—Î£Î—: FIT TO OVERLAY - Î§ÏÎ®ÏƒÎ· ÎºÎµÎ½Ï„ÏÎ¹ÎºÎ®Ï‚ Ï…Ï€Î·ÏÎµÏƒÎ¯Î±Ï‚ Î±Î½Ï„Î¯ Î³Î¹Î± Î´Î¹Î¬ÏƒÏ€Î±ÏÏ„Î· logicÂ·\n      const fitToOverlay = (overlayId: string) => {Â·\n        const overlay = currentOverlays.find(o => o.id === overlayId);Â·\n        if (!overlay || !overlay.polygon || overlay.polygon.length < 3) {Â·\n          return;Â·\n        }Â·Â·Â·\n        // Calculate bounding box of overlay polygonÂ·\n        const xs = overlay.polygon.map(([x]) => x);Â·\n        const ys = overlay.polygon.map(([, y]) => y);Â·\n        const bounds = {Â·\n          min: { x: Math.min(...xs), y: Math.min(...ys) },Â·\n          max: { x: Math.max(...xs), y: Math.max(...ys) }Â·\n        };Â·Â·Â·\n        // âœ… ENTERPRISE MIGRATION: Get service from registryÂ·\n        const fitToView = serviceRegistry.get('fit-to-view');Â·\n        const viewport = { width: 800, height: 600 }; // Default fallback - should get from actual canvasÂ·\n        const result = fitToView.calculateFitToViewFromBounds(bounds, viewport, { padding: 0.1 });Â·Â·Â·\n        if (result.success && result.transform) {Â·\n          // Apply transform to zoom systemÂ·\n          zoomSystem.setTransform(result.transform);Â·\n        }Â·\n      };Â·Â·Â·Â·Â·\n      // Drawing logicÂ·\n      const handleOverlayClick = (overlayId: string, point: Point2D) => {Â·\n        // console.log('ðŸ” handleOverlayClick called:', { overlayId, point, overlayMode, activeTool });Â·Â·Â·\n        // ðŸš€ PROFESSIONAL CAD: Î‘Ï…Ï„ÏŒÎ¼Î±Ï„Î· ÎµÏ€Î¹Î»Î¿Î³Î® layers ÏŒÏ„Î±Î½ layering tool ÎµÎ¯Î½Î±Î¹ ÎµÎ½ÎµÏÎ³ÏŒÂ·\n        if (activeTool === 'layering' || overlayMode === 'select') {Â·\n          // console.log('ðŸ” Selecting overlay:', overlayId);Â·\n          handleOverlaySelect(overlayId);Â·\n          // ðŸ”§ AUTO FIT TO VIEW - Zoom to selected overlayÂ·\n          // console.log('ðŸ” Calling fitToOverlay in 100ms...');Â·\n          setTimeout(() => {Â·\n            // console.log('ðŸ” Now calling fitToOverlay:', overlayId);Â·\n            fitToOverlay(overlayId);Â·\n          }, 100); // Small delay to ensure selection state updatesÂ·\n        }Â·\n      };Â·Â·Â·\n      const handleCanvasClick = (point: Point2D) => {Â·\n        // âœ… ÎšÎ•ÎÎ¤Î¡Î™ÎšÎŸÎ ÎŸÎ™Î—Î£Î—: Route click to unified drawing system for drawing toolsÂ·\n        const isDrawingTool = activeTool === 'line' || activeTool === 'polyline' || activeTool === 'polygon'Â·\n          || activeTool === 'rectangle' || activeTool === 'circle'; // âœ… Removed 'arc' - not in ToolType unionÂ·Â·Â·\n        if (isDrawingTool && drawingHandlersRef.current) {Â·\n          // ðŸ”¥ FIX: Use ONLY dxfCanvasRef for drawing tools (NOT overlayCanvasRef!)Â·\n          // Drawing tools (Line/Circle/Rectangle) draw on DxfCanvasÂ·\n          // Color layers draw on LayerCanvas (overlayCanvasRef)Â·\n          const canvasElement = dxfCanvasRef.current?.getCanvas?.();Â·\n          if (!canvasElement) {Â·\n            return;Â·\n          }Â·Â·Â·\n          const viewport = { width: canvasElement.clientWidth, height: canvasElement.clientHeight };Â·\n          const worldPoint = CoordinateTransforms.screenToWorld(point, transform, viewport);Â·Â·Â·\n          // Call the centralized drawing handler - USE REF!Â·\n          drawingHandlersRef.current.onDrawingPoint(worldPoint);Â·\n          return;Â·\n        }Â·Â·Â·\n        // âœ… OVERLAY MODE: Use legacy overlay system with draftPolygonÂ·\n        if (overlayMode === 'draw') {Â·\n          // ðŸ”§ Use UNIFIED CoordinateTransforms Î³Î¹Î± consistencyÂ·\n          const canvas = dxfCanvasRef.current || overlayCanvasRef.current;Â·\n          if (!canvas) return;Â·Â·Â·\n          const viewport = { width: canvas.clientWidth, height: canvas.clientHeight };Â·\n          const worldPoint = CoordinateTransforms.screenToWorld(point, transform, viewport);Â·\n          const worldPointArray: [number, number] = [worldPoint.x, worldPoint.y];Â·Â·Â·\n          // console.log('ðŸ” Adding point to draft polygon:', {Â·\n          //   screenPoint: point,Â·\n          //   worldPoint,Â·\n          //   currentDraftLength: draftPolygon.lengthÂ·\n          // });Â·Â·Â·\n          setDraftPolygon(prev => {Â·\n            const newPolygon = [...prev, worldPointArray];Â·\n            // console.log('ðŸ” Draft polygon updated:', {Â·\n            //   oldLength: prev.length,Â·\n            //   newLength: newPolygon.length,Â·\n            //   newPolygon: newPolygon.slice(0, 3) // First 3 pointsÂ·\n            // });Â·\n            return newPolygon;Â·\n          });Â·Â·Â·\n          // Close polygon if clicking near first pointÂ·\n          if (draftPolygon.length >= 3) {Â·\n            const firstPoint = draftPolygon[0];Â·\n            const distance = calculateDistance(Â·\n              { x: worldPointArray[0], y: worldPointArray[1] },Â·\n              { x: firstPoint[0], y: firstPoint[1] }Â·\n            );Â·Â·Â·\n            // console.log('ðŸ” Checking polygon close:', {Â·\n            //   distance,Â·\n            //   threshold: 20 / transform.scale,Â·\n            //   shouldClose: distance < (20 / transform.scale)Â·\n            // });Â·Â·Â·\n            if (distance < (20 / transform.scale)) { // Close threshold adjusted for scaleÂ·\n              // console.log('ðŸ” Closing polygon - finishing drawing');Â·\n              finishDrawing();Â·\n              return;Â·\n            }Â·\n          }Â·\n        } else {Â·\n          // Clicked on empty space - deselectÂ·\n          // console.log('ðŸ” Deselecting overlay (clicked empty space)');Â·\n          handleOverlaySelect(null);Â·\n        }Â·\n      };Â·Â·Â·\n      const finishDrawing = async () => {Â·\n        // Debug disabled to prevent console spamÂ·Â·Â·\n        if (draftPolygon.length >= 3 && levelManager.currentLevelId) {Â·\n          try {Â·\n            const newOverlay = await overlayStore.add({Â·\n              levelId: levelManager.currentLevelId,Â·\n              kind: currentKind,Â·\n              polygon: draftPolygon,Â·\n              status: currentStatus,Â·\n              label: `Overlay ${Date.now()}`, // Temporary labelÂ·\n            });Â·Â·Â·\n            // console.log('ðŸ” New Overlay Created:', newOverlay);Â·Â·Â·\n          } catch (error) {Â·\n            console.error('Failed to create overlay:', error);Â·\n          }Â·\n        }Â·\n        setDraftPolygon([]);Â·\n      };Â·Â·Â·\n      // Handle fit-to-view event from useCanvasOperations fallbackÂ·\n      React.useEffect(() => {Â·\n        const handleFitToView = (e: CustomEvent) => {Â·\n          // ðŸš€ USE COMBINED BOUNDS - DXF + overlaysÂ·\n          // ðŸ¢ FIX (2026-01-04): forceRecalculate=true includes dynamically drawn entitiesÂ·\n          const combinedBounds = createCombinedBounds(dxfScene, colorLayers, true);Â·Â·Â·\n          if (combinedBounds) {Â·\n            const viewport = e.detail?.viewport || { width: 800, height: 600 };Â·Â·Â·\n            try {Â·\n              // ðŸŽ¯ ENTERPRISE: alignToOrigin = true â†’ (0,0) at axis intersection (bottom-left)Â·\n              const zoomResult = zoomSystem.zoomToFit(combinedBounds, viewport, true);Â·Â·Â·\n              // ðŸ”¥ ÎšÎ¡Î™Î£Î™ÎœÎŸ: Î•Ï†Î±ÏÎ¼Î¿Î³Î® Ï„Î¿Ï… Î½Î­Î¿Ï… transform Î¼Îµ null checks + NaN guardsÂ·\n              if (zoomResult && zoomResult.transform) {Â·\n                const { scale, offsetX, offsetY } = zoomResult.transform;Â·Â·Â·\n                // ðŸ›¡ï¸ GUARD: Check for NaN values before applying transformÂ·\n                if (isNaN(scale) || isNaN(offsetX) || isNaN(offsetY)) {Â·\n                  console.error('ðŸš¨ Shift+1 failed: Invalid transform (NaN values)');Â·\n                  return;Â·\n                }Â·Â·Â·\n                setTransform(zoomResult.transform);Â·\n              }Â·\n            } catch (error) {Â·\n              console.error('ðŸš¨ Shift+1 failed:', error);Â·\n            }Â·\n          }Â·\n        };Â·Â·Â·\n        document.addEventListener('canvas-fit-to-view', handleFitToView as EventListener);Â·\n        return () => document.removeEventListener('canvas-fit-to-view', handleFitToView as EventListener);Â·\n      }, [dxfScene, colorLayers, zoomSystem]); // ðŸš€ Include colorLayers Î³Î¹Î± combined boundsÂ·Â·Â·\n      // Handle keyboard shortcuts for drawing and zoomÂ·\n      React.useEffect(() => {Â·\n        const handleKeyDown = (e: KeyboardEvent) => {Â·\n          // Prevent shortcuts when typing in inputsÂ·\n          const target = e.target as HTMLElement;Â·\n          if (target.tagName === 'INPUT' || target.tagName === 'TEXTAREA' || target.contentEditable === 'true') {Â·\n            return;Â·\n          }Â·Â·Â·\n          // âœ… ÎšÎ•ÎÎ¤Î¡Î™ÎšÎŸÎ ÎŸÎ™Î—Î£Î—: Zoom shortcuts Î¼ÎµÏ„Î±ÎºÏŒÎ¼Î¹ÏƒÎ±Î½ ÏƒÏ„Î¿ hooks/useKeyboardShortcuts.tsÂ·\n          // Î•Î´ÏŽ ÎºÏÎ±Ï„Î¬Î¼Îµ ÎœÎŸÎÎŸ local shortcuts Î³Î¹Î± drawing mode (Escape, Enter)Â·Â·Â·\n          switch (e.key) {Â·\n            case 'Escape':Â·\n              setDraftPolygon([]);Â·\n              break;Â·\n            case 'Enter':Â·\n              if (draftPolygon.length >= 3) {Â·\n                finishDrawing();Â·\n              }Â·\n              break;Â·\n          }Â·\n        };Â·Â·Â·\n        window.addEventListener('keydown', handleKeyDown);Â·\n        return () => window.removeEventListener('keydown', handleKeyDown);Â·\n      }, [draftPolygon, finishDrawing]);Â·Â·Â·Â·Â·\n      // âŒ REMOVED: Duplicate zoom handlers - now using centralized zoomSystem.handleKeyboardZoom()Â·\n      // All keyboard zoom is handled through the unified system in the keyboard event handler aboveÂ·Â·Â·\n      return (Â·\n        <>Â·\n          {/* Left Sidebar - REMOVED - FloatingPanelContainer handles this */}Â·Â·Â·\n          {/* Main Canvas Area */}Â·\n          {/* â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—Â·\n              â•‘ âš ï¸ CRITICAL FIX (2026-01-03) - Canvas container backgrounds           â•‘Â·\n              â•‘ ÎœÎ—Î Î Î¡ÎŸÎ£Î˜Î•Î¤Î•Î¤Î• bg-muted Î® PANEL_COLORS.BG_SECONDARY ÎµÎ´ÏŽ!              â•‘Â·\n              â•‘ Î‘Ï…Ï„Î¬ Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î¿ÏÎ½ \\\"Ï€Î­Ï€Î»Î¿\\\" Ï€Î¿Ï… ÎºÎ±Î»ÏÏ€Ï„ÎµÎ¹ Ï„Î± Ï‡ÏÏŽÎ¼Î±Ï„Î± DXF Î¿Î½Ï„Î¿Ï„Î®Ï„Ï‰Î½.       â•‘Â·\n              â•‘ Î¤Î¿ transparent background ÎµÏ€Î¹Ï„ÏÎ­Ï€ÎµÎ¹ ÏƒÏ‰ÏƒÏ„Î® Î±Ï€ÎµÎ¹ÎºÏŒÎ½Î¹ÏƒÎ· canvas.          â•‘Â·\n              â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */}Â·\n          <div className=\\\"flex-1 relative\\\">Â·\n            {/* DEBUG BUTTONS MOVED TO HEADER */}Â·Â·Â·\n            <divÂ·\n              className={`canvas-stack relative w-full h-full ${PANEL_LAYOUT.OVERFLOW.HIDDEN}`}Â·\n              style={{ cursor: 'none' }} // âœ… ADR-008 CAD-GRADE: ALWAYS hide CSS cursor - crosshair is the only cursorÂ·\n            >Â·\n              {/* ðŸ¢ PDF BACKGROUND: Lowest layer in canvas stack (z-[-10]) */}Â·\n              <PdfBackgroundCanvasÂ·\n                imageUrl={pdfImageUrl}Â·\n                pdfTransform={pdfTransform}Â·\n                canvasTransform={transform}Â·\n                viewport={viewport}Â·\n                enabled={pdfEnabled}Â·\n                opacity={pdfOpacity}Â·\n              />Â·Â·Â·\n              {/* ðŸ”º CANVAS V2: Layer Canvas - Background Overlays (Semi-transparent colored layers) */}Â·\n              {showLayerCanvas && (Â·\n                <LayerCanvasÂ·\n                  ref={overlayCanvasRef}Â·\n                  layers={colorLayers}Â·\n                  transform={transform}Â·\n                  viewport={viewport} // âœ… CENTRALIZED: Pass centralized viewportÂ·\n                  activeTool={activeTool} // ðŸ”¥ ÎšÎ¡Î™Î£Î™ÎœÎŸ: Pass activeTool Î³Î¹Î± pan cursorÂ·\n                  layersVisible={showLayers} // âœ… Î¥Î Î‘Î¡Î§ÎŸÎ SYSTEM: Existing layer visibilityÂ·\n                  dxfScene={dxfScene} // ðŸŽ¯ SNAP FIX: Pass DXF scene for snap engine initializationÂ·\n                  enableUnifiedCanvas={true} // âœ… Î•ÎÎ•Î¡Î“ÎŸÎ ÎŸÎ™Î—Î£Î—: Unified event system Î³Î¹Î± debuggingÂ·\n                  data-canvas-type=\\\"layer\\\" // ðŸŽ¯ DEBUG: Identifier Î³Î¹Î± alignment testÂ·\n                  onTransformChange={(newTransform) => {Â·\n                    setTransform(newTransform); // âœ… SYNC: ÎšÎ¿Î¹Î½ÏŒ transform state Î³Î¹Î± LayerCanvasÂ·\n                    zoomSystem.setTransform(newTransform);Â·\n                  }}Â·\n                  onWheelZoom={zoomSystem.handleWheelZoom} // âœ… CONNECT ZOOM SYSTEMÂ·\n                  crosshairSettings={crosshairSettings} // Crosshair Î¼ÏŒÎ½Î¿ Î³Î¹Î± layersÂ·\n                  cursorSettings={cursorCanvasSettings}Â·\n                  snapSettings={snapSettings}Â·\n                  gridSettings={{ ...gridSettings, enabled: false }} // ðŸ”§ FIX: Disable grid in LayerCanvas (now in DxfCanvas)Â·\n                  rulerSettings={{ ...rulerSettings, enabled: false }} // ðŸ”§ FIX: Disable rulers in LayerCanvas (now in DxfCanvas)Â·\n                  selectionSettings={selectionSettings}Â·\n                  onLayerClick={handleOverlayClick}Â·\n                  onCanvasClick={handleCanvasClick}Â·\n                  onMouseMove={(point) => {Â·\n                    setMouseCss(point);Â·\n                    setMouseWorld(point); // TODO: Transform CSS to world coordinatesÂ·\n                    // âœ… Î”Î™ÎŸÎ¡Î˜Î©Î£Î—: ÎšÎ±Î»ÏŽ ÎºÎ±Î¹ Ï„Î¿ props.onMouseMove Î³Î¹Î± cursor-centered zoomÂ·\n                    if (props.onMouseMove) {Â·\n                      // ðŸŽ¯ TYPE-SAFE: Create proper mock event (event not available in this context)Â·\n                      const mockEvent = {Â·\n                        clientX: point.x,Â·\n                        clientY: point.y,Â·\n                        preventDefault: () => {},Â·\n                        stopPropagation: () => {}Â·\n                      } as React.MouseEvent;Â·\n                      props.onMouseMove(point, mockEvent);Â·\n                    }Â·\n                  }}Â·\n                  className={`absolute ${PANEL_LAYOUT.INSET['0']} w-full h-full ${PANEL_LAYOUT.Z_INDEX['0']}`} // ðŸŽ¯ Z-INDEX FIX: LayerCanvas BACKGROUND (z-0)Â·\n                  style={canvasUI.positioning.layers.layerCanvasWithTools(activeTool, crosshairSettings.enabled)}Â·\n                />Â·\n              )}Â·Â·Â·\n              {/* ðŸ”º CANVAS V2: DXF Canvas - Foreground DXF Drawing (Over colored layers) */}Â·\n              {showDxfCanvas && (Â·\n                <DxfCanvasÂ·\n                  ref={dxfCanvasRef}Â·\n                  scene={dxfScene}Â·\n                  transform={transform}Â·\n                  viewport={viewport} // âœ… CENTRALIZED: Pass centralized viewportÂ·\n                  activeTool={activeTool} // ðŸ”¥ ÎšÎ¡Î™Î£Î™ÎœÎŸ: Pass activeTool Î³Î¹Î± pan cursorÂ·\n                  colorLayers={colorLayers} // âœ… FIX: Pass color layers Î³Î¹Î± fit to view boundsÂ·\n                  crosshairSettings={crosshairSettings} // âœ… RESTORED: Crosshair enabledÂ·\n                  gridSettings={gridSettings} // âœ… RESTORED: Grid enabledÂ·\n                  rulerSettings={{Â·\n                    // ðŸ›¡ï¸ NULL GUARD: Ensure rulers are always enabled, even if context is temporarily undefinedÂ·\n                    enabled: (globalRulerSettings?.horizontal?.enabled && globalRulerSettings?.vertical?.enabled) ?? true,Â·\n                    visible: true,Â·\n                    opacity: 1.0,Â·\n                    unit: globalRulerSettings.units as 'mm' | 'cm' | 'm',Â·\n                    color: globalRulerSettings.horizontal.color,Â·\n                    backgroundColor: globalRulerSettings.horizontal.backgroundColor,Â·\n                    fontSize: globalRulerSettings.horizontal.fontSize,Â·\n                    textColor: globalRulerSettings.horizontal.textColor,Â·\n                    height: 30,Â·\n                    width: 30,Â·\n                    showLabels: globalRulerSettings.horizontal.showLabels,Â·\n                    showUnits: globalRulerSettings.horizontal.showUnits,Â·\n                    showBackground: globalRulerSettings.horizontal.showBackground,Â·\n                    showMajorTicks: globalRulerSettings.horizontal.showMajorTicks,Â·\n                    showMinorTicks: true,Â·\n                    majorTickColor: globalRulerSettings.horizontal.color,Â·\n                    minorTickColor: UI_COLORS.BUTTON_SECONDARY,Â·\n                    majorTickLength: 10,Â·\n                    minorTickLength: 5,Â·\n                    tickInterval: gridSettings.size * gridMajorInterval, // âœ… SYNC WITH GRID: Use major grid interval!Â·\n                    unitsFontSize: 10,Â·\n                    unitsColor: globalRulerSettings.horizontal.textColor,Â·\n                    labelPrecision: 1,Â·\n                    borderColor: globalRulerSettings.horizontal.color,Â·\n                    borderWidth: 1Â·\n                  }}Â·\n                  data-canvas-type=\\\"dxf\\\" // ðŸŽ¯ DEBUG: Identifier Î³Î¹Î± alignment testÂ·\n                  className={`absolute ${PANEL_LAYOUT.INSET['0']} w-full h-full ${PANEL_LAYOUT.Z_INDEX['10']}`} // ðŸŽ¯ Z-INDEX FIX: DxfCanvas FOREGROUND (z-10) - Î Î‘ÎÎ© Î±Ï€ÏŒ LayerCanvas!Â·\n                  onCanvasClick={handleCanvasClick} // ðŸŽ¯ FIX: Connect canvas clicks Î³Î¹Î± drawing tools!Â·\n                  onTransformChange={(newTransform) => {Â·\n                    setTransform(newTransform); // âœ… SYNC: ÎšÎ¿Î¹Î½ÏŒ transform state Î³Î¹Î± DxfCanvasÂ·\n                    zoomSystem.setTransform(newTransform);Â·\n                  }}Â·\n                  onWheelZoom={zoomSystem.handleWheelZoom} // âœ… CONNECT ZOOM SYSTEMÂ·\n                  onMouseMove={(screenPos, worldPos) => {Â·\n                    // âœ… Î”Î™ÎŸÎ¡Î˜Î©Î£Î—: Î ÎµÏÎ½Î¬Ï‰ Ï„Î¿ worldPos ÏƒÏ„Î¿ props.onMouseMove Î³Î¹Î± cursor-centered zoomÂ·\n                    // Note: event is not available in this context, so we create a minimal mock eventÂ·\n                    if (props.onMouseMove && worldPos) {Â·\n                      const mockEvent = {Â·\n                        clientX: screenPos.x,Â·\n                        clientY: screenPos.y,Â·\n                        preventDefault: () => {},Â·\n                        stopPropagation: () => {}Â·\n                      } as React.MouseEvent;Â·\n                      props.onMouseMove(worldPos, mockEvent);Â·\n                    }Â·Â·Â·\n                    // âœ… ADR-006 FIX: Update mouseCss/mouseWorld Î³Î¹Î± CrosshairOverlayÂ·\n                    setMouseCss(screenPos);Â·\n                    setMouseWorld(worldPos);Â·Â·Â·\n                    // ðŸŽ¯ FIX: Call onDrawingHover Î³Î¹Î± preview phase renderingÂ·\n                    const isDrawingTool = activeTool === 'line' || activeTool === 'polyline' || activeTool === 'polygon'Â·\n                      || activeTool === 'rectangle' || activeTool === 'circle';Â·Â·Â·\n                    if (isDrawingTool && worldPos && drawingHandlersRef.current?.onDrawingHover) {Â·\n                      drawingHandlersRef.current.onDrawingHover(worldPos);Â·\n                    }Â·\n                  }}Â·\n                />Â·\n              )}Â·Â·Â·\n              {/* âœ… ADR-008: CrosshairOverlay - INTERNAL mouse tracking for pixel-perfect alignment */}Â·\n              {/* ðŸ¢ CAD-GRADE: CrosshairOverlay tracks mouse position internally AND gets size from layout */}Â·\n              <CrosshairOverlayÂ·\n                isActive={crosshairSettings.enabled}Â·\n                // âœ… ADR-008: REMOVED viewport prop - canvas gets actual size from layout via ResizeObserverÂ·\n                rulerMargins={{Â·\n                  left: rulerSettings.width ?? 30,Â·\n                  top: 0,Â·\n                  bottom: 0Â·\n                }}Â·\n                className={`absolute ${PANEL_LAYOUT.POSITION.LEFT_0} ${PANEL_LAYOUT.POSITION.RIGHT_0} ${PANEL_LAYOUT.POSITION.TOP_0} ${PANEL_LAYOUT.Z_INDEX['20']} ${PANEL_LAYOUT.POINTER_EVENTS.NONE}`}Â·\n                style={{ height: `calc(100% - ${rulerSettings.height ?? 30}px)` }}Â·\n              />Â·Â·Â·\n              {/* ðŸŽ¯ SNAP INDICATOR: Visual feedback for snap points (AutoCAD/MicroStation style)Â·\n                  @see docs/features/snapping/SNAP_INDICATOR_LINE.md - Î’Î®Î¼Î± 5: ÎšÎ»Î¹Îº ÎºÎ±Î¹ Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î± Î½Î­Î±Ï‚ Î³ÏÎ±Î¼Î¼Î®Ï‚ */}Â·\n              <SnapIndicatorOverlayÂ·\n                snapResult={currentSnapResult ? {Â·\n                  point: currentSnapResult.snappedPoint,Â·\n                  type: currentSnapResult.activeMode || 'endpoint'Â·\n                } : null}Â·\n                viewport={viewport}Â·\n                canvasRect={dxfCanvasRef.current?.getCanvas?.()?.getBoundingClientRect() ?? null}Â·\n                transform={transform}Â·\n                className={`absolute ${PANEL_LAYOUT.INSET['0']} ${PANEL_LAYOUT.POINTER_EVENTS.NONE} ${PANEL_LAYOUT.Z_INDEX['30']}`}Â·\n              />Â·Â·Â·\n              {/* âœ… ADR-009: RulerCornerBox - Interactive corner box at ruler intersection */}Â·\n              {/* ðŸ¢ CAD-GRADE: Industry standard (AutoCAD/Revit/Blender) corner box with zoom controls */}Â·\n              <RulerCornerBoxÂ·\n                rulerWidth={rulerSettings.width ?? 30}Â·\n                rulerHeight={rulerSettings.height ?? 30}Â·\n                currentScale={transform.scale}Â·\n                backgroundColor={globalRulerSettings.horizontal.backgroundColor}Â·\n                textColor={globalRulerSettings.horizontal.textColor}Â·\n                onZoomToFit={() => {Â·\n                  // âœ… ÎšÎ•ÎÎ¤Î¡Î™ÎšÎŸÎ ÎŸÎ™Î—Î£Î—: Use existing createCombinedBounds for unified boundsÂ·\n                  // ðŸ¢ FIX (2026-01-04): forceRecalculate=true includes dynamically drawn entitiesÂ·\n                  const combinedBounds = createCombinedBounds(dxfScene, colorLayers, true);Â·Â·Â·\n                  // ðŸ” DEBUG: Log bounds and entities (remove after fixing)Â·\n                  console.log('ðŸŽ¯ [ZoomToFit] dxfScene entities:', dxfScene?.entities?.length, dxfScene?.entities);Â·\n                  console.log('ðŸŽ¯ [ZoomToFit] combinedBounds:', combinedBounds);Â·\n                  console.log('ðŸŽ¯ [ZoomToFit] viewport:', viewport);Â·Â·Â·\n                  if (combinedBounds && viewport.width > 0 && viewport.height > 0) {Â·\n                    const result = zoomSystem.zoomToFit(combinedBounds, viewport, true);Â·\n                    console.log('ðŸŽ¯ [ZoomToFit] result:', result);Â·\n                  } else {Â·\n                    console.warn('ðŸš¨ [ZoomToFit] Invalid bounds or viewport!', { combinedBounds, viewport });Â·\n                  }Â·\n                }}Â·\n                onZoom100={() => zoomSystem.zoomTo100()}Â·\n                onZoomIn={() => zoomSystem.zoomIn()}Â·\n                onZoomOut={() => zoomSystem.zoomOut()}Â·\n                onZoomPrevious={() => zoomSystem.zoomPrevious()}Â·\n                onZoomToScale={(scale) => zoomSystem.zoomToScale(scale)}Â·\n                onWheelZoom={(delta) => {Â·\n                  // Convert delta to zoom direction and use cursor-centered zoomÂ·\n                  if (mouseCss) {Â·\n                    zoomSystem.handleWheelZoom(delta, mouseCss);Â·\n                  }Â·\n                }}Â·\n                viewport={viewport}Â·\n                className={PANEL_LAYOUT.Z_INDEX['30']}Â·\n              />Â·\n            </div>Â·\n          </div>Â·Â·Â·Â·Â·\n          {/* Right Sidebar - MOVED TO DxfViewerContent */}Â·\n        </>Â·\n      );Â·\n    };Â·\n    \"\n\n    \u001b[0m \u001b[90m 55 |\u001b[39m\n     \u001b[90m 56 |\u001b[39m         \u001b[90m// Verify previewEntity is spread into entities array\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 57 |\u001b[39m         expect(content)\u001b[33m.\u001b[39mtoContain(\u001b[32m'drawingHandlers.state.previewEntity'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 58 |\u001b[39m         expect(content)\u001b[33m.\u001b[39mtoContain(\u001b[32m'ADD PREVIEW ENTITY'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 59 |\u001b[39m       }\n     \u001b[90m 60 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toContain (src/subapps/dxf-viewer/__tests__/line-drawing-smoke.test.ts:57:25)\n","name":"C:\\Nestor_Pagonis\\src\\subapps\\dxf-viewer\\__tests__\\line-drawing-smoke.test.ts","startTime":1768084864331,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["ðŸ¢ Enterprise Cursorâ†”Crosshair Alignment","Coordinate Reversibility Tests"],"duration":2,"failing":false,"failureDetails":[{}],"failureMessages":["Error: `.each` must be called with an Array or Tagged Template Literal.\n\nInstead was called with: undefined\n\n    at each (C:\\Nestor_Pagonis\\src\\subapps\\dxf-viewer\\__tests__\\cursor-crosshair-alignment.test.ts:160:10)\n    at _dispatchDescribe (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:604:26)\n    at describe (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:572:44)\n    at describe (C:\\Nestor_Pagonis\\src\\subapps\\dxf-viewer\\__tests__\\cursor-crosshair-alignment.test.ts:159:3)\n    at _dispatchDescribe (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:604:26)\n    at describe (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:572:44)\n    at Object.describe (C:\\Nestor_Pagonis\\src\\subapps\\dxf-viewer\\__tests__\\cursor-crosshair-alignment.test.ts:137:1)\n    at Runtime._execModule (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runtime@30.2.0\\node_modules\\jest-runtime\\build\\index.js:1268:24)\n    at Runtime._loadModule (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runtime@30.2.0\\node_modules\\jest-runtime\\build\\index.js:944:12)\n    at Runtime.requireModule (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runtime@30.2.0\\node_modules\\jest-runtime\\build\\index.js:832:12)\n    at jestAdapter (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\runner.js:95:13)\n    at runTestInternal (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\index.js:275:16)\n    at runTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\index.js:343:7)"],"fullName":"ðŸ¢ Enterprise Cursorâ†”Crosshair Alignment Coordinate Reversibility Tests $name: reversibility accuracy","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1768084865033,"status":"failed","title":"$name: reversibility accuracy"},{"ancestorTitles":["ðŸ¢ Enterprise Cursorâ†”Crosshair Alignment","Performance Benchmarks"],"duration":0,"failing":false,"failureDetails":[{}],"failureMessages":["Error: `.each` must be called with an Array or Tagged Template Literal.\n\nInstead was called with: undefined\n\n    at each (C:\\Nestor_Pagonis\\src\\subapps\\dxf-viewer\\__tests__\\cursor-crosshair-alignment.test.ts:198:10)\n    at _dispatchDescribe (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:604:26)\n    at describe (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:572:44)\n    at describe (C:\\Nestor_Pagonis\\src\\subapps\\dxf-viewer\\__tests__\\cursor-crosshair-alignment.test.ts:197:3)\n    at _dispatchDescribe (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:604:26)\n    at describe (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:572:44)\n    at Object.describe (C:\\Nestor_Pagonis\\src\\subapps\\dxf-viewer\\__tests__\\cursor-crosshair-alignment.test.ts:137:1)\n    at Runtime._execModule (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runtime@30.2.0\\node_modules\\jest-runtime\\build\\index.js:1268:24)\n    at Runtime._loadModule (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runtime@30.2.0\\node_modules\\jest-runtime\\build\\index.js:944:12)\n    at Runtime.requireModule (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runtime@30.2.0\\node_modules\\jest-runtime\\build\\index.js:832:12)\n    at jestAdapter (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\runner.js:95:13)\n    at runTestInternal (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\index.js:275:16)\n    at runTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\index.js:343:7)"],"fullName":"ðŸ¢ Enterprise Cursorâ†”Crosshair Alignment Performance Benchmarks $name: 10k coordinate transformations performance","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1768084865036,"status":"failed","title":"$name: 10k coordinate transformations performance"},{"ancestorTitles":["ðŸ¢ Enterprise Cursorâ†”Crosshair Alignment","Edge Cases & Boundary Testing"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ðŸ¢ Enterprise Cursorâ†”Crosshair Alignment Edge Cases & Boundary Testing zero coordinates handling","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084865036,"status":"passed","title":"zero coordinates handling"},{"ancestorTitles":["ðŸ¢ Enterprise Cursorâ†”Crosshair Alignment","Edge Cases & Boundary Testing"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ðŸ¢ Enterprise Cursorâ†”Crosshair Alignment Edge Cases & Boundary Testing negative coordinates handling","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084865039,"status":"passed","title":"negative coordinates handling"},{"ancestorTitles":["ðŸ¢ Enterprise Cursorâ†”Crosshair Alignment","Edge Cases & Boundary Testing"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ðŸ¢ Enterprise Cursorâ†”Crosshair Alignment Edge Cases & Boundary Testing very large coordinates handling","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084865040,"status":"passed","title":"very large coordinates handling"},{"ancestorTitles":["ðŸ¢ Enterprise Cursorâ†”Crosshair Alignment","Edge Cases & Boundary Testing"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ðŸ¢ Enterprise Cursorâ†”Crosshair Alignment Edge Cases & Boundary Testing fractional coordinates precision","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084865041,"status":"passed","title":"fractional coordinates precision"},{"ancestorTitles":["ðŸ¢ Enterprise Cursorâ†”Crosshair Alignment","Cross-Platform Compatibility"],"duration":7,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ðŸ¢ Enterprise Cursorâ†”Crosshair Alignment Cross-Platform Compatibility different viewport sizes","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1768084865042,"status":"passed","title":"different viewport sizes"},{"ancestorTitles":["ðŸ¢ Enterprise Cursorâ†”Crosshair Alignment","Cross-Platform Compatibility"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ðŸ¢ Enterprise Cursorâ†”Crosshair Alignment Cross-Platform Compatibility device pixel ratio simulation","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1768084865049,"status":"passed","title":"device pixel ratio simulation"},{"ancestorTitles":["ðŸ¢ Enterprise Cursorâ†”Crosshair Alignment","Stress Testing"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ðŸ¢ Enterprise Cursorâ†”Crosshair Alignment Stress Testing rapid successive transformations","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084865051,"status":"passed","title":"rapid successive transformations"},{"ancestorTitles":["ðŸ¢ Enterprise Cursorâ†”Crosshair Alignment","Stress Testing"],"duration":8,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ðŸ¢ Enterprise Cursorâ†”Crosshair Alignment Stress Testing memory consistency over time","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084865054,"status":"passed","title":"memory consistency over time"}],"endTime":1768084865097,"message":"  â— ðŸ¢ Enterprise Cursorâ†”Crosshair Alignment â€º Coordinate Reversibility Tests â€º $name: reversibility accuracy\n\n    `.each` must be called with an Array or Tagged Template Literal.\n\n    Instead was called with: undefined\n\n    \u001b[0m \u001b[90m 158 |\u001b[39m\n     \u001b[90m 159 |\u001b[39m   describe(\u001b[32m'Coordinate Reversibility Tests'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 160 |\u001b[39m     test\u001b[33m.\u001b[39meach(scenarios)(\u001b[32m'$name: reversibility accuracy'\u001b[39m\u001b[33m,\u001b[39m (scenario) \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 161 |\u001b[39m       \u001b[36mlet\u001b[39m totalError \u001b[33m=\u001b[39m \u001b[35m0\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 162 |\u001b[39m       \u001b[36mlet\u001b[39m maxError \u001b[33m=\u001b[39m \u001b[35m0\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 163 |\u001b[39m       \u001b[36mlet\u001b[39m passed \u001b[33m=\u001b[39m \u001b[35m0\u001b[39m\u001b[33m;\u001b[39m\u001b[0m\n\n      at each (src/subapps/dxf-viewer/__tests__/cursor-crosshair-alignment.test.ts:160:10)\n      at describe (src/subapps/dxf-viewer/__tests__/cursor-crosshair-alignment.test.ts:159:3)\n      at Object.describe (src/subapps/dxf-viewer/__tests__/cursor-crosshair-alignment.test.ts:137:1)\n\n  â— ðŸ¢ Enterprise Cursorâ†”Crosshair Alignment â€º Performance Benchmarks â€º $name: 10k coordinate transformations performance\n\n    `.each` must be called with an Array or Tagged Template Literal.\n\n    Instead was called with: undefined\n\n    \u001b[0m \u001b[90m 196 |\u001b[39m\n     \u001b[90m 197 |\u001b[39m   describe(\u001b[32m'Performance Benchmarks'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 198 |\u001b[39m     test\u001b[33m.\u001b[39meach(scenarios)(\u001b[32m'$name: 10k coordinate transformations performance'\u001b[39m\u001b[33m,\u001b[39m (scenario) \u001b[33m=>\u001b[39m {\n     \u001b[90m     |\u001b[39m          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 199 |\u001b[39m       \u001b[36mconst\u001b[39m iterations \u001b[33m=\u001b[39m \u001b[35m10000\u001b[39m\u001b[33m;\u001b[39m\n     \u001b[90m 200 |\u001b[39m       \u001b[36mconst\u001b[39m testPoint\u001b[33m:\u001b[39m \u001b[33mPoint2D\u001b[39m \u001b[33m=\u001b[39m { x\u001b[33m:\u001b[39m scenario\u001b[33m.\u001b[39mviewport\u001b[33m.\u001b[39mwidth \u001b[33m*\u001b[39m \u001b[35m0.37\u001b[39m\u001b[33m,\u001b[39m y\u001b[33m:\u001b[39m scenario\u001b[33m.\u001b[39mviewport\u001b[33m.\u001b[39mheight \u001b[33m*\u001b[39m \u001b[35m0.63\u001b[39m }\u001b[33m;\u001b[39m\n     \u001b[90m 201 |\u001b[39m\u001b[0m\n\n      at each (src/subapps/dxf-viewer/__tests__/cursor-crosshair-alignment.test.ts:198:10)\n      at describe (src/subapps/dxf-viewer/__tests__/cursor-crosshair-alignment.test.ts:197:3)\n      at Object.describe (src/subapps/dxf-viewer/__tests__/cursor-crosshair-alignment.test.ts:137:1)\n","name":"C:\\Nestor_Pagonis\\src\\subapps\\dxf-viewer\\__tests__\\cursor-crosshair-alignment.test.ts","startTime":1768084864760,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["DxfGeoTransformService","Calibration"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"DxfGeoTransformService Calibration should calibrate transformation with minimum 3 control points","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1768084865392,"status":"passed","title":"should calibrate transformation with minimum 3 control points"},{"ancestorTitles":["DxfGeoTransformService","Calibration"],"duration":25,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"DxfGeoTransformService Calibration should reject calibration with insufficient control points","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084865397,"status":"passed","title":"should reject calibration with insufficient control points"},{"ancestorTitles":["DxfGeoTransformService","Coordinate Transformation"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"DxfGeoTransformService Coordinate Transformation should transform DXF coordinates to geographic coordinates","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1768084865423,"status":"passed","title":"should transform DXF coordinates to geographic coordinates"},{"ancestorTitles":["DxfGeoTransformService","Coordinate Transformation"],"duration":5,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"DxfGeoTransformService Coordinate Transformation should transform geographic coordinates back to DXF","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1768084865425,"status":"passed","title":"should transform geographic coordinates back to DXF"},{"ancestorTitles":["DxfGeoTransformService","Coordinate Transformation"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"DxfGeoTransformService Coordinate Transformation should handle batch transformation","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1768084865430,"status":"passed","title":"should handle batch transformation"},{"ancestorTitles":["DxfGeoTransformService","Coordinate Transformation"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"DxfGeoTransformService Coordinate Transformation should throw error when transformation not calibrated","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084865432,"status":"passed","title":"should throw error when transformation not calibrated"},{"ancestorTitles":["DxfGeoTransformService","Status and Validation"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"DxfGeoTransformService Status and Validation should report correct transformation status","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084865436,"status":"passed","title":"should report correct transformation status"},{"ancestorTitles":["DxfGeoTransformService","Status and Validation"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"DxfGeoTransformService Status and Validation should validate accuracy within threshold","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084865437,"status":"passed","title":"should validate accuracy within threshold"},{"ancestorTitles":["ControlPointManager","Point Management"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ControlPointManager Point Management should add control point successfully","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1768084865439,"status":"passed","title":"should add control point successfully"},{"ancestorTitles":["ControlPointManager","Point Management"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ControlPointManager Point Management should update control point","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084865441,"status":"passed","title":"should update control point"},{"ancestorTitles":["ControlPointManager","Point Management"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ControlPointManager Point Management should remove control point","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084865442,"status":"passed","title":"should remove control point"},{"ancestorTitles":["ControlPointManager","Point Management"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ControlPointManager Point Management should clear all control points","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084865444,"status":"passed","title":"should clear all control points"},{"ancestorTitles":["ControlPointManager","Validation"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ControlPointManager Validation should validate insufficient control points","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084865445,"status":"passed","title":"should validate insufficient control points"},{"ancestorTitles":["ControlPointManager","Validation"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ControlPointManager Validation should validate good spatial distribution","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084865446,"status":"passed","title":"should validate good spatial distribution"},{"ancestorTitles":["ControlPointManager","Validation"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ControlPointManager Validation should suggest optimal points","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084865448,"status":"passed","title":"should suggest optimal points"},{"ancestorTitles":["ControlPointManager","Persistence"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ControlPointManager Persistence should export and import control points","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1768084865450,"status":"passed","title":"should export and import control points"},{"ancestorTitles":["AccuracyValidator","Accuracy Metrics"],"duration":5,"failing":false,"failureDetails":[{"matcherResult":{"actual":"good","expected":"excellent","message":"expect(received).toBe(expected) // Object.is equality\n\nExpected: \"excellent\"\nReceived: \"good\"","name":"toBe","pass":false}}],"failureMessages":["Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: \"excellent\"\nReceived: \"good\"\n    at Object.toBe (C:\\Nestor_Pagonis\\src\\subapps\\geo-canvas\\__tests__\\DxfGeoTransform.test.ts:287:36)\n    at Promise.finally.completed (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at _runTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\index.js:275:16)\n    at runTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\index.js:343:7)"],"fullName":"AccuracyValidator Accuracy Metrics should calculate basic accuracy metrics","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1768084865452,"status":"failed","title":"should calculate basic accuracy metrics"},{"ancestorTitles":["AccuracyValidator","Accuracy Metrics"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AccuracyValidator Accuracy Metrics should handle transformation with errors","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1768084865458,"status":"passed","title":"should handle transformation with errors"},{"ancestorTitles":["AccuracyValidator","Validation Reports"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AccuracyValidator Validation Reports should generate comprehensive validation report","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"startAt":1768084865459,"status":"passed","title":"should generate comprehensive validation report"},{"ancestorTitles":["AccuracyValidator","Validation Reports"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AccuracyValidator Validation Reports should identify issues in poor quality transformations","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1768084865462,"status":"passed","title":"should identify issues in poor quality transformations"},{"ancestorTitles":["Integration Tests"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Integration Tests should perform complete georeferencing workflow","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1768084865463,"status":"passed","title":"should perform complete georeferencing workflow"}],"endTime":1768084865488,"message":"  â— AccuracyValidator â€º Accuracy Metrics â€º should calculate basic accuracy metrics\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: \"excellent\"\n    Received: \"good\"\n\n    \u001b[0m \u001b[90m 285 |\u001b[39m       expect(metrics\u001b[33m.\u001b[39mmeanError)\u001b[33m.\u001b[39mtoBeCloseTo(\u001b[35m0\u001b[39m\u001b[33m,\u001b[39m \u001b[35m2\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 286 |\u001b[39m       expect(metrics\u001b[33m.\u001b[39mmaxError)\u001b[33m.\u001b[39mtoBeCloseTo(\u001b[35m0\u001b[39m\u001b[33m,\u001b[39m \u001b[35m2\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 287 |\u001b[39m       expect(metrics\u001b[33m.\u001b[39moverallGrade)\u001b[33m.\u001b[39mtoBe(\u001b[32m'excellent'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 288 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 289 |\u001b[39m\n     \u001b[90m 290 |\u001b[39m     it(\u001b[32m'should handle transformation with errors'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toBe (src/subapps/geo-canvas/__tests__/DxfGeoTransform.test.ts:287:36)\n","name":"C:\\Nestor_Pagonis\\src\\subapps\\geo-canvas\\__tests__\\DxfGeoTransform.test.ts","startTime":1768084865129,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["AuditLogger Basic Logging"],"duration":19,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AuditLogger Basic Logging should log a successful operation","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"startAt":1768084865777,"status":"passed","title":"should log a successful operation"},{"ancestorTitles":["AuditLogger Basic Logging"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AuditLogger Basic Logging should log a failed operation with error","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1768084865798,"status":"passed","title":"should log a failed operation with error"},{"ancestorTitles":["AuditLogger Basic Logging"],"duration":6,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AuditLogger Basic Logging should include duration when provided","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084865801,"status":"passed","title":"should include duration when provided"},{"ancestorTitles":["AuditLogger Basic Logging"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AuditLogger Basic Logging should include metadata when provided","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084865807,"status":"passed","title":"should include metadata when provided"},{"ancestorTitles":["AuditLogger Convenience Methods","logSuccess"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AuditLogger Convenience Methods logSuccess should log a successful operation","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1768084865810,"status":"passed","title":"should log a successful operation"},{"ancestorTitles":["AuditLogger Convenience Methods","logError"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AuditLogger Convenience Methods logError should log an error with Error object","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1768084865813,"status":"passed","title":"should log an error with Error object"},{"ancestorTitles":["AuditLogger Convenience Methods","logError"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AuditLogger Convenience Methods logError should log an error with string message","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084865815,"status":"passed","title":"should log an error with string message"},{"ancestorTitles":["AuditLogger Convenience Methods","logLink"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AuditLogger Convenience Methods logLink should log a link operation","invocations":1,"location":null,"numPassingAsserts":9,"retryReasons":[],"startAt":1768084865817,"status":"passed","title":"should log a link operation"},{"ancestorTitles":["AuditLogger Convenience Methods","logLink"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AuditLogger Convenience Methods logLink should log a failed link operation","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1768084865821,"status":"passed","title":"should log a failed link operation"},{"ancestorTitles":["AuditLogger Convenience Methods","logUnlink"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AuditLogger Convenience Methods logUnlink should log an unlink operation","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1768084865823,"status":"passed","title":"should log an unlink operation"},{"ancestorTitles":["AuditLogger Convenience Methods","logRetry"],"duration":7,"failing":false,"failureDetails":[{"matcherResult":{"actual":"ERROR","expected":"WARN","message":"expect(received).toBe(expected) // Object.is equality\n\nExpected: \"WARN\"\nReceived: \"ERROR\"","name":"toBe","pass":false}}],"failureMessages":["Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: \"WARN\"\nReceived: \"ERROR\"\n    at Object.toBe (C:\\Nestor_Pagonis\\src\\services\\entity-linking\\__tests__\\audit.test.ts:209:30)\n    at Promise.finally.completed (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at _runTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\index.js:275:16)\n    at runTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\index.js:343:7)"],"fullName":"AuditLogger Convenience Methods logRetry should log a retry attempt","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084865826,"status":"failed","title":"should log a retry attempt"},{"ancestorTitles":["AuditLogger Buffer Operations","getRecentLogs"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AuditLogger Buffer Operations getRecentLogs should return all logs when no count specified","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084865849,"status":"passed","title":"should return all logs when no count specified"},{"ancestorTitles":["AuditLogger Buffer Operations","getRecentLogs"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AuditLogger Buffer Operations getRecentLogs should return limited logs when count specified","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084865851,"status":"passed","title":"should return limited logs when count specified"},{"ancestorTitles":["AuditLogger Buffer Operations","getLogsByAction"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AuditLogger Buffer Operations getLogsByAction should filter logs by action","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084865853,"status":"passed","title":"should filter logs by action"},{"ancestorTitles":["AuditLogger Buffer Operations","getLogsByAction"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AuditLogger Buffer Operations getLogsByAction should return empty array for non-existent action","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084865856,"status":"passed","title":"should return empty array for non-existent action"},{"ancestorTitles":["AuditLogger Buffer Operations","getLogsByEntity"],"duration":7,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AuditLogger Buffer Operations getLogsByEntity should filter logs by entity","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084865858,"status":"passed","title":"should filter logs by entity"},{"ancestorTitles":["AuditLogger Buffer Operations","getFailedOperations"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AuditLogger Buffer Operations getFailedOperations should return only failed operations","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084865865,"status":"passed","title":"should return only failed operations"},{"ancestorTitles":["AuditLogger Buffer Operations","clearBuffer"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AuditLogger Buffer Operations clearBuffer should clear all logs","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084865869,"status":"passed","title":"should clear all logs"},{"ancestorTitles":["AuditLogger Buffer Operations","exportBuffer"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AuditLogger Buffer Operations exportBuffer should export buffer as JSON string","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084865873,"status":"passed","title":"should export buffer as JSON string"},{"ancestorTitles":["AuditLogger Correlation ID"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AuditLogger Correlation ID should include correlation ID when set","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084865875,"status":"passed","title":"should include correlation ID when set"},{"ancestorTitles":["AuditLogger Correlation ID"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AuditLogger Correlation ID should not include correlation ID when cleared","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084865877,"status":"passed","title":"should not include correlation ID when cleared"},{"ancestorTitles":["AuditLogger Severity"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AuditLogger Severity should set INFO for successful operations","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084865879,"status":"passed","title":"should set INFO for successful operations"},{"ancestorTitles":["AuditLogger Severity"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AuditLogger Severity should set ERROR for failed operations","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084865880,"status":"passed","title":"should set ERROR for failed operations"},{"ancestorTitles":["AuditLogger Severity"],"duration":2,"failing":false,"failureDetails":[{"matcherResult":{"actual":"ERROR","expected":"WARN","message":"expect(received).toBe(expected) // Object.is equality\n\nExpected: \"WARN\"\nReceived: \"ERROR\"","name":"toBe","pass":false}}],"failureMessages":["Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: \"WARN\"\nReceived: \"ERROR\"\n    at Object.toBe (C:\\Nestor_Pagonis\\src\\services\\entity-linking\\__tests__\\audit.test.ts:341:28)\n    at Promise.finally.completed (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at _runTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\index.js:275:16)\n    at runTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\index.js:343:7)"],"fullName":"AuditLogger Severity should set WARN for retry attempts","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1768084865882,"status":"failed","title":"should set WARN for retry attempts"},{"ancestorTitles":["AuditLogger Severity"],"duration":2,"failing":false,"failureDetails":[{"matcherResult":{"actual":"ERROR","expected":"WARN","message":"expect(received).toBe(expected) // Object.is equality\n\nExpected: \"WARN\"\nReceived: \"ERROR\"","name":"toBe","pass":false}}],"failureMessages":["Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: \"WARN\"\nReceived: \"ERROR\"\n    at Object.toBe (C:\\Nestor_Pagonis\\src\\services\\entity-linking\\__tests__\\audit.test.ts:349:28)\n    at Promise.finally.completed (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at _runTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\index.js:275:16)\n    at runTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\index.js:343:7)"],"fullName":"AuditLogger Severity should set WARN for validation failures","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1768084865885,"status":"failed","title":"should set WARN for validation failures"},{"ancestorTitles":["AuditLogger Severity"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AuditLogger Severity should set DEBUG for cache operations","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084865887,"status":"passed","title":"should set DEBUG for cache operations"},{"ancestorTitles":["AuditLogger Configuration"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AuditLogger Configuration should respect enabled setting","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084865889,"status":"passed","title":"should respect enabled setting"},{"ancestorTitles":["AuditLogger Configuration"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AuditLogger Configuration should respect minSeverity setting","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084865892,"status":"passed","title":"should respect minSeverity setting"},{"ancestorTitles":["AuditLogger ID Generation"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AuditLogger ID Generation should generate unique IDs","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084865894,"status":"passed","title":"should generate unique IDs"},{"ancestorTitles":["AuditLogger ID Generation"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"AuditLogger ID Generation should generate IDs with correct prefix","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084865896,"status":"passed","title":"should generate IDs with correct prefix"}],"endTime":1768084865927,"message":"  â— AuditLogger Convenience Methods â€º logRetry â€º should log a retry attempt\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: \"WARN\"\n    Received: \"ERROR\"\n\n    \u001b[0m \u001b[90m 207 |\u001b[39m       expect(entry\u001b[33m.\u001b[39maction)\u001b[33m.\u001b[39mtoBe(\u001b[32m'RETRY_ATTEMPT'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 208 |\u001b[39m       expect(entry\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 209 |\u001b[39m       expect(entry\u001b[33m.\u001b[39mseverity)\u001b[33m.\u001b[39mtoBe(\u001b[32m'WARN'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 210 |\u001b[39m       expect(entry\u001b[33m.\u001b[39mmetadata)\u001b[33m.\u001b[39mtoEqual({\n     \u001b[90m 211 |\u001b[39m         originalAction\u001b[33m:\u001b[39m \u001b[32m'LINK_ENTITY'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 212 |\u001b[39m         attempt\u001b[33m:\u001b[39m \u001b[35m2\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.toBe (src/services/entity-linking/__tests__/audit.test.ts:209:30)\n\n  â— AuditLogger Severity â€º should set WARN for retry attempts\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: \"WARN\"\n    Received: \"ERROR\"\n\n    \u001b[0m \u001b[90m 339 |\u001b[39m       success\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 340 |\u001b[39m     })\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 341 |\u001b[39m     expect(entry\u001b[33m.\u001b[39mseverity)\u001b[33m.\u001b[39mtoBe(\u001b[32m'WARN'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 342 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 343 |\u001b[39m\n     \u001b[90m 344 |\u001b[39m   test(\u001b[32m'should set WARN for validation failures'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toBe (src/services/entity-linking/__tests__/audit.test.ts:341:28)\n\n  â— AuditLogger Severity â€º should set WARN for validation failures\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: \"WARN\"\n    Received: \"ERROR\"\n\n    \u001b[0m \u001b[90m 347 |\u001b[39m       success\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 348 |\u001b[39m     })\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 349 |\u001b[39m     expect(entry\u001b[33m.\u001b[39mseverity)\u001b[33m.\u001b[39mtoBe(\u001b[32m'WARN'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 350 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 351 |\u001b[39m\n     \u001b[90m 352 |\u001b[39m   test(\u001b[32m'should set DEBUG for cache operations'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toBe (src/services/entity-linking/__tests__/audit.test.ts:349:28)\n","name":"C:\\Nestor_Pagonis\\src\\services\\entity-linking\\__tests__\\audit.test.ts","startTime":1768084865524,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["ServiceRegistry","Singleton Pattern"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ServiceRegistry Singleton Pattern should return same instance on multiple calls","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084866268,"status":"passed","title":"should return same instance on multiple calls"},{"ancestorTitles":["ServiceRegistry","Service Registration"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ServiceRegistry Service Registration should register factory services","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1768084866272,"status":"passed","title":"should register factory services"},{"ancestorTitles":["ServiceRegistry","Service Registration"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ServiceRegistry Service Registration should register singleton services","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084866274,"status":"passed","title":"should register singleton services"},{"ancestorTitles":["ServiceRegistry","Service Registration"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ServiceRegistry Service Registration should return false for non-registered services","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084866275,"status":"passed","title":"should return false for non-registered services"},{"ancestorTitles":["ServiceRegistry","Service Retrieval - Lazy Initialization"],"duration":4,"failing":false,"failureDetails":[{"matcherResult":{"actual":true,"expected":false,"message":"expect(received).toBe(expected) // Object.is equality\n\nExpected: false\nReceived: true","name":"toBe","pass":false}}],"failureMessages":["Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: false\nReceived: true\n    at Object.toBe (C:\\Nestor_Pagonis\\src\\subapps\\dxf-viewer\\services\\__tests__\\ServiceRegistry.test.ts:135:37)\n    at Promise.finally.completed (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at _runTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\index.js:275:16)\n    at runTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\index.js:343:7)"],"fullName":"ServiceRegistry Service Retrieval - Lazy Initialization should create service on first access","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1768084866277,"status":"failed","title":"should create service on first access"},{"ancestorTitles":["ServiceRegistry","Service Retrieval - Lazy Initialization"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ServiceRegistry Service Retrieval - Lazy Initialization should return same instance on multiple calls","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084866296,"status":"passed","title":"should return same instance on multiple calls"},{"ancestorTitles":["ServiceRegistry","Service Retrieval - Lazy Initialization"],"duration":9,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ServiceRegistry Service Retrieval - Lazy Initialization should throw error for non-registered service","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084866297,"status":"passed","title":"should throw error for non-registered service"},{"ancestorTitles":["ServiceRegistry","Service Retrieval - Lazy Initialization"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ServiceRegistry Service Retrieval - Lazy Initialization should return singleton instances immediately","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084866306,"status":"passed","title":"should return singleton instances immediately"},{"ancestorTitles":["ServiceRegistry","Service Lifecycle - Reset"],"duration":1,"failing":false,"failureDetails":[{}],"failureMessages":["Error: Service \"fit-to-view\" is not registered in ServiceRegistry\n    at ServiceRegistry.get (C:\\Nestor_Pagonis\\src\\subapps\\dxf-viewer\\services\\ServiceRegistry.ts:178:15)\n    at Object.get (C:\\Nestor_Pagonis\\src\\subapps\\dxf-viewer\\services\\__tests__\\ServiceRegistry.test.ts:178:33)\n    at Promise.finally.completed (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at _runTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\index.js:275:16)\n    at runTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\index.js:343:7)"],"fullName":"ServiceRegistry Service Lifecycle - Reset should reset individual service","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084866308,"status":"failed","title":"should reset individual service"},{"ancestorTitles":["ServiceRegistry","Service Lifecycle - Reset"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ServiceRegistry Service Lifecycle - Reset should reset all services","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1768084866310,"status":"passed","title":"should reset all services"},{"ancestorTitles":["ServiceRegistry","Metadata & Monitoring"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ServiceRegistry Metadata & Monitoring should track service metadata","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1768084866313,"status":"passed","title":"should track service metadata"},{"ancestorTitles":["ServiceRegistry","Metadata & Monitoring"],"duration":1,"failing":false,"failureDetails":[{"matcherResult":{"message":"expect(received).toBeDefined()\n\nReceived: undefined","pass":false}}],"failureMessages":["Error: expect(received).toBeDefined()\n\nReceived: undefined\n    at Object.toBeDefined (C:\\Nestor_Pagonis\\src\\subapps\\dxf-viewer\\services\\__tests__\\ServiceRegistry.test.ts:215:44)\n    at Promise.finally.completed (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at _runTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\index.js:275:16)\n    at runTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\index.js:343:7)"],"fullName":"ServiceRegistry Metadata & Monitoring should measure initialization time","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1768084866315,"status":"failed","title":"should measure initialization time"},{"ancestorTitles":["ServiceRegistry","Metadata & Monitoring"],"duration":22,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ServiceRegistry Metadata & Monitoring should update last accessed time","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084866317,"status":"passed","title":"should update last accessed time"},{"ancestorTitles":["ServiceRegistry","Statistics"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ServiceRegistry Statistics should return registry statistics","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1768084866339,"status":"passed","title":"should return registry statistics"},{"ancestorTitles":["ServiceRegistry","Statistics"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ServiceRegistry Statistics should track individual service stats","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1768084866342,"status":"passed","title":"should track individual service stats"},{"ancestorTitles":["ServiceRegistry","Type Safety"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ServiceRegistry Type Safety should enforce correct service types","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1768084866344,"status":"passed","title":"should enforce correct service types"},{"ancestorTitles":["ServiceRegistry","Performance"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ServiceRegistry Performance should initialize services quickly (< 5ms)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084866346,"status":"passed","title":"should initialize services quickly (< 5ms)"},{"ancestorTitles":["ServiceRegistry","Performance"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ServiceRegistry Performance should retrieve cached services instantly (< 0.1ms)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084866347,"status":"passed","title":"should retrieve cached services instantly (< 0.1ms)"},{"ancestorTitles":["ServiceRegistry","Performance"],"duration":7,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ServiceRegistry Performance should handle multiple service retrievals efficiently","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084866348,"status":"passed","title":"should handle multiple service retrievals efficiently"},{"ancestorTitles":["ServiceRegistry","Cleanup"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ServiceRegistry Cleanup should cleanup all service references","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084866356,"status":"passed","title":"should cleanup all service references"},{"ancestorTitles":["ServiceRegistry","Error Handling"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ServiceRegistry Error Handling should handle invalid service names gracefully","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084866361,"status":"passed","title":"should handle invalid service names gracefully"},{"ancestorTitles":["ServiceRegistry","Error Handling"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ServiceRegistry Error Handling should handle reset of non-initialized service","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084866363,"status":"passed","title":"should handle reset of non-initialized service"},{"ancestorTitles":["ServiceRegistry","Real-World Usage Scenarios"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ServiceRegistry Real-World Usage Scenarios should support dependency injection pattern","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1768084866364,"status":"passed","title":"should support dependency injection pattern"},{"ancestorTitles":["ServiceRegistry","Real-World Usage Scenarios"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ServiceRegistry Real-World Usage Scenarios should support testing with service mocking","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084866365,"status":"passed","title":"should support testing with service mocking"}],"endTime":1768084866390,"message":"  â— ServiceRegistry â€º Service Retrieval - Lazy Initialization â€º should create service on first access\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: false\n    Received: true\n\n    \u001b[0m \u001b[90m 133 |\u001b[39m     it(\u001b[32m'should create service on first access'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\n     \u001b[90m 134 |\u001b[39m       \u001b[36mconst\u001b[39m metadata \u001b[33m=\u001b[39m registry\u001b[33m.\u001b[39mgetMetadata(\u001b[32m'fit-to-view'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 135 |\u001b[39m       expect(metadata\u001b[33m?\u001b[39m\u001b[33m.\u001b[39minitialized)\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 136 |\u001b[39m\n     \u001b[90m 137 |\u001b[39m       \u001b[90m// First access - triggers lazy initialization\u001b[39m\n     \u001b[90m 138 |\u001b[39m       \u001b[36mconst\u001b[39m service \u001b[33m=\u001b[39m registry\u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(\u001b[32m'fit-to-view'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (src/subapps/dxf-viewer/services/__tests__/ServiceRegistry.test.ts:135:37)\n\n  â— ServiceRegistry â€º Service Lifecycle - Reset â€º should reset individual service\n\n    Service \"fit-to-view\" is not registered in ServiceRegistry\n\n    \u001b[0m \u001b[90m 176 |\u001b[39m       \u001b[36mconst\u001b[39m factory \u001b[33m=\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mfactories\u001b[33m.\u001b[39m\u001b[36mget\u001b[39m(name)\u001b[33m;\u001b[39m\n     \u001b[90m 177 |\u001b[39m       \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39mfactory) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 178 |\u001b[39m         \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m`Service \"${name}\" is not registered in ServiceRegistry`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 179 |\u001b[39m       }\n     \u001b[90m 180 |\u001b[39m\n     \u001b[90m 181 |\u001b[39m       service \u001b[33m=\u001b[39m factory() \u001b[36mas\u001b[39m \u001b[33mServiceMap\u001b[39m[\u001b[33mK\u001b[39m]\u001b[33m;\u001b[39m\u001b[0m\n\n      at ServiceRegistry.get (src/subapps/dxf-viewer/services/ServiceRegistry.ts:178:15)\n      at Object.get (src/subapps/dxf-viewer/services/__tests__/ServiceRegistry.test.ts:178:33)\n\n  â— ServiceRegistry â€º Metadata & Monitoring â€º should measure initialization time\n\n    expect(received).toBeDefined()\n\n    Received: undefined\n\n    \u001b[0m \u001b[90m 213 |\u001b[39m       \u001b[36mconst\u001b[39m metadata \u001b[33m=\u001b[39m registry\u001b[33m.\u001b[39mgetMetadata(\u001b[32m'fit-to-view'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 214 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 215 |\u001b[39m       expect(metadata\u001b[33m?\u001b[39m\u001b[33m.\u001b[39minitializationTime)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 216 |\u001b[39m       expect(metadata\u001b[33m?\u001b[39m\u001b[33m.\u001b[39minitializationTime)\u001b[33m.\u001b[39mtoBeGreaterThanOrEqual(\u001b[35m0\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 217 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 218 |\u001b[39m\u001b[0m\n\n      at Object.toBeDefined (src/subapps/dxf-viewer/services/__tests__/ServiceRegistry.test.ts:215:44)\n","name":"C:\\Nestor_Pagonis\\src\\subapps\\dxf-viewer\\services\\__tests__\\ServiceRegistry.test.ts","startTime":1768084866003,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Validation Functions","validateLineWidth"],"duration":5,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Validation Functions validateLineWidth should accept valid line widths","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1768084866729,"status":"passed","title":"should accept valid line widths"},{"ancestorTitles":["Validation Functions","validateLineWidth"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Validation Functions validateLineWidth should clamp invalid line widths","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1768084866735,"status":"passed","title":"should clamp invalid line widths"},{"ancestorTitles":["Validation Functions","validateLineWidth"],"duration":4,"failing":false,"failureDetails":[{"matcherResult":{"actual":1,"expected":5,"message":"expect(received).toBe(expected) // Object.is equality\n\nExpected: 5\nReceived: 1","name":"toBe","pass":false}}],"failureMessages":["Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: 5\nReceived: 1\n    at Object.toBe (C:\\Nestor_Pagonis\\src\\subapps\\dxf-viewer\\settings-core\\__tests__\\validation.test.ts:43:59)\n    at Promise.finally.completed (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at _runTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\index.js:275:16)\n    at runTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\index.js:343:7)"],"fullName":"Validation Functions validateLineWidth should handle non-numeric values","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1768084866736,"status":"failed","title":"should handle non-numeric values"},{"ancestorTitles":["Validation Functions","validateColor"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Validation Functions validateColor should accept valid hex colors","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1768084866776,"status":"passed","title":"should accept valid hex colors"},{"ancestorTitles":["Validation Functions","validateColor"],"duration":16,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Validation Functions validateColor should normalize color formats","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1768084866778,"status":"passed","title":"should normalize color formats"},{"ancestorTitles":["Validation Functions","validateColor"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Validation Functions validateColor should reject invalid colors","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1768084866795,"status":"passed","title":"should reject invalid colors"},{"ancestorTitles":["Validation Functions","validateColor"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Validation Functions validateColor should handle RGB color notation","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084866796,"status":"passed","title":"should handle RGB color notation"},{"ancestorTitles":["Validation Functions","validateFontSize"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Validation Functions validateFontSize should accept valid font sizes","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1768084866798,"status":"passed","title":"should accept valid font sizes"},{"ancestorTitles":["Validation Functions","validateFontSize"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Validation Functions validateFontSize should clamp invalid font sizes","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1768084866799,"status":"passed","title":"should clamp invalid font sizes"},{"ancestorTitles":["Validation Functions","validateFontSize"],"duration":1,"failing":false,"failureDetails":[{"matcherResult":{"actual":14,"expected":16,"message":"expect(received).toBe(expected) // Object.is equality\n\nExpected: 16\nReceived: 14","name":"toBe","pass":false}}],"failureMessages":["Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: 16\nReceived: 14\n    at Object.toBe (C:\\Nestor_Pagonis\\src\\subapps\\dxf-viewer\\settings-core\\__tests__\\validation.test.ts:93:59)\n    at Promise.finally.completed (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at _runTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\index.js:275:16)\n    at runTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\index.js:343:7)"],"fullName":"Validation Functions validateFontSize should handle non-numeric values","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084866800,"status":"failed","title":"should handle non-numeric values"},{"ancestorTitles":["Validation Functions","validateGripSize"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Validation Functions validateGripSize should accept valid grip sizes","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1768084866802,"status":"passed","title":"should accept valid grip sizes"},{"ancestorTitles":["Validation Functions","validateGripSize"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Validation Functions validateGripSize should clamp invalid grip sizes","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084866803,"status":"passed","title":"should clamp invalid grip sizes"},{"ancestorTitles":["Validation Functions","validateLineSettings"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Validation Functions validateLineSettings should validate all line properties","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1768084866804,"status":"passed","title":"should validate all line properties"},{"ancestorTitles":["Validation Functions","validateLineSettings"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Validation Functions validateLineSettings should preserve valid settings","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084866806,"status":"passed","title":"should preserve valid settings"},{"ancestorTitles":["Validation Functions","validateLineSettings"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Validation Functions validateLineSettings should handle partial settings","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1768084866807,"status":"passed","title":"should handle partial settings"},{"ancestorTitles":["Validation Functions","validateTextSettings"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Validation Functions validateTextSettings should validate all text properties","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1768084866809,"status":"passed","title":"should validate all text properties"},{"ancestorTitles":["Validation Functions","validateTextSettings"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Validation Functions validateTextSettings should handle font family validation","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1768084866810,"status":"passed","title":"should handle font family validation"},{"ancestorTitles":["Validation Functions","validateGripSettings"],"duration":1,"failing":false,"failureDetails":[{"matcherResult":{"actual":20,"expected":15,"message":"expect(received).toBe(expected) // Object.is equality\n\nExpected: 15\nReceived: 20","name":"toBe","pass":false}}],"failureMessages":["Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: 15\nReceived: 20\n    at Object.toBe (C:\\Nestor_Pagonis\\src\\subapps\\dxf-viewer\\settings-core\\__tests__\\validation.test.ts:203:31)\n    at Promise.finally.completed (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at _runTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\index.js:275:16)\n    at runTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\index.js:343:7)"],"fullName":"Validation Functions validateGripSettings should validate all grip properties","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1768084866815,"status":"failed","title":"should validate all grip properties"},{"ancestorTitles":["Validation Functions","validateGripSettings"],"duration":0,"failing":false,"failureDetails":[{"matcherResult":{"actual":5,"expected":7,"message":"expect(received).toBe(expected) // Object.is equality\n\nExpected: 7\nReceived: 5","name":"toBe","pass":false}}],"failureMessages":["Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: 7\nReceived: 5\n    at Object.toBe (C:\\Nestor_Pagonis\\src\\subapps\\dxf-viewer\\settings-core\\__tests__\\validation.test.ts:215:31)\n    at Promise.finally.completed (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at _runTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\index.js:275:16)\n    at runTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\index.js:343:7)"],"fullName":"Validation Functions validateGripSettings should apply AutoCAD grip standards","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1768084866817,"status":"failed","title":"should apply AutoCAD grip standards"},{"ancestorTitles":["Validation Functions","ISO Standards Compliance"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Validation Functions ISO Standards Compliance should enforce ISO 128 line standards","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1768084866818,"status":"passed","title":"should enforce ISO 128 line standards"},{"ancestorTitles":["Validation Functions","ISO Standards Compliance"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Validation Functions ISO Standards Compliance should enforce ISO 3098 text standards","invocations":1,"location":null,"numPassingAsserts":14,"retryReasons":[],"startAt":1768084866819,"status":"passed","title":"should enforce ISO 3098 text standards"},{"ancestorTitles":["Validation Functions","Performance"],"duration":93,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Validation Functions Performance should validate large batches efficiently","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084866822,"status":"passed","title":"should validate large batches efficiently"},{"ancestorTitles":["Validation Functions","Edge Cases"],"duration":2,"failing":false,"failureDetails":[{"matcherResult":{"expected":"solid","message":"expect(received).toBe(expected) // Object.is equality\n\nExpected: \"solid\"\nReceived: undefined","name":"toBe","pass":false}}],"failureMessages":["Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: \"solid\"\nReceived: undefined\n    at Object.toBe (C:\\Nestor_Pagonis\\src\\subapps\\dxf-viewer\\settings-core\\__tests__\\validation.test.ts:274:31)\n    at Promise.finally.completed (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at _runTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\index.js:275:16)\n    at runTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\index.js:343:7)"],"fullName":"Validation Functions Edge Cases should handle undefined properties gracefully","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084866915,"status":"failed","title":"should handle undefined properties gracefully"},{"ancestorTitles":["Validation Functions","Edge Cases"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Validation Functions Edge Cases should handle extreme numeric values","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1768084866918,"status":"passed","title":"should handle extreme numeric values"},{"ancestorTitles":["Validation Functions","Edge Cases"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Validation Functions Edge Cases should handle object inputs","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084866919,"status":"passed","title":"should handle object inputs"}],"endTime":1768084866991,"message":"  â— Validation Functions â€º validateLineWidth â€º should handle non-numeric values\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 5\n    Received: 1\n\n    \u001b[0m \u001b[90m 41 |\u001b[39m       expect(validateLineWidth(\u001b[36mnull\u001b[39m \u001b[36mas\u001b[39m never))\u001b[33m.\u001b[39mtoBe(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 42 |\u001b[39m       expect(validateLineWidth(undefined \u001b[36mas\u001b[39m never))\u001b[33m.\u001b[39mtoBe(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 43 |\u001b[39m       expect(validateLineWidth(\u001b[32m'5'\u001b[39m \u001b[36mas\u001b[39m unknown \u001b[36mas\u001b[39m number))\u001b[33m.\u001b[39mtoBe(\u001b[35m5\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// String conversion\u001b[39m\n     \u001b[90m    |\u001b[39m                                                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 44 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 45 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 46 |\u001b[39m\u001b[0m\n\n      at Object.toBe (src/subapps/dxf-viewer/settings-core/__tests__/validation.test.ts:43:59)\n\n  â— Validation Functions â€º validateFontSize â€º should handle non-numeric values\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 16\n    Received: 14\n\n    \u001b[0m \u001b[90m 91 |\u001b[39m       expect(validateFontSize(\u001b[33mNaN\u001b[39m))\u001b[33m.\u001b[39mtoBe(\u001b[35m14\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// Default\u001b[39m\n     \u001b[90m 92 |\u001b[39m       expect(validateFontSize(\u001b[36mnull\u001b[39m \u001b[36mas\u001b[39m never))\u001b[33m.\u001b[39mtoBe(\u001b[35m14\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 93 |\u001b[39m       expect(validateFontSize(\u001b[32m'16'\u001b[39m \u001b[36mas\u001b[39m unknown \u001b[36mas\u001b[39m number))\u001b[33m.\u001b[39mtoBe(\u001b[35m16\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                                           \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 94 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 95 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 96 |\u001b[39m\u001b[0m\n\n      at Object.toBe (src/subapps/dxf-viewer/settings-core/__tests__/validation.test.ts:93:59)\n\n  â— Validation Functions â€º validateGripSettings â€º should validate all grip properties\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 15\n    Received: 20\n\n    \u001b[0m \u001b[90m 201 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m validateGripSettings(input)\u001b[33m;\u001b[39m\n     \u001b[90m 202 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 203 |\u001b[39m       expect(result\u001b[33m.\u001b[39mgripSize)\u001b[33m.\u001b[39mtoBe(\u001b[35m15\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// Max size (clamped to 3-15 range)\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 204 |\u001b[39m       expect(result\u001b[33m.\u001b[39mcolors\u001b[33m.\u001b[39mcold)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m \u001b[90m// Colors object exists\u001b[39m\n     \u001b[90m 205 |\u001b[39m       expect(result\u001b[33m.\u001b[39mcolors\u001b[33m.\u001b[39mwarm)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m \u001b[90m// Colors object exists\u001b[39m\n     \u001b[90m 206 |\u001b[39m       expect(result\u001b[33m.\u001b[39mcolors\u001b[33m.\u001b[39mhot)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m \u001b[90m// Colors object exists\u001b[39m\u001b[0m\n\n      at Object.toBe (src/subapps/dxf-viewer/settings-core/__tests__/validation.test.ts:203:31)\n\n  â— Validation Functions â€º validateGripSettings â€º should apply AutoCAD grip standards\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 7\n    Received: 5\n\n    \u001b[0m \u001b[90m 213 |\u001b[39m\n     \u001b[90m 214 |\u001b[39m       \u001b[90m// Check AutoCAD defaults\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 215 |\u001b[39m       expect(result\u001b[33m.\u001b[39mgripSize)\u001b[33m.\u001b[39mtoBe(\u001b[35m7\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// Standard AutoCAD grip size\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 216 |\u001b[39m       expect(result\u001b[33m.\u001b[39mcolors\u001b[33m.\u001b[39mcold)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m \u001b[90m// AutoCAD blue for cold grips\u001b[39m\n     \u001b[90m 217 |\u001b[39m       expect(result\u001b[33m.\u001b[39mapertureSize)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m \u001b[90m// AutoCAD aperture size\u001b[39m\n     \u001b[90m 218 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.toBe (src/subapps/dxf-viewer/settings-core/__tests__/validation.test.ts:215:31)\n\n  â— Validation Functions â€º Edge Cases â€º should handle undefined properties gracefully\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: \"solid\"\n    Received: undefined\n\n    \u001b[0m \u001b[90m 272 |\u001b[39m       expect(result\u001b[33m.\u001b[39mlineWidth)\u001b[33m.\u001b[39mtoBe(\u001b[33mDEFAULT_LINE_SETTINGS\u001b[39m\u001b[33m.\u001b[39mlineWidth)\u001b[33m;\u001b[39m\n     \u001b[90m 273 |\u001b[39m       expect(result\u001b[33m.\u001b[39mcolor)\u001b[33m.\u001b[39mtoBe(\u001b[33mDEFAULT_LINE_SETTINGS\u001b[39m\u001b[33m.\u001b[39mcolor)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 274 |\u001b[39m       expect(result\u001b[33m.\u001b[39mlineType)\u001b[33m.\u001b[39mtoBe(\u001b[33mDEFAULT_LINE_SETTINGS\u001b[39m\u001b[33m.\u001b[39mlineType)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 275 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 276 |\u001b[39m\n     \u001b[90m 277 |\u001b[39m     it(\u001b[32m'should handle extreme numeric values'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.toBe (src/subapps/dxf-viewer/settings-core/__tests__/validation.test.ts:274:31)\n","name":"C:\\Nestor_Pagonis\\src\\subapps\\dxf-viewer\\settings-core\\__tests__\\validation.test.ts","startTime":1768084866436,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Override Engine","mergeSettings"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Override Engine mergeSettings should return base when no override","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084867506,"status":"passed","title":"should return base when no override"},{"ancestorTitles":["Override Engine","mergeSettings"],"duration":5,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Override Engine mergeSettings should merge override into base","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1768084867510,"status":"passed","title":"should merge override into base"},{"ancestorTitles":["Override Engine","mergeSettings"],"duration":22,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Override Engine mergeSettings should handle empty override","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084867515,"status":"passed","title":"should handle empty override"},{"ancestorTitles":["Override Engine","mergeDxfSettings"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Override Engine mergeDxfSettings should merge all setting categories","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1768084867539,"status":"passed","title":"should merge all setting categories"},{"ancestorTitles":["Override Engine","mergeDxfSettings"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Override Engine mergeDxfSettings should handle partial overrides","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1768084867541,"status":"passed","title":"should handle partial overrides"},{"ancestorTitles":["Override Engine","mergeDxfSettings"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Override Engine mergeDxfSettings should handle null/undefined override","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084867543,"status":"passed","title":"should handle null/undefined override"},{"ancestorTitles":["Override Engine","diffSettings"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Override Engine diffSettings should detect no differences","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084867544,"status":"passed","title":"should detect no differences"},{"ancestorTitles":["Override Engine","diffSettings"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Override Engine diffSettings should detect differences","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084867545,"status":"passed","title":"should detect differences"},{"ancestorTitles":["Override Engine","diffSettings"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Override Engine diffSettings should ignore unchanged properties","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084867547,"status":"passed","title":"should ignore unchanged properties"},{"ancestorTitles":["Override Engine","extractOverrides"],"duration":11,"failing":false,"failureDetails":[{"matcherResult":{"actual":{"line":{"enabled":true,"lineType":"solid","lineWidth":1,"color":"#123456","opacity":1,"dashScale":1,"dashOffset":0,"lineCap":"butt","lineJoin":"miter","breakAtCenter":false,"hoverColor":"#ffff00","hoverType":"solid","hoverWidth":1,"hoverOpacity":0.8,"finalColor":"#00ff00","finalType":"solid","finalWidth":1,"finalOpacity":1,"activeTemplate":null},"text":{"enabled":true,"fontFamily":"Arial","fontSize":20,"fontWeight":400,"fontStyle":"normal","color":"#FFFFFF","opacity":1,"letterSpacing":0,"lineHeight":1.2,"textAlign":"left","textBaseline":"alphabetic","isBold":false,"isItalic":false,"isUnderline":false,"isStrikethrough":false,"isSuperscript":false,"isSubscript":false,"shadowEnabled":false,"shadowOffsetX":0,"shadowOffsetY":0,"shadowBlur":0,"shadowColor":"#000000","strokeEnabled":false,"strokeWidth":1,"strokeColor":"#000000","backgroundEnabled":false,"backgroundColor":"#000000","backgroundPadding":4,"activeTemplate":null}},"expected":{"line":{"color":"#123456"},"text":{"fontSize":20}},"message":"expect(received).toEqual(expected) // deep equality\n\n- Expected  -  0\n+ Received  + 46\n\n  Object {\n    \"line\": Object {\n+     \"activeTemplate\": null,\n+     \"breakAtCenter\": false,\n      \"color\": \"#123456\",\n+     \"dashOffset\": 0,\n+     \"dashScale\": 1,\n+     \"enabled\": true,\n+     \"finalColor\": \"#00ff00\",\n+     \"finalOpacity\": 1,\n+     \"finalType\": \"solid\",\n+     \"finalWidth\": 1,\n+     \"hoverColor\": \"#ffff00\",\n+     \"hoverOpacity\": 0.8,\n+     \"hoverType\": \"solid\",\n+     \"hoverWidth\": 1,\n+     \"lineCap\": \"butt\",\n+     \"lineJoin\": \"miter\",\n+     \"lineType\": \"solid\",\n+     \"lineWidth\": 1,\n+     \"opacity\": 1,\n    },\n    \"text\": Object {\n+     \"activeTemplate\": null,\n+     \"backgroundColor\": \"#000000\",\n+     \"backgroundEnabled\": false,\n+     \"backgroundPadding\": 4,\n+     \"color\": \"#FFFFFF\",\n+     \"enabled\": true,\n+     \"fontFamily\": \"Arial\",\n      \"fontSize\": 20,\n+     \"fontStyle\": \"normal\",\n+     \"fontWeight\": 400,\n+     \"isBold\": false,\n+     \"isItalic\": false,\n+     \"isStrikethrough\": false,\n+     \"isSubscript\": false,\n+     \"isSuperscript\": false,\n+     \"isUnderline\": false,\n+     \"letterSpacing\": 0,\n+     \"lineHeight\": 1.2,\n+     \"opacity\": 1,\n+     \"shadowBlur\": 0,\n+     \"shadowColor\": \"#000000\",\n+     \"shadowEnabled\": false,\n+     \"shadowOffsetX\": 0,\n+     \"shadowOffsetY\": 0,\n+     \"strokeColor\": \"#000000\",\n+     \"strokeEnabled\": false,\n+     \"strokeWidth\": 1,\n+     \"textAlign\": \"left\",\n+     \"textBaseline\": \"alphabetic\",\n    },\n  }","name":"toEqual","pass":false}}],"failureMessages":["Error: expect(received).toEqual(expected) // deep equality\n\n- Expected  -  0\n+ Received  + 46\n\n  Object {\n    \"line\": Object {\n+     \"activeTemplate\": null,\n+     \"breakAtCenter\": false,\n      \"color\": \"#123456\",\n+     \"dashOffset\": 0,\n+     \"dashScale\": 1,\n+     \"enabled\": true,\n+     \"finalColor\": \"#00ff00\",\n+     \"finalOpacity\": 1,\n+     \"finalType\": \"solid\",\n+     \"finalWidth\": 1,\n+     \"hoverColor\": \"#ffff00\",\n+     \"hoverOpacity\": 0.8,\n+     \"hoverType\": \"solid\",\n+     \"hoverWidth\": 1,\n+     \"lineCap\": \"butt\",\n+     \"lineJoin\": \"miter\",\n+     \"lineType\": \"solid\",\n+     \"lineWidth\": 1,\n+     \"opacity\": 1,\n    },\n    \"text\": Object {\n+     \"activeTemplate\": null,\n+     \"backgroundColor\": \"#000000\",\n+     \"backgroundEnabled\": false,\n+     \"backgroundPadding\": 4,\n+     \"color\": \"#FFFFFF\",\n+     \"enabled\": true,\n+     \"fontFamily\": \"Arial\",\n      \"fontSize\": 20,\n+     \"fontStyle\": \"normal\",\n+     \"fontWeight\": 400,\n+     \"isBold\": false,\n+     \"isItalic\": false,\n+     \"isStrikethrough\": false,\n+     \"isSubscript\": false,\n+     \"isSuperscript\": false,\n+     \"isUnderline\": false,\n+     \"letterSpacing\": 0,\n+     \"lineHeight\": 1.2,\n+     \"opacity\": 1,\n+     \"shadowBlur\": 0,\n+     \"shadowColor\": \"#000000\",\n+     \"shadowEnabled\": false,\n+     \"shadowOffsetX\": 0,\n+     \"shadowOffsetY\": 0,\n+     \"strokeColor\": \"#000000\",\n+     \"strokeEnabled\": false,\n+     \"strokeWidth\": 1,\n+     \"textAlign\": \"left\",\n+     \"textBaseline\": \"alphabetic\",\n    },\n  }\n    at Object.toEqual (C:\\Nestor_Pagonis\\src\\subapps\\dxf-viewer\\settings-core\\__tests__\\override.test.ts:164:25)\n    at Promise.finally.completed (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at _runTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\index.js:275:16)\n    at runTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\index.js:343:7)"],"fullName":"Override Engine extractOverrides should extract all overrides from entity settings","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1768084867548,"status":"failed","title":"should extract all overrides from entity settings"},{"ancestorTitles":["Override Engine","extractOverrides"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Override Engine extractOverrides should return null when no overrides","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084867613,"status":"passed","title":"should return null when no overrides"},{"ancestorTitles":["Override Engine","hasOverrides"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Override Engine hasOverrides should detect when overrides exist","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1768084867614,"status":"passed","title":"should detect when overrides exist"},{"ancestorTitles":["Override Engine","hasOverrides"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Override Engine hasOverrides should check all categories","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084867616,"status":"passed","title":"should check all categories"},{"ancestorTitles":["Override Engine","cleanEmptyOverrides"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Override Engine cleanEmptyOverrides should remove empty override objects","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084867617,"status":"passed","title":"should remove empty override objects"},{"ancestorTitles":["Override Engine","cleanEmptyOverrides"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Override Engine cleanEmptyOverrides should return null when all empty","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084867618,"status":"passed","title":"should return null when all empty"},{"ancestorTitles":["Override Engine","cleanEmptyOverrides"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Override Engine cleanEmptyOverrides should handle null/undefined","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084867619,"status":"passed","title":"should handle null/undefined"},{"ancestorTitles":["Override Engine","applyOverridesToBase"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Override Engine applyOverridesToBase should apply multiple overrides in sequence","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1768084867619,"status":"passed","title":"should apply multiple overrides in sequence"},{"ancestorTitles":["Override Engine","applyOverridesToBase"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Override Engine applyOverridesToBase should handle empty overrides array","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084867621,"status":"passed","title":"should handle empty overrides array"},{"ancestorTitles":["Override Engine","applyOverridesToBase"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Override Engine applyOverridesToBase should skip null/undefined overrides","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084867622,"status":"passed","title":"should skip null/undefined overrides"},{"ancestorTitles":["Override Engine","Performance"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Override Engine Performance should handle large override sets efficiently","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084867623,"status":"passed","title":"should handle large override sets efficiently"},{"ancestorTitles":["Override Engine","Performance"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Override Engine Performance should use reference equality for unchanged objects","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1768084867626,"status":"passed","title":"should use reference equality for unchanged objects"},{"ancestorTitles":["Override Engine","Edge Cases"],"duration":5,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Override Engine Edge Cases should handle recursive overrides","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084867627,"status":"passed","title":"should handle recursive overrides"},{"ancestorTitles":["Override Engine","Edge Cases"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Override Engine Edge Cases should handle circular references gracefully","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084867633,"status":"passed","title":"should handle circular references gracefully"}],"endTime":1768084867651,"message":"  â— Override Engine â€º extractOverrides â€º should extract all overrides from entity settings\n\n    expect(received).toEqual(expected) // deep equality\n\n    - Expected  -  0\n    + Received  + 46\n\n      Object {\n        \"line\": Object {\n    +     \"activeTemplate\": null,\n    +     \"breakAtCenter\": false,\n          \"color\": \"#123456\",\n    +     \"dashOffset\": 0,\n    +     \"dashScale\": 1,\n    +     \"enabled\": true,\n    +     \"finalColor\": \"#00ff00\",\n    +     \"finalOpacity\": 1,\n    +     \"finalType\": \"solid\",\n    +     \"finalWidth\": 1,\n    +     \"hoverColor\": \"#ffff00\",\n    +     \"hoverOpacity\": 0.8,\n    +     \"hoverType\": \"solid\",\n    +     \"hoverWidth\": 1,\n    +     \"lineCap\": \"butt\",\n    +     \"lineJoin\": \"miter\",\n    +     \"lineType\": \"solid\",\n    +     \"lineWidth\": 1,\n    +     \"opacity\": 1,\n        },\n        \"text\": Object {\n    +     \"activeTemplate\": null,\n    +     \"backgroundColor\": \"#000000\",\n    +     \"backgroundEnabled\": false,\n    +     \"backgroundPadding\": 4,\n    +     \"color\": \"#FFFFFF\",\n    +     \"enabled\": true,\n    +     \"fontFamily\": \"Arial\",\n          \"fontSize\": 20,\n    +     \"fontStyle\": \"normal\",\n    +     \"fontWeight\": 400,\n    +     \"isBold\": false,\n    +     \"isItalic\": false,\n    +     \"isStrikethrough\": false,\n    +     \"isSubscript\": false,\n    +     \"isSuperscript\": false,\n    +     \"isUnderline\": false,\n    +     \"letterSpacing\": 0,\n    +     \"lineHeight\": 1.2,\n    +     \"opacity\": 1,\n    +     \"shadowBlur\": 0,\n    +     \"shadowColor\": \"#000000\",\n    +     \"shadowEnabled\": false,\n    +     \"shadowOffsetX\": 0,\n    +     \"shadowOffsetY\": 0,\n    +     \"strokeColor\": \"#000000\",\n    +     \"strokeEnabled\": false,\n    +     \"strokeWidth\": 1,\n    +     \"textAlign\": \"left\",\n    +     \"textBaseline\": \"alphabetic\",\n        },\n      }\n\n    \u001b[0m \u001b[90m 162 |\u001b[39m       \u001b[36mconst\u001b[39m overrides \u001b[33m=\u001b[39m extractOverrides(base\u001b[33m,\u001b[39m entity)\u001b[33m;\u001b[39m\n     \u001b[90m 163 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 164 |\u001b[39m       expect(overrides)\u001b[33m.\u001b[39mtoEqual({\n     \u001b[90m     |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 165 |\u001b[39m         line\u001b[33m:\u001b[39m { color\u001b[33m:\u001b[39m \u001b[33mUI_COLORS\u001b[39m\u001b[33m.\u001b[39m\u001b[33mCUSTOM_TEST_COLOR\u001b[39m \u001b[33m||\u001b[39m \u001b[32m'#123456'\u001b[39m }\u001b[33m,\u001b[39m\n     \u001b[90m 166 |\u001b[39m         text\u001b[33m:\u001b[39m { fontSize\u001b[33m:\u001b[39m \u001b[35m20\u001b[39m }\n     \u001b[90m 167 |\u001b[39m         \u001b[90m// grip not included (no differences)\u001b[39m\u001b[0m\n\n      at Object.toEqual (src/subapps/dxf-viewer/settings-core/__tests__/override.test.ts:164:25)\n","name":"C:\\Nestor_Pagonis\\src\\subapps\\dxf-viewer\\settings-core\\__tests__\\override.test.ts","startTime":1768084867069,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["createStoreSync"],"duration":8,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"createStoreSync should create sync instance","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084868027,"status":"passed","title":"should create sync instance"},{"ancestorTitles":["createStoreSync"],"duration":4,"failing":false,"failureDetails":[{"matcherResult":{"message":"expect(received).toContainEqual(expected) // deep equality\n\nExpected value: {\"data\": undefined, \"level\": \"info\", \"msg\": \"[StoreSync] Creating sync instance\"}\nReceived array: []","pass":false}}],"failureMessages":["Error: expect(received).toContainEqual(expected) // deep equality\n\nExpected value: {\"data\": undefined, \"level\": \"info\", \"msg\": \"[StoreSync] Creating sync instance\"}\nReceived array: []\n    at Object.toContainEqual (C:\\Nestor_Pagonis\\src\\subapps\\dxf-viewer\\settings\\sync\\storeSync.test.ts:179:29)\n    at Promise.finally.completed (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at _runTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\index.js:275:16)\n    at runTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\index.js:343:7)"],"fullName":"createStoreSync should log creation","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1768084868035,"status":"failed","title":"should log creation"},{"ancestorTitles":["createStoreSync"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"createStoreSync should push to ports on start","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084868097,"status":"passed","title":"should push to ports on start"},{"ancestorTitles":["createStoreSync"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"createStoreSync should push from settings on demand","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084868099,"status":"passed","title":"should push from settings on demand"},{"ancestorTitles":["createStoreSync"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"createStoreSync should push correct data format","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1768084868101,"status":"passed","title":"should push correct data format"},{"ancestorTitles":["createStoreSync"],"duration":1,"failing":false,"failureDetails":[{"matcherResult":{"message":"expect(received).toBeGreaterThan(expected)\n\nExpected: > 0\nReceived:   0","pass":false}}],"failureMessages":["Error: expect(received).toBeGreaterThan(expected)\n\nExpected: > 0\nReceived:   0\n    at Object.toBeGreaterThan (C:\\Nestor_Pagonis\\src\\subapps\\dxf-viewer\\settings\\sync\\storeSync.test.ts:226:49)\n    at Promise.finally.completed (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at _runTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-circus@30.2.0\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\index.js:275:16)\n    at runTest (C:\\Nestor_Pagonis\\node_modules\\.pnpm\\jest-runner@30.2.0\\node_modules\\jest-runner\\build\\index.js:343:7)"],"fullName":"createStoreSync should cleanup subscriptions on stop","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1768084868103,"status":"failed","title":"should cleanup subscriptions on stop"},{"ancestorTitles":["createStoreSync"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"createStoreSync should handle apply errors gracefully","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084868105,"status":"passed","title":"should handle apply errors gracefully"},{"ancestorTitles":["createStoreSync"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"createStoreSync should work without optional ports","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084868106,"status":"passed","title":"should work without optional ports"},{"ancestorTitles":["createStoreSync"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"createStoreSync should support multiple stop calls","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084868107,"status":"passed","title":"should support multiple stop calls"}],"endTime":1768084868148,"message":"  â— createStoreSync â€º should log creation\n\n    expect(received).toContainEqual(expected) // deep equality\n\n    Expected value: {\"data\": undefined, \"level\": \"info\", \"msg\": \"[StoreSync] Creating sync instance\"}\n    Received array: []\n\n    \u001b[0m \u001b[90m 177 |\u001b[39m     createStoreSync(deps)\u001b[33m;\u001b[39m\n     \u001b[90m 178 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 179 |\u001b[39m     expect(fakeLogger\u001b[33m.\u001b[39mlogs)\u001b[33m.\u001b[39mtoContainEqual({\n     \u001b[90m     |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 180 |\u001b[39m       level\u001b[33m:\u001b[39m \u001b[32m'info'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 181 |\u001b[39m       msg\u001b[33m:\u001b[39m \u001b[32m'[StoreSync] Creating sync instance'\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 182 |\u001b[39m       data\u001b[33m:\u001b[39m undefined\u001b[0m\n\n      at Object.toContainEqual (src/subapps/dxf-viewer/settings/sync/storeSync.test.ts:179:29)\n\n  â— createStoreSync â€º should cleanup subscriptions on stop\n\n    expect(received).toBeGreaterThan(expected)\n\n    Expected: > 0\n    Received:   0\n\n    \u001b[0m \u001b[90m 224 |\u001b[39m     \u001b[36mconst\u001b[39m { stop } \u001b[33m=\u001b[39m sync\u001b[33m.\u001b[39mstart(effectiveGetter)\u001b[33m;\u001b[39m\n     \u001b[90m 225 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 226 |\u001b[39m     expect(fakeToolStyle\u001b[33m.\u001b[39mchangeHandlers\u001b[33m.\u001b[39mlength)\u001b[33m.\u001b[39mtoBeGreaterThan(\u001b[35m0\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 227 |\u001b[39m\n     \u001b[90m 228 |\u001b[39m     stop()\u001b[33m;\u001b[39m\n     \u001b[90m 229 |\u001b[39m\u001b[0m\n\n      at Object.toBeGreaterThan (src/subapps/dxf-viewer/settings/sync/storeSync.test.ts:226:49)\n","name":"C:\\Nestor_Pagonis\\src\\subapps\\dxf-viewer\\settings\\sync\\storeSync.test.ts","startTime":1768084867686,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["ðŸŽ¨ Enterprise Visual Regression Testing"],"duration":4028,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ðŸŽ¨ Enterprise Visual Regression Testing combined-800x600 - Strict Visual Regression Test","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084869528,"status":"passed","title":"combined-800x600 - Strict Visual Regression Test"},{"ancestorTitles":["ðŸŽ¨ Enterprise Visual Regression Testing"],"duration":3132,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ðŸŽ¨ Enterprise Visual Regression Testing origin-800x600 - Strict Visual Regression Test","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084873557,"status":"passed","title":"origin-800x600 - Strict Visual Regression Test"},{"ancestorTitles":["ðŸŽ¨ Enterprise Visual Regression Testing"],"duration":3192,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ðŸŽ¨ Enterprise Visual Regression Testing grid-800x600 - Strict Visual Regression Test","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084876690,"status":"passed","title":"grid-800x600 - Strict Visual Regression Test"},{"ancestorTitles":["ðŸŽ¨ Enterprise Visual Regression Testing"],"duration":17679,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ðŸŽ¨ Enterprise Visual Regression Testing combined-1920x1080 - Strict Visual Regression Test","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084879882,"status":"passed","title":"combined-1920x1080 - Strict Visual Regression Test"},{"ancestorTitles":["ðŸŽ¨ Enterprise Visual Regression Testing"],"duration":4401,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ðŸŽ¨ Enterprise Visual Regression Testing crosshair-800x800 - Strict Visual Regression Test","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084897562,"status":"passed","title":"crosshair-800x800 - Strict Visual Regression Test"},{"ancestorTitles":["ðŸŽ¨ Enterprise Visual Regression Testing"],"duration":584,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ðŸŽ¨ Enterprise Visual Regression Testing combined-320x240 - Strict Visual Regression Test","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084901964,"status":"passed","title":"combined-320x240 - Strict Visual Regression Test"},{"ancestorTitles":["ðŸŽ¨ Enterprise Visual Regression Testing"],"duration":5043,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ðŸŽ¨ Enterprise Visual Regression Testing grid-1024x768 - Strict Visual Regression Test","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084902549,"status":"passed","title":"grid-1024x768 - Strict Visual Regression Test"},{"ancestorTitles":["ðŸŽ¨ Enterprise Visual Regression Testing"],"duration":73,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ðŸŽ¨ Enterprise Visual Regression Testing coordinate transform visual accuracy","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084907593,"status":"passed","title":"coordinate transform visual accuracy"}],"endTime":1768084907699,"message":"","name":"C:\\Nestor_Pagonis\\src\\subapps\\dxf-viewer\\__tests__\\visual-regression.test.ts","startTime":1768084868184,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["GeoCanvasApp","Layout Structure"],"duration":397,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"GeoCanvasApp Layout Structure renders main content area","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084909618,"status":"passed","title":"renders main content area"},{"ancestorTitles":["GeoCanvasApp","Layout Structure"],"duration":155,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"GeoCanvasApp Layout Structure renders navigation toolbar","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084910016,"status":"passed","title":"renders navigation toolbar"},{"ancestorTitles":["GeoCanvasApp","Layout Structure"],"duration":158,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"GeoCanvasApp Layout Structure renders heading element","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084910172,"status":"passed","title":"renders heading element"},{"ancestorTitles":["GeoCanvasApp","Props Handling"],"duration":142,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"GeoCanvasApp Props Handling accepts feature flags prop","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084910331,"status":"passed","title":"accepts feature flags prop"},{"ancestorTitles":["GeoCanvasApp","Props Handling"],"duration":156,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"GeoCanvasApp Props Handling accepts initial configuration prop","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084910474,"status":"passed","title":"accepts initial configuration prop"},{"ancestorTitles":["GeoCanvasApp","Props Handling"],"duration":182,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"GeoCanvasApp Props Handling accepts className prop","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084910631,"status":"passed","title":"accepts className prop"},{"ancestorTitles":["GeoCanvasApp","Accessibility"],"duration":195,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"GeoCanvasApp Accessibility has combobox controls for selections","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084910814,"status":"passed","title":"has combobox controls for selections"},{"ancestorTitles":["GeoCanvasApp","Accessibility"],"duration":190,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"GeoCanvasApp Accessibility has button controls","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084911009,"status":"passed","title":"has button controls"}],"endTime":1768084911202,"message":"","name":"C:\\Nestor_Pagonis\\src\\subapps\\geo-canvas\\__tests__\\GeoCanvasApp.test.tsx","startTime":1768084907882,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Basic Visual Regression Setup"],"duration":9,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Basic Visual Regression Setup test environment is ready","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1768084911516,"status":"passed","title":"test environment is ready"},{"ancestorTitles":["Basic Visual Regression Setup"],"duration":6,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Basic Visual Regression Setup can create test directories","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084911526,"status":"passed","title":"can create test directories"},{"ancestorTitles":["Basic Visual Regression Setup"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Basic Visual Regression Setup canvas creation works","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1768084911532,"status":"passed","title":"canvas creation works"},{"ancestorTitles":["Basic Visual Regression Setup"],"duration":1968,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Basic Visual Regression Setup mock 2d context available","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084911535,"status":"passed","title":"mock 2d context available"},{"ancestorTitles":["Basic Visual Regression Setup"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Basic Visual Regression Setup conditional pixelmatch loading","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084913504,"status":"passed","title":"conditional pixelmatch loading"},{"ancestorTitles":["Enterprise Setup Checklist"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Enterprise Setup Checklist jest configuration is loaded","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084913506,"status":"passed","title":"jest configuration is loaded"},{"ancestorTitles":["Enterprise Setup Checklist"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Enterprise Setup Checklist typescript compilation works","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084913508,"status":"passed","title":"typescript compilation works"},{"ancestorTitles":["Enterprise Setup Checklist"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Enterprise Setup Checklist file system access works","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084913509,"status":"passed","title":"file system access works"},{"ancestorTitles":["Enterprise Setup Checklist"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Enterprise Setup Checklist reports directory can be created","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084913511,"status":"passed","title":"reports directory can be created"},{"ancestorTitles":["Visual Testing Readiness"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Visual Testing Readiness all required directories exist","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1768084913513,"status":"passed","title":"all required directories exist"},{"ancestorTitles":["Visual Testing Readiness"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Visual Testing Readiness dependencies status check","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1768084913516,"status":"passed","title":"dependencies status check"},{"ancestorTitles":["Visual Testing Readiness"],"duration":6,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Visual Testing Readiness scripts are available","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1768084913520,"status":"passed","title":"scripts are available"}],"endTime":1768084913528,"message":"","name":"C:\\Nestor_Pagonis\\src\\subapps\\dxf-viewer\\__tests__\\visual-regression-basic.test.ts","startTime":1768084911240,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["ðŸŽ¯ Line Drawing Functionality (CRITICAL)","âœ… Basic Line Drawing"],"duration":201,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ðŸŽ¯ Line Drawing Functionality (CRITICAL) âœ… Basic Line Drawing should draw a line with two clicks","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"startAt":1768084914458,"status":"passed","title":"should draw a line with two clicks"},{"ancestorTitles":["ðŸŽ¯ Line Drawing Functionality (CRITICAL)","âœ… Basic Line Drawing"],"duration":25,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ðŸŽ¯ Line Drawing Functionality (CRITICAL) âœ… Basic Line Drawing should create preview entity during drawing","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1768084914667,"status":"passed","title":"should create preview entity during drawing"},{"ancestorTitles":["ðŸŽ¯ Line Drawing Functionality (CRITICAL)","âœ… Event Handler Connection"],"duration":13,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ðŸŽ¯ Line Drawing Functionality (CRITICAL) âœ… Event Handler Connection should have onDrawingHover handler","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084914693,"status":"passed","title":"should have onDrawingHover handler"},{"ancestorTitles":["ðŸŽ¯ Line Drawing Functionality (CRITICAL)","âœ… Event Handler Connection"],"duration":17,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ðŸŽ¯ Line Drawing Functionality (CRITICAL) âœ… Event Handler Connection should have startDrawing handler","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084914709,"status":"passed","title":"should have startDrawing handler"},{"ancestorTitles":["ðŸŽ¯ Line Drawing Functionality (CRITICAL)","âœ… Event Handler Connection"],"duration":28,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ðŸŽ¯ Line Drawing Functionality (CRITICAL) âœ… Event Handler Connection should have addPoint handler","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084914731,"status":"passed","title":"should have addPoint handler"},{"ancestorTitles":["ðŸŽ¯ Line Drawing Functionality (CRITICAL)","âœ… State Management"],"duration":18,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ðŸŽ¯ Line Drawing Functionality (CRITICAL) âœ… State Management should initialize with correct default state","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1768084914759,"status":"passed","title":"should initialize with correct default state"},{"ancestorTitles":["ðŸŽ¯ Line Drawing Functionality (CRITICAL)","âœ… State Management"],"duration":10,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ðŸŽ¯ Line Drawing Functionality (CRITICAL) âœ… State Management should transition to drawing state when line tool selected","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084914777,"status":"passed","title":"should transition to drawing state when line tool selected"},{"ancestorTitles":["ðŸŽ¯ Line Drawing Functionality (CRITICAL)","âœ… State Management"],"duration":14,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ðŸŽ¯ Line Drawing Functionality (CRITICAL) âœ… State Management should reset state after completing line","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1768084914787,"status":"passed","title":"should reset state after completing line"},{"ancestorTitles":["ðŸŽ¯ Line Drawing Functionality (CRITICAL)","âš ï¸ REGRESSION TESTS - Critical Bugs"],"duration":13,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ðŸŽ¯ Line Drawing Functionality (CRITICAL) âš ï¸ REGRESSION TESTS - Critical Bugs ðŸ› BUG FIX: onDrawingHover must be called during mouse move","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084914802,"status":"passed","title":"ðŸ› BUG FIX: onDrawingHover must be called during mouse move"},{"ancestorTitles":["ðŸŽ¯ Line Drawing Functionality (CRITICAL)","âš ï¸ REGRESSION TESTS - Critical Bugs"],"duration":14,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ðŸŽ¯ Line Drawing Functionality (CRITICAL) âš ï¸ REGRESSION TESTS - Critical Bugs ðŸ› BUG FIX: previewEntity must be added to scene for rendering","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084914816,"status":"passed","title":"ðŸ› BUG FIX: previewEntity must be added to scene for rendering"},{"ancestorTitles":["ðŸŽ¯ Line Drawing Functionality (CRITICAL)","âœ… Line Properties"],"duration":12,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ðŸŽ¯ Line Drawing Functionality (CRITICAL) âœ… Line Properties should create line with start and end points","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084914831,"status":"passed","title":"should create line with start and end points"},{"ancestorTitles":["ðŸŽ¯ Line Drawing Functionality (CRITICAL)","âœ… Line Properties"],"duration":14,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ðŸŽ¯ Line Drawing Functionality (CRITICAL) âœ… Line Properties should mark preview entity with preview flag","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084914843,"status":"passed","title":"should mark preview entity with preview flag"}],"endTime":1768084914860,"message":"","name":"C:\\Nestor_Pagonis\\src\\subapps\\dxf-viewer\\__tests__\\line-drawing-functionality.test.ts","startTime":1768084913566,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["OptimisticUpdateManager","apply"],"duration":38,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"OptimisticUpdateManager apply should apply optimistic update and return control object","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"startAt":1768084915546,"status":"passed","title":"should apply optimistic update and return control object"},{"ancestorTitles":["OptimisticUpdateManager","apply"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"OptimisticUpdateManager apply should call onApply callback","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084915585,"status":"passed","title":"should call onApply callback"},{"ancestorTitles":["OptimisticUpdateManager","apply"],"duration":5,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"OptimisticUpdateManager apply should increment pending count","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084915588,"status":"passed","title":"should increment pending count"},{"ancestorTitles":["OptimisticUpdateManager","apply"],"duration":16,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"OptimisticUpdateManager apply should track multiple pending updates","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084915594,"status":"passed","title":"should track multiple pending updates"},{"ancestorTitles":["OptimisticUpdateManager","rollback"],"duration":7,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"OptimisticUpdateManager rollback should rollback an optimistic update","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1768084915611,"status":"passed","title":"should rollback an optimistic update"},{"ancestorTitles":["OptimisticUpdateManager","rollback"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"OptimisticUpdateManager rollback should call onRollback callback with previous state","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084915619,"status":"passed","title":"should call onRollback callback with previous state"},{"ancestorTitles":["OptimisticUpdateManager","rollback"],"duration":50,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"OptimisticUpdateManager rollback should decrement pending count","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084915624,"status":"passed","title":"should decrement pending count"},{"ancestorTitles":["OptimisticUpdateManager","rollback"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"OptimisticUpdateManager rollback should return false for non-existent update","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084915675,"status":"passed","title":"should return false for non-existent update"},{"ancestorTitles":["OptimisticUpdateManager","rollback"],"duration":17,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"OptimisticUpdateManager rollback should return false when already rolled back","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084915676,"status":"passed","title":"should return false when already rolled back"},{"ancestorTitles":["OptimisticUpdateManager","rollback"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"OptimisticUpdateManager rollback should return false when already confirmed","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084915694,"status":"passed","title":"should return false when already confirmed"},{"ancestorTitles":["OptimisticUpdateManager","confirm"],"duration":11,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"OptimisticUpdateManager confirm should confirm an optimistic update","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084915698,"status":"passed","title":"should confirm an optimistic update"},{"ancestorTitles":["OptimisticUpdateManager","confirm"],"duration":15,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"OptimisticUpdateManager confirm should call onConfirm callback with optimistic state","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084915710,"status":"passed","title":"should call onConfirm callback with optimistic state"},{"ancestorTitles":["OptimisticUpdateManager","confirm"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"OptimisticUpdateManager confirm should decrement pending count","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084915726,"status":"passed","title":"should decrement pending count"},{"ancestorTitles":["OptimisticUpdateManager","confirm"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"OptimisticUpdateManager confirm should return false for non-existent update","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084915729,"status":"passed","title":"should return false for non-existent update"},{"ancestorTitles":["OptimisticUpdateManager","confirm"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"OptimisticUpdateManager confirm should return true when already confirmed","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084915731,"status":"passed","title":"should return true when already confirmed"},{"ancestorTitles":["OptimisticUpdateManager","confirm"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"OptimisticUpdateManager confirm should return false when already rolled back","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084915733,"status":"passed","title":"should return false when already rolled back"},{"ancestorTitles":["OptimisticUpdateManager","hasPendingUpdates"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"OptimisticUpdateManager hasPendingUpdates should return false when no pending updates","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084915735,"status":"passed","title":"should return false when no pending updates"},{"ancestorTitles":["OptimisticUpdateManager","hasPendingUpdates"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"OptimisticUpdateManager hasPendingUpdates should return true when there are pending updates","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084915738,"status":"passed","title":"should return true when there are pending updates"},{"ancestorTitles":["OptimisticUpdateManager","hasPendingUpdates"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"OptimisticUpdateManager hasPendingUpdates should return false after all updates resolved","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084915740,"status":"passed","title":"should return false after all updates resolved"},{"ancestorTitles":["OptimisticUpdateManager","getPendingSnapshots"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"OptimisticUpdateManager getPendingSnapshots should return empty array when no pending","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084915743,"status":"passed","title":"should return empty array when no pending"},{"ancestorTitles":["OptimisticUpdateManager","getPendingSnapshots"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"OptimisticUpdateManager getPendingSnapshots should return only pending snapshots","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084915745,"status":"passed","title":"should return only pending snapshots"},{"ancestorTitles":["OptimisticUpdateManager","rollbackAll"],"duration":6,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"OptimisticUpdateManager rollbackAll should rollback all pending updates","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084915748,"status":"passed","title":"should rollback all pending updates"},{"ancestorTitles":["OptimisticUpdateManager","rollbackAll"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"OptimisticUpdateManager rollbackAll should not rollback confirmed updates","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084915754,"status":"passed","title":"should not rollback confirmed updates"},{"ancestorTitles":["OptimisticUpdateManager","clear"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"OptimisticUpdateManager clear should clear all snapshots","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084915758,"status":"passed","title":"should clear all snapshots"},{"ancestorTitles":["Optimistic Update Control Object"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Optimistic Update Control Object isRolledBack should reflect rollback state","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084915762,"status":"passed","title":"isRolledBack should reflect rollback state"},{"ancestorTitles":["Optimistic Update Control Object"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Optimistic Update Control Object isConfirmed should reflect confirm state","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084915764,"status":"passed","title":"isConfirmed should reflect confirm state"},{"ancestorTitles":["createOptimisticHelpers","applyUpdate"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"createOptimisticHelpers applyUpdate should create optimistic update","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084915766,"status":"passed","title":"should create optimistic update"},{"ancestorTitles":["createOptimisticHelpers","withOptimisticUpdate"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"createOptimisticHelpers withOptimisticUpdate should confirm on successful operation","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084915769,"status":"passed","title":"should confirm on successful operation"},{"ancestorTitles":["createOptimisticHelpers","withOptimisticUpdate"],"duration":21,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"createOptimisticHelpers withOptimisticUpdate should rollback on failed operation","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084915771,"status":"passed","title":"should rollback on failed operation"},{"ancestorTitles":["Optimistic Updates Integration"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Optimistic Updates Integration should handle UI state updates","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084915793,"status":"passed","title":"should handle UI state updates"},{"ancestorTitles":["Optimistic Updates Integration"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Optimistic Updates Integration should handle concurrent updates","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1768084915796,"status":"passed","title":"should handle concurrent updates"},{"ancestorTitles":["Optimistic Updates Integration"],"duration":21,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Optimistic Updates Integration should handle async operations","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084915799,"status":"passed","title":"should handle async operations"}],"endTime":1768084915824,"message":"","name":"C:\\Nestor_Pagonis\\src\\services\\entity-linking\\__tests__\\optimistic.test.ts","startTime":1768084915182,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["ðŸ“Š Visual Regression Metrics & Telemetry"],"duration":36,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ðŸ“Š Visual Regression Metrics & Telemetry logs visual quality thresholds","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1768084916182,"status":"passed","title":"logs visual quality thresholds"},{"ancestorTitles":["ðŸ“Š Visual Regression Metrics & Telemetry"],"duration":28,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ðŸ“Š Visual Regression Metrics & Telemetry logs performance metrics","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1768084916219,"status":"passed","title":"logs performance metrics"},{"ancestorTitles":["ðŸ“Š Visual Regression Metrics & Telemetry"],"duration":32,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ðŸ“Š Visual Regression Metrics & Telemetry logs cross-browser consistency metrics","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1768084916247,"status":"passed","title":"logs cross-browser consistency metrics"},{"ancestorTitles":["ðŸ“Š Visual Regression Metrics & Telemetry"],"duration":28,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ðŸ“Š Visual Regression Metrics & Telemetry generates comprehensive metrics report","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1768084916279,"status":"passed","title":"generates comprehensive metrics report"},{"ancestorTitles":["ðŸ“Š Visual Regression Metrics & Telemetry"],"duration":29,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ðŸ“Š Visual Regression Metrics & Telemetry validates metrics schema and data quality","invocations":1,"location":null,"numPassingAsserts":12,"retryReasons":[],"startAt":1768084916308,"status":"passed","title":"validates metrics schema and data quality"},{"ancestorTitles":["ðŸ“ˆ Metrics Analysis & Trending"],"duration":91,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ðŸ“ˆ Metrics Analysis & Trending detects quality regressions","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084916338,"status":"passed","title":"detects quality regressions"},{"ancestorTitles":["ðŸ“ˆ Metrics Analysis & Trending"],"duration":27,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ðŸ“ˆ Metrics Analysis & Trending tracks performance trends","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084916429,"status":"passed","title":"tracks performance trends"}],"endTime":1768084916459,"message":"","name":"C:\\Nestor_Pagonis\\src\\subapps\\dxf-viewer\\__tests__\\visual-metrics.test.ts","startTime":1768084915931,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Cache Key Builders","buildAvailableEntitiesKey"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Cache Key Builders buildAvailableEntitiesKey should build key without parent ID","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084916830,"status":"passed","title":"should build key without parent ID"},{"ancestorTitles":["Cache Key Builders","buildAvailableEntitiesKey"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Cache Key Builders buildAvailableEntitiesKey should build key with parent ID","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084916834,"status":"passed","title":"should build key with parent ID"},{"ancestorTitles":["Cache Key Builders","buildLinkedEntitiesKey"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Cache Key Builders buildLinkedEntitiesKey should build correct key","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084916835,"status":"passed","title":"should build correct key"},{"ancestorTitles":["Cache Key Builders","buildEntityDetailsKey"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Cache Key Builders buildEntityDetailsKey should build correct key","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084916837,"status":"passed","title":"should build correct key"},{"ancestorTitles":["Cache Key Builders","buildRelationshipStatusKey"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Cache Key Builders buildRelationshipStatusKey should build correct key","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084916839,"status":"passed","title":"should build correct key"},{"ancestorTitles":["TTL Configuration"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"TTL Configuration should have shorter TTL for available entities","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084916840,"status":"passed","title":"should have shorter TTL for available entities"},{"ancestorTitles":["TTL Configuration"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"TTL Configuration should have shortest TTL for relationship status","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084916842,"status":"passed","title":"should have shortest TTL for relationship status"},{"ancestorTitles":["TTL Configuration"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"TTL Configuration should have all TTL values as positive numbers","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1768084916844,"status":"passed","title":"should have all TTL values as positive numbers"},{"ancestorTitles":["EntityLinkingCache","Available Entities"],"duration":11,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EntityLinkingCache Available Entities should return null for cache miss","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084916846,"status":"passed","title":"should return null for cache miss"},{"ancestorTitles":["EntityLinkingCache","Available Entities"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EntityLinkingCache Available Entities should cache and retrieve available entities","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084916858,"status":"passed","title":"should cache and retrieve available entities"},{"ancestorTitles":["EntityLinkingCache","Available Entities"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EntityLinkingCache Available Entities should cache entities without parent ID","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084916861,"status":"passed","title":"should cache entities without parent ID"},{"ancestorTitles":["EntityLinkingCache","Linked Entities"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EntityLinkingCache Linked Entities should return null for cache miss","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084916864,"status":"passed","title":"should return null for cache miss"},{"ancestorTitles":["EntityLinkingCache","Linked Entities"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EntityLinkingCache Linked Entities should cache and retrieve linked entities","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084916866,"status":"passed","title":"should cache and retrieve linked entities"},{"ancestorTitles":["EntityLinkingCache","Entity Details"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EntityLinkingCache Entity Details should return null for cache miss","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084916868,"status":"passed","title":"should return null for cache miss"},{"ancestorTitles":["EntityLinkingCache","Entity Details"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EntityLinkingCache Entity Details should cache and retrieve entity details","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084916871,"status":"passed","title":"should cache and retrieve entity details"},{"ancestorTitles":["EntityLinkingCache","Cache Invalidation"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EntityLinkingCache Cache Invalidation should invalidate entity type cache","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084916874,"status":"passed","title":"should invalidate entity type cache"},{"ancestorTitles":["EntityLinkingCache","Cache Invalidation"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EntityLinkingCache Cache Invalidation should invalidate on link operation","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1768084916878,"status":"passed","title":"should invalidate on link operation"},{"ancestorTitles":["EntityLinkingCache","Cache Invalidation"],"duration":37,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EntityLinkingCache Cache Invalidation should invalidate all cache","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084916881,"status":"passed","title":"should invalidate all cache"},{"ancestorTitles":["EntityLinkingCache","getOrFetch"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EntityLinkingCache getOrFetch should return cached data without calling fetch","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084916918,"status":"passed","title":"should return cached data without calling fetch"},{"ancestorTitles":["EntityLinkingCache","getOrFetch"],"duration":6,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EntityLinkingCache getOrFetch should call fetch on cache miss","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084916923,"status":"passed","title":"should call fetch on cache miss"},{"ancestorTitles":["EntityLinkingCache","getOrFetch"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EntityLinkingCache getOrFetch should work with custom TTL","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084916930,"status":"passed","title":"should work with custom TTL"},{"ancestorTitles":["EntityLinkingCache","getOrFetchAvailableEntities"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EntityLinkingCache getOrFetchAvailableEntities should fetch and cache available entities","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084916933,"status":"passed","title":"should fetch and cache available entities"},{"ancestorTitles":["EntityLinkingCache","Statistics"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EntityLinkingCache Statistics should return cache statistics","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1768084916937,"status":"passed","title":"should return cache statistics"},{"ancestorTitles":["EntityLinkingCache","Statistics"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"EntityLinkingCache Statistics should run maintenance without error","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084916940,"status":"passed","title":"should run maintenance without error"}],"endTime":1768084916945,"message":"","name":"C:\\Nestor_Pagonis\\src\\services\\entity-linking\\__tests__\\cache.test.ts","startTime":1768084916531,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Enterprise Search - normalizeSearchText"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Enterprise Search - normalizeSearchText removes Greek diacritics (Ï„ÏŒÎ½Î¿Ï…Ï‚)","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1768084917354,"status":"passed","title":"removes Greek diacritics (Ï„ÏŒÎ½Î¿Ï…Ï‚)"},{"ancestorTitles":["Enterprise Search - normalizeSearchText"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Enterprise Search - normalizeSearchText normalizes final sigma (Ï‚ â†’ Ïƒ)","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1768084917359,"status":"passed","title":"normalizes final sigma (Ï‚ â†’ Ïƒ)"},{"ancestorTitles":["Enterprise Search - normalizeSearchText"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Enterprise Search - normalizeSearchText handles null/undefined safely","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1768084917361,"status":"passed","title":"handles null/undefined safely"},{"ancestorTitles":["Enterprise Search - normalizeSearchText"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Enterprise Search - normalizeSearchText converts numbers to strings","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1768084917363,"status":"passed","title":"converts numbers to strings"},{"ancestorTitles":["Enterprise Search - normalizeSearchText"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Enterprise Search - normalizeSearchText converts booleans to strings","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084917366,"status":"passed","title":"converts booleans to strings"},{"ancestorTitles":["Enterprise Search - normalizeSearchText"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Enterprise Search - normalizeSearchText converts dates to ISO strings","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1768084917368,"status":"passed","title":"converts dates to ISO strings"},{"ancestorTitles":["Enterprise Search - normalizeSearchText"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Enterprise Search - normalizeSearchText normalizes whitespace","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1768084917370,"status":"passed","title":"normalizes whitespace"},{"ancestorTitles":["Enterprise Search - normalizeSearchText"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Enterprise Search - normalizeSearchText removes Latin diacritics","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1768084917372,"status":"passed","title":"removes Latin diacritics"},{"ancestorTitles":["Enterprise Search - matchesSearchTerm"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Enterprise Search - matchesSearchTerm matches Greek text ignoring diacritics","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1768084917408,"status":"passed","title":"matches Greek text ignoring diacritics"},{"ancestorTitles":["Enterprise Search - matchesSearchTerm"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Enterprise Search - matchesSearchTerm matches numeric fields with string search","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1768084917411,"status":"passed","title":"matches numeric fields with string search"},{"ancestorTitles":["Enterprise Search - matchesSearchTerm"],"duration":9,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Enterprise Search - matchesSearchTerm empty search term matches everything","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1768084917413,"status":"passed","title":"empty search term matches everything"},{"ancestorTitles":["Enterprise Search - matchesSearchTerm"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Enterprise Search - matchesSearchTerm handles null/undefined fields safely","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1768084917423,"status":"passed","title":"handles null/undefined fields safely"},{"ancestorTitles":["Enterprise Search - matchesSearchTerm"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Enterprise Search - matchesSearchTerm handles mixed field types correctly","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1768084917425,"status":"passed","title":"handles mixed field types correctly"},{"ancestorTitles":["Enterprise Search - matchesSearchTerm"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Enterprise Search - matchesSearchTerm returns false when no fields match","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084917427,"status":"passed","title":"returns false when no fields match"},{"ancestorTitles":["Enterprise Search - matchesSearchTerm"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Enterprise Search - matchesSearchTerm supports partial matching within fields","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1768084917430,"status":"passed","title":"supports partial matching within fields"},{"ancestorTitles":["Enterprise Search - matchesSearchTerm"],"duration":15,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Enterprise Search - matchesSearchTerm handles flattened arrays correctly","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1768084917432,"status":"passed","title":"handles flattened arrays correctly"},{"ancestorTitles":["Enterprise Search - Edge Cases"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Enterprise Search - Edge Cases very long strings are handled efficiently","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084917447,"status":"passed","title":"very long strings are handled efficiently"},{"ancestorTitles":["Enterprise Search - Edge Cases"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Enterprise Search - Edge Cases special characters in search term","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1768084917449,"status":"passed","title":"special characters in search term"},{"ancestorTitles":["Enterprise Search - Edge Cases"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Enterprise Search - Edge Cases unicode emoji handling","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1768084917450,"status":"passed","title":"unicode emoji handling"}],"endTime":1768084917454,"message":"","name":"C:\\Nestor_Pagonis\\src\\lib\\search\\search.test.ts","startTime":1768084917045,"status":"passed","summary":""}],"wasInterrupted":false}
