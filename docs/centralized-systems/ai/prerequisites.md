# AI Prerequisites (Προαπαιτούμενα Συστήματα)

> **Parent ADR**: [ADR-169 - Modular AI Architecture](../reference/adrs/ADR-169-modular-ai-architecture.md)

---

## PRE-001: Enterprise Calendar System

**Status**: ΔΕΝ ΥΠΑΡΧΕΙ - Πρέπει να φτιαχτεί

**Τρέχουσα κατάσταση**: Μόνο ένα πολύ πρόχειρο ημερολόγιο στο CRM, εντελώς ανεπαρκές.

**Απαιτήσεις**:
- Ραντεβού χρηστών (εσωτερικά & εξωτερικά)
- Εργασίες ανά εργαζόμενο/εμπλεκόμενο
- AI-readable: Το AI πρέπει να μπορεί να διαβάσει & γράψει στο ημερολόγιο
- Ανά εταιρεία / ανά έργο / ανά χρήστη
- Conflict detection (σύγκρουση ραντεβού)
- Κενά ημερολογίου (availability slots)

**Κρίσιμο για**: [UC-001](./use-cases/UC-001-appointment.md) (Ραντεβού), και κάθε μελλοντικό σενάριο scheduling

---

## PRE-002: Leads System (Ενδιαφερόμενοι / Ευκαιρίες)

**Status**: ΥΠΑΡΧΕΙ ΥΠΟΤΥΠΩΔΗΣ ΚΩΔΙΚΑΣ - Πρέπει να επεκταθεί

**Τρέχουσα κατάσταση**: Στο CRM υπάρχει ήδη μια υποτυπώδης κατηγορία "Ευκαιρίες" (opportunities). Ο κώδικας πρέπει να επεκταθεί σε πλήρες Leads system.

**Αρχιτεκτονική Αρχή - Contacts vs Leads**:

| | **Contacts (Επαφές)** | **Leads (Ενδιαφερόμενοι)** |
|---|---|---|
| **Τι είναι** | Επιβεβαιωμένοι συνεργάτες/πελάτες | Άγνωστοι που απλά ρώτησαν κάτι |
| **Ποιότητα** | Υψηλή - πλήρη στοιχεία, επαληθευμένα | Χαμηλή - ίσως μόνο email ή τηλέφωνο |
| **Παραδείγματα** | Προμηθευτές, συμβολαιογράφοι, αγοραστές | "Ενδιαφέρομαι για γκαρσονιέρα" |
| **Τύποι** | Φυσικά πρόσωπα, Νομικά πρόσωπα, Δημόσιες υπηρεσίες | Νέοι ενδιαφερόμενοι από κάθε κανάλι |
| **Λίστα** | Καθαρή - μόνο πραγματικοί | Δέχεται τα πάντα |

**Ροή Lead → Contact**:
```
Lead (new) → contacted → qualified → negotiation → WON → Μετατροπή σε Contact
                                                  → LOST → Αρχειοθέτηση
```

**Απαιτήσεις επέκτασης**:
- Lead statuses: `new`, `contacted`, `qualified`, `negotiation`, `won`, `lost`
- Σύνδεση με αιτήματα AI pipeline (κάθε εισερχόμενο αίτημα = νέο Lead ή ενημέρωση υπάρχοντος)
- Conversion tracking: πόσοι ρώτησαν → πόσοι έγιναν πελάτες
- Αυτόματη μετατροπή Lead → Contact όταν κλείσει πώληση/συνεργασία
- AI-readable: Το AI πρέπει να ελέγχει αν ο αποστολέας υπάρχει ήδη ως Lead ή Contact

**Κρίσιμο για**: [UC-001](./use-cases/UC-001-appointment.md), [UC-005](./use-cases/UC-005-property-search.md), και κάθε εισερχόμενο αίτημα

---

## PRE-003: Procurement System (Προσφορές & Συμφωνίες Προμηθευτών)

**Status**: ΔΕΝ ΥΠΑΡΧΕΙ - Μελλοντικό

**Περιγραφή**: Σύστημα καταχώρισης προσφορών/συμφωνιών με προμηθευτές. Απαιτείται για το Επίπεδο 5 (3-Way Matching) του [UC-002](./use-cases/UC-002-invoice.md).

**Απαιτήσεις**:
- Καταχώριση προσφορών ανά προμηθευτή/έργο
- Τιμές μονάδας ανά υλικό/εργασία
- Ποσότητες και συνολικά ποσά
- Ισχύς προσφοράς (ημερομηνία λήξης)
- AI-readable: Το AI πρέπει να διαβάζει τις προσφορές για σύγκριση με τιμολόγια
- Configurable ανοχή παρέκκλισης (π.χ. ±5%)

**Κρίσιμο για**: [UC-002](./use-cases/UC-002-invoice.md) Επίπεδο 5 (3-Way Matching)

---

## PRE-004: Πίνακας Ποσοστών (Percentage Table per Project)

**Status**: ΔΕΝ ΥΠΑΡΧΕΙ ΣΕ ΔΟΜΗΜΕΝΗ ΜΟΡΦΗ - Σήμερα γίνεται σε Excel → PDF

**Τρέχουσα κατάσταση**: Ο πίνακας ποσοστών φτιάχνεται σε Excel και μετατρέπεται σε PDF χειροκίνητα.

**Επίπεδο**: Ανά **Project** (ΟΧΙ ανά κτίριο, ΟΧΙ ανά μονάδα)

**Αρχιτεκτονική - "Structured Data First, PDF Second"**:

1. **Source of Truth = Firestore** (δομημένα δεδομένα):
   ```
   Project: "Έργο Κορδελιού"
     └─ percentageTable:
          └─ units: [
               { unitName: "Α1", cleanArea: 85.50, grossArea: 102.30, plotThousandths: 45.2 },
               { unitName: "Α2", cleanArea: 62.10, grossArea: 78.40, plotThousandths: 33.1 },
               ...
             ]
          └─ totals: { totalClean, totalGross, totalThousandths: 1000 }
          └─ version: 3
          └─ lastUpdated: "2026-02-07"
   ```

2. **Αυτόματη εξαγωγή PDF** από τα δομημένα δεδομένα (πάντα σε sync)

3. **Εισαγωγή υπαρχόντων Excel/PDF** (για παλιά έργα):
   - AI διαβάζει αρχείο (Vision για PDF, parsing για Excel)
   - Εισάγει σε δομημένη μορφή
   - Ταύτιση/Validation μεταξύ εισαγόμενων και υπαρχόντων δεδομένων

**Validation**:
- Χιλιοστά αθροίζουν σε 1000
- Εμβαδά είναι λογικά (θετικά, εντός ορίων)
- Versioning: ιστορικό αλλαγών

**Κρίσιμο για**: [UC-003](./use-cases/UC-003-notary-documents.md) (αποστολή σε συμβολαιογράφο), AI-readable data

---

## PRE-005: Συγγραφή Υποχρεώσεων (Specifications per Project)

**Status**: ΥΠΑΡΧΕΙ ΒΑΣΙΚΟΣ ΚΩΔΙΚΑΣ - Χρειάζεται βελτίωση UX

**Τρέχουσα κατάσταση**: Υπάρχει ήδη στο sidebar → "Νομικά Έγγραφα" → dropdown → "Συγγραφή Υποχρεώσεων". Έχει φτάσει σε καλό επίπεδο αλλά χρειάζεται βελτίωση ευχρηστίας.

**Επίπεδο**: Ανά **Project** (κάθε έργο = δική του συγγραφή υποχρεώσεων)

**Απαιτήσεις βελτίωσης**:
- Βελτίωση UX (πιο εύχρηστο interface)
- AI-readable: Το AI πρέπει να μπορεί να στείλει τη συγγραφή σε πελάτη/συμβολαιογράφο
- Εξαγωγή σε PDF

**Κρίσιμο για**: [UC-003](./use-cases/UC-003-notary-documents.md) (αποστολή εγγράφων), customer communication
