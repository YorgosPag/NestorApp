# UC-003: Αίτημα Συμβολαιογράφου για Έγγραφα

> **Parent ADR**: [ADR-169 - Modular AI Architecture](../../reference/adrs/ADR-169-modular-ai-architecture.md)
> **Pipeline**: [pipeline.md](../pipeline.md)
> **Prerequisites**: [PRE-004](../prerequisites.md#pre-004-πίνακας-ποσοστών), [PRE-005](../prerequisites.md#pre-005-συγγραφή-υποχρεώσεων)

---

## Trigger

Συμβολαιογράφος ζητά έγγραφα για σύνταξη συμβολαίου

## Αναγνώριση αποστολέα (3 σήματα + fallback)

| Προτεραιότητα | Σήμα | Παράδειγμα |
|---------------|-------|-----------|
| 1 | **Γνωστή επαφή (Contact)** | Υπάρχει ήδη στο σύστημα (π.χ. δικός μας συμβολαιογράφος) |
| 2 | **Ψηφιακή υπογραφή email** | Signature αναφέρει "Συμβολαιογράφος", "Notary Public", επωνυμία γραφείου κ.λπ. |
| 3 | **Fallback - Αίτημα διευκρινίσεων** | Αν δεν υπάρχει ταύτιση, το AI ζητάει ευγενικά διευκρινίσεις: "Λάβαμε το αίτημά σας. Θα μπορούσατε να μας πείτε με ποια ιδιότητα επικοινωνείτε μαζί μας;" |

**ΚΑΝΟΝΑΣ**: Το περιεχόμενο μηνύματος (ΚΑΕΚ, κτηματολογικό κ.λπ.) **ΔΕΝ** αρκεί για αναγνώριση ρόλου - αυτά μπορεί να ζητήσει οποιοσδήποτε (μηχανικός, δικηγόρος, αγοραστής, τράπεζα). Το AI **ποτέ δεν υποθέτει** ρόλο - αν δεν ξέρει, **ρωτάει**.

## Ροή

1. **Intake**: Μήνυμα από συμβολαιογράφο
2. **Understand**: AI αναγνωρίζει:
   - Ποιο **διαμέρισμα** αφορά (unit)
   - Ποια **έγγραφα** ζητούνται:
     - ΚΑΕΚ (Κωδικός Αριθμός Εθνικού Κτηματολογίου)
     - Κτηματολογικό φύλλο
     - Βεβαίωση νομιμότητας
     - Ηλεκτρονική ταυτότητα κτιρίου
     - Τοπογραφικό
     - Άδεια (οικοδομική)
     - Στοιχεία αγοραστή
     - Πίνακας ποσοστών (καθαρά, μικτά, χιλιοστά επί οικοπέδου)
3. **Lookup**:
   - Βρίσκει το **διαμέρισμα** στο σύστημα
   - Αναζητά τα **ζητούμενα έγγραφα** στο file system
   - Ελέγχει ποια υπάρχουν ήδη και ποια λείπουν
4. **Propose**: Ενημερώνει τον υπεύθυνο:
   - "Ο συμβολαιογράφος X ζήτησε τα εξής έγγραφα για το διαμέρισμα Y"
   - "Βρήκα: ΚΑΕΚ, κτηματολογικό, τοπογραφικό, άδεια" (με ονόματα αρχείων + file paths)
   - "Λείπουν: στοιχεία αγοραστή"
   - "Να τα στείλω στον συμβολαιογράφο;"
5. **Αν λείπουν έγγραφα** (ακολουθεί cross-cutting pattern "[Διαχείριση Ελλιπών Εγγράφων](../pipeline.md#διαχείριση-ελλιπών-εγγράφων)"):
   - Δημιουργεί αυτόματα **Task**: "Αναζήτηση/Δημιουργία: [στοιχεία αγοραστή]"
   - Ο υπεύθυνος αποφασίζει ποιος θα τα συγκεντρώσει (ιδιοκτήτης, γραμματέας, μέτοχος κ.λπ.)
   - Τα **ευρεθέντα** στέλνονται αμέσως (αν εγκριθεί)
   - Τα **ελλείποντα** στέλνονται μόλις βρεθούν (ενημέρωση αποστολέα: "Θα σας στείλουμε τα υπόλοιπα σύντομα")
6. **Approve**: Ο υπεύθυνος εγκρίνει
7. **Execute**: Αποστολή εγγράφων στον αποστολέα

## Routing

| Ρόλος | Fallback |
|-------|----------|
| `secretary` | `salesManager` → `defaultResponsible` |

## AI Model Tier

**FAST** (intent detection, document matching)
