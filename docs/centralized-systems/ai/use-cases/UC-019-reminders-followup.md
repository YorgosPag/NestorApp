# UC-019: Υπενθυμίσεις & Follow-up (Reminders & Automated Follow-up)

> **Parent ADR**: [ADR-169 - Modular AI Architecture](../../reference/adrs/ADR-169-modular-ai-architecture.md)
> **Pipeline**: [pipeline.md](../pipeline.md)
> **Σχετικά UCs**: Όλα — οι υπενθυμίσεις τροφοδοτούνται από κάθε UC

---

## Trigger

Δύο τύποι:
1. **Αυτόματο**: Η AI εντοπίζει ότι κάτι καθυστερεί / λήγει / δεν απαντήθηκε
2. **Χειροκίνητο**: Ο χρήστης λέει "Θύμισέ μου σε 3 μέρες αν δεν απαντήσει ο Χ"

---

## Τύπος Α: Αυτόματες Υπενθυμίσεις (AI-triggered)

Η AI παρακολουθεί **deadlines, SLA, αναμονές** σε όλα τα UCs και δημιουργεί υπενθυμίσεις αυτόματα.

### Πωλήσεις

| Συνθήκη | Υπενθύμιση | Αποδέκτης |
|---------|-----------|-----------|
| Πελάτης δεν απάντησε >3 μέρες μετά επίσκεψη | "Ο [πελάτης] δεν απάντησε — να στείλουμε follow-up;" | `salesManager` |
| Κράτηση χωρίς προκαταβολή >7 μέρες | "Κράτηση [unit] χωρίς προκαταβολή εδώ και 7 μέρες" | `salesManager` |
| Έγγραφα αγοραστή ελλιπή >5 μέρες | "Ο [αγοραστής] δεν έστειλε ακόμα: [λίστα εγγράφων]" | `secretary` |
| Τραπεζική έγκριση >20 μέρες | "Η τράπεζα καθυστερεί — να επικοινωνήσουμε;" | `salesManager` |
| Lead χωρίς δραστηριότητα >14 μέρες | "Ο [lead] δεν είχε καμία δραστηριότητα 2 εβδομάδες — ενδιαφέρεται ακόμα;" | `salesManager` |

### Τιμολόγια & Πληρωμές

| Συνθήκη | Υπενθύμιση | Αποδέκτης |
|---------|-----------|-----------|
| Τιμολόγιο χωρίς έγκριση >3 μέρες | "Τιμολόγιο [X] περιμένει έγκριση εδώ και 3 μέρες" | `procurementManager` |
| Πληρωμή overdue | "Πληρωμή [X] έληξε πριν [Y] μέρες" | `accountant` |
| Δόση αγοραστή overdue >7 μέρες | "Ο [αγοραστής] δεν πλήρωσε τη δόση — ποσό [X]€" | `accountant` + `salesManager` |
| Δόση αγοραστή overdue >30 μέρες | Κλιμάκωση → `owner` | `owner` |

### Προμήθειες

| Συνθήκη | Υπενθύμιση | Αποδέκτης |
|---------|-----------|-----------|
| Προμηθευτής δεν απάντησε σε RFQ >5 μέρες | "Ο [προμηθευτής] δεν έστειλε προσφορά — reminder ή εναλλακτικός;" | `procurementManager` |
| Προσφορά λήγει σε <5 μέρες | "Η προσφορά [X] λήγει στις [ημερομηνία] — αποφασίζουμε;" | `procurementManager` |
| Παραγγελία overdue (δεν παραδόθηκε) | "Η παραγγελία [X] έπρεπε να παραδοθεί πριν [Y] μέρες" | `siteManager` + `procurementManager` |
| Δελτίο αποστολής χωρίς αντίστοιχο τιμολόγιο >15 μέρες | "Παραλάβαμε υλικά αλλά δεν ήρθε τιμολόγιο" | `accountant` |

### Αδειοδότηση

| Συνθήκη | Υπενθύμιση | Αποδέκτης |
|---------|-----------|-----------|
| Μελέτη overdue (>SLA+10 μέρες) | "Η [μελέτη] καθυστερεί 10 μέρες — να επικοινωνήσουμε με τον μελετητή;" | `architect` |
| Φορέας χωρίς απάντηση >SLA | "Η [αρχαιολογική] δεν απάντησε εδώ και [X] μέρες" | `architect` |
| Άδεια λήγει σε <6 μήνες | "Η οικοδομική άδεια [X] λήγει στις [ημερομηνία]" | `architect` + `owner` |
| Επιθεώρηση δεν έγινε μετά ολοκλήρωση φάσης | "Η [φάση] ολοκληρώθηκε αλλά δεν κλήθηκε ελεγκτής" | `siteManager` |

### Defects

| Συνθήκη | Υπενθύμιση | Αποδέκτης |
|---------|-----------|-----------|
| Defect ανοιχτό >SLA | "Αναφορά [X] ξεπέρασε το SLA — [Υ] μέρες χωρίς επίλυση" | Αρμόδιος μηχανικός |
| Defect ανοιχτό >2x SLA | Κλιμάκωση → `owner` | `owner` |
| Αναφέρων δεν επιβεβαίωσε επίλυση >5 μέρες | "Ο [αναφέρων] δεν επιβεβαίωσε ότι λύθηκε — να ρωτήσουμε;" | Αρμόδιος μηχανικός |

### Εξωτερική Επικοινωνία

| Συνθήκη | Υπενθύμιση | Αποδέκτης |
|---------|-----------|-----------|
| Εξωτερικός περιμένει απάντηση >2 μέρες | "Ο [αποστολέας] περιμένει απάντηση εδώ και [X] μέρες" | Αρμόδιος βάσει routing |
| Ερώτηση κατάστασης χωρίς ενημέρωση >5 μέρες | "Ο [πελάτης] ρώτησε για [θέμα] αλλά δεν τον ενημερώσαμε ακόμα" | `secretary` |

---

## Τύπος Β: Χειροκίνητες Υπενθυμίσεις (User-triggered)

Ο χρήστης δημιουργεί υπενθύμιση μέσω:
- **In-app**: Κουμπί "Θύμισέ μου" σε οποιοδήποτε record
- **Email/Telegram**: "Θύμισέ μου σε 3 μέρες αν δεν απαντήσει ο Παπαδόπουλος"
- **AI Inbox**: Κατά την επεξεργασία μηνύματος → "Set follow-up"

### Στοιχεία υπενθύμισης

| Πεδίο | Παράδειγμα |
|-------|-----------|
| Τι | "Follow-up με Παπαδόπουλο για τιμολόγιο" |
| Πότε | Σε 3 μέρες / συγκεκριμένη ημερομηνία / "αν δεν απαντήσει" |
| Ποιον αφορά | Contact/Lead/Προμηθευτής |
| Σχετικό record | Τιμολόγιο #1234 / Unit Α3 / Παραγγελία #567 |
| Συνθήκη ακύρωσης | "Αν απαντήσει πριν τη λήξη → ακύρωσε την υπενθύμιση" |

### Έξυπνη ακύρωση

**ΚΑΝΟΝΑΣ**: Αν η AI εντοπίσει ότι η συνθήκη ικανοποιήθηκε πριν τη λήξη → ακυρώνει αυτόματα.

Παραδείγματα:
- "Θύμισέ μου αν ο Παπαδόπουλος δεν στείλει τιμολόγιο μέχρι Παρασκευή" → Ο Παπαδόπουλος στέλνει Τετάρτη → Υπενθύμιση ακυρώνεται αυτόματα
- "Θύμισέ μου σε 5 μέρες για follow-up lead" → Ο lead κάνει κράτηση → Υπενθύμιση ακυρώνεται

---

## Follow-up Προτάσεις (AI-suggested)

Η AI δεν στέλνει μόνο υπενθύμιση — προτείνει **ενέργεια**:

| Υπενθύμιση | Πρόταση AI |
|-----------|-----------|
| "Ο πελάτης δεν απάντησε 5 μέρες" | Draft follow-up email: "Αγαπητέ [Χ], θέλαμε να ρωτήσουμε αν..." |
| "Ο προμηθευτής δεν έστειλε προσφορά" | Draft reminder: "Σας υπενθυμίζουμε το αίτημα προσφοράς..." |
| "Δόση overdue 10 μέρες" | Draft ενημέρωση: "Σας ενημερώνουμε ότι η δόση [X]€ εκκρεμεί..." |

**ΚΑΝΟΝΑΣ**: Η AI προτείνει, ο **χρήστης αποφασίζει**. Ποτέ αυτόματη αποστολή follow-up χωρίς έγκριση.

---

## Κανάλια ειδοποίησης

| Κανάλι | Πότε |
|--------|------|
| **In-app notification** | Πάντα (default) |
| **Email** | Αν ο χρήστης δεν άνοιξε την εφαρμογή εντός 4 ωρών |
| **Telegram** | Αν urgent + ο χρήστης έχει bot |
| **Daily Briefing** | Όλες οι εκκρεμείς υπενθυμίσεις μπαίνουν στο [UC-018](./UC-018-daily-briefing.md) |

---

## AI Model Tier

**FAST** — Monitoring deadlines, triggering reminders, draft generation

---

## Κανόνες

- **Μη ενοχλητικό**: Μία υπενθύμιση ανά θέμα ανά ημέρα maximum — δεν σπαμάρουμε τον χρήστη
- **Κλιμάκωση, όχι επανάληψη**: Αν η πρώτη υπενθύμιση αγνοηθεί → 2η σε 3 μέρες → 3η κλιμακώνεται στον supervisor/owner
- **Configurable thresholds**: Όλα τα deadlines (3 μέρες, 5 μέρες, 7 μέρες, κ.λπ.) ορίζονται σε config, αλλάζουν χωρίς code change
- **Snooze**: Ο χρήστης μπορεί να κάνει snooze (+1 μέρα, +3 μέρες, +1 εβδομάδα) ή dismiss
- **Audit trail**: Κάθε υπενθύμιση (sent, snoozed, dismissed, auto-cancelled) καταγράφεται
