# UC-023: Παράδοση Ακινήτου (Property Handover)

> **Parent ADR**: [ADR-169 - Modular AI Architecture](../../reference/adrs/ADR-169-modular-ai-architecture.md)
> **Pipeline**: [pipeline.md](../pipeline.md)
> **Σχετικά UCs**: [UC-014](./UC-014-property-sale-process.md) (πώληση — Στάδιο 9 συνδέεται εδώ), [UC-011](./UC-011-defect-reporting.md) (ελαττώματα μετά την παράδοση)

---

## Trigger

Η πώληση ακινήτου ολοκλήρωσε τα στάδια 1-8 του [UC-014](./UC-014-property-sale-process.md) (συμβόλαιο υπογράφηκε, πληρωμές ολοκληρώθηκαν ή σε πρόγραμμα). Το ακίνητο είναι έτοιμο για παράδοση.

---

## Στάδια Διαδικασίας

### Επισκόπηση

```
ΠΡΟΕΤΟΙΜΑΣΙΑ → ΕΠΙΘΕΩΡΗΣΗ → SNAG LIST → ΔΙΟΡΘΩΣΕΙΣ → ΕΠΑΝΕΛΕΓΧΟΣ → ΠΑΡΑΔΟΣΗ ΚΛΕΙΔΙΩΝ → ΕΓΓΥΗΣΗ
```

---

### Στάδιο 1: Προετοιμασία Παράδοσης

| Πεδίο | Λεπτομέρεια |
|-------|-------------|
| **Κατάσταση** | `handover_preparation` |
| **Ενέργειες AI** | Checklist ετοιμότητας, κλείσιμο ραντεβού επιθεώρησης |

**Checklist προ-παράδοσης**:

| Έλεγχος | Αρμόδιος | Σημειώσεις |
|---------|----------|-----------|
| ☐ Εργασίες κατασκευής ολοκληρώθηκαν | `siteManager` | Κανένα ανοιχτό task |
| ☐ Καθαρισμός ακινήτου | `siteManager` | Μετά-κατασκευαστικός καθαρισμός |
| ☐ Κοινόχρηστοι χώροι έτοιμοι | `siteManager` | Είσοδος, κλιμακοστάσιο, parking |
| ☐ Η/Μ εγκαταστάσεις λειτουργούν | `mechanicalEngineer` | Ρεύμα, νερό, θέρμανση, A/C |
| ☐ Παροχές ενεργές (ΔΕΗ, ΕΥΔΑΠ) | `mechanicalEngineer` | Αριθμοί παροχών καταγράφηκαν |
| ☐ Πληρωμές ενημερωμένες | `accountant` | Καμία overdue δόση |
| ☐ Ραντεβού επιθεώρησης κλείστηκε | `salesManager` | Με αγοραστή |

**ΚΑΝΟΝΑΣ**: Δεν κλείνεται ραντεβού επιθεώρησης αν δεν είναι ✅ ΟΛΑ τα παραπάνω.

---

### Στάδιο 2: Επιθεώρηση με Αγοραστή

| Πεδίο | Λεπτομέρεια |
|-------|-------------|
| **Κατάσταση** | `inspection_scheduled` → `inspection_completed` |
| **Παρόντες** | Αγοραστής + `siteManager` (+ `salesManager` προαιρετικά) |
| **Ενέργειες AI** | Δημιουργία φόρμας επιθεώρησης, tracking ευρημάτων |

**Φόρμα επιθεώρησης ανά χώρο**:

| Χώρος | Σημεία ελέγχου |
|-------|---------------|
| **Σαλόνι/Καθιστικό** | Δάπεδο, τοίχοι, βαφή, πρίζες, φωτιστικά, κουφώματα |
| **Κουζίνα** | Πάγκος, ντουλάπια, υδραυλικά, αποχέτευση, ηλεκτρικά |
| **Υπνοδωμάτια** | Δάπεδο, τοίχοι, βαφή, ντουλάπες, κουφώματα |
| **Μπάνιο/WC** | Πλακάκια, υδραυλικά, αποχέτευση, είδη υγιεινής, αρμοί |
| **Μπαλκόνια** | Δάπεδο, κάγκελα, αποστράγγιση, μόνωση |
| **Κοινόχρηστα** | Είσοδος, ασανσέρ, κλιμακοστάσιο, parking, αποθήκη |
| **Η/Μ** | Θέρμανση, κλιματισμός, ηλεκτρολογικός πίνακας, θυροτηλεόραση |

**Για κάθε σημείο**: OK ✅ / Ελάττωμα ❌ (+ περιγραφή + φωτογραφία)

---

### Στάδιο 3: Snag List (Λίστα Ελαττωμάτων)

| Πεδίο | Λεπτομέρεια |
|-------|-------------|
| **Κατάσταση** | `snag_list_created` |
| **Ενέργειες AI** | Κατηγοριοποίηση ελαττωμάτων, ανάθεση σε αρμόδιους, SLA |

**Κατηγοριοποίηση** (ίδια λογική με [UC-011](./UC-011-defect-reporting.md)):

| Κατηγορία | Παράδειγμα | Αρμόδιος | SLA |
|-----------|-----------|----------|-----|
| **structural** | Ρωγμή σε τοίχο | `civilEngineer` | 7 μέρες |
| **mechanical** | Στάζει βρύση | `mechanicalEngineer` | 5 μέρες |
| **cosmetic** | Γρατζουνιά στο δάπεδο | `siteManager` | 10 μέρες |
| **safety** | Πρόβλημα σε κάγκελο | `siteManager` | 2 μέρες |

**AI + VISION**: Αν υπάρχουν φωτογραφίες → η AI αναλύει και κατηγοριοποιεί αυτόματα.

**Αν snag list = κενό**: Μεταβαίνουμε κατευθείαν στο Στάδιο 5 (Παράδοση Κλειδιών).

---

### Στάδιο 4: Διορθώσεις & Επανέλεγχος

| Πεδίο | Λεπτομέρεια |
|-------|-------------|
| **Κατάσταση** | `repairs_in_progress` → `repairs_complete` |
| **Ενέργειες AI** | Tracking κάθε item του snag list, alerts SLA, ενημέρωση αγοραστή |

**Tracking ανά item**:

| Κατάσταση | Σημασία |
|-----------|---------|
| `pending` | Δεν ξεκίνησε |
| `assigned` | Ανατέθηκε σε τεχνίτη/υπεργολάβο |
| `in_progress` | Σε εξέλιξη |
| `fixed` | Διορθώθηκε — αναμονή επανελέγχου |
| `verified` | Ο αγοραστής επιβεβαίωσε |

**Auto-ενημέρωση αγοραστή**: Κάθε φορά που ένα item γίνεται `fixed` → AI προτείνει email: "Σας ενημερώνουμε ότι το [πρόβλημα] στο [χώρο] διορθώθηκε."

**Επανέλεγχος**: Όταν ΟΛΑ τα items = `fixed` → AI προτείνει νέο ραντεβού επιθεώρησης.

**ΚΑΝΟΝΑΣ**: Δεν παραδίδονται κλειδιά αν υπάρχει **safety** item μη-διορθωμένο.

---

### Στάδιο 5: Παράδοση Κλειδιών

| Πεδίο | Λεπτομέρεια |
|-------|-------------|
| **Κατάσταση** | `handover_scheduled` → `handover_complete` |
| **Ενέργειες AI** | Δημιουργία πρωτοκόλλου, ενημέρωση συστήματος |

**Πρωτόκολλο παράδοσης** (AI generates):

| Στοιχείο | Περιεχόμενο |
|----------|-----------|
| Ημερομηνία | Ημερομηνία παράδοσης |
| Ακίνητο | Project, κτίριο, όροφος, unit |
| Αγοραστής | Ονοματεπώνυμο, ΑΦΜ |
| Κλειδιά | Πόσα σετ, τι κλειδιά (εξώπορτα, αποθήκη, parking, γραμματοκιβώτιο) |
| Αριθμοί παροχών | ΔΕΗ, ΕΥΔΑΠ, φυσικό αέριο |
| Μετρητές | Ενδείξεις ρεύματος/νερού κατά την παράδοση |
| Εγχειρίδια | Boiler, A/C, θυροτηλεόραση, ανελκυστήρας |
| Snag list | Κατάσταση (ΟΛΑ verified ή εκκρεμή με συμφωνία) |
| Υπογραφές | Αγοραστής + εκπρόσωπος εταιρείας |

**Μετά την παράδοση — αυτόματες ενέργειες**:
- Unit status → `delivered`
- Εγγύηση → ξεκινάει (ημερομηνία καταγράφεται)
- Ενημέρωση `accountant` → "Παράδοση ολοκληρώθηκε — τελικός λογαριασμός"
- Ενημέρωση `salesManager` → "Πώληση [unit] ολοκληρώθηκε πλήρως"

---

### Στάδιο 6: Εγγύηση (Warranty Period)

| Πεδίο | Λεπτομέρεια |
|-------|-------------|
| **Κατάσταση** | `warranty_active` → `warranty_expired` |
| **Ενέργειες AI** | Tracking εγγύησης, σύνδεση νέων defects |

**Περίοδοι εγγύησης** (config-driven):

| Κατηγορία | Default | Σημειώσεις |
|-----------|---------|-----------|
| Στατικά (σκελετός, θεμελίωση) | 10 χρόνια | Νομική υποχρέωση |
| Στεγανοποίηση (ταράτσα, υπόγειο) | 10 χρόνια | |
| Η/Μ εγκαταστάσεις | 2 χρόνια | Boiler, A/C, ηλεκτρολογικά |
| Αισθητικά (βαφή, πλακάκια, δάπεδα) | 2 χρόνια | |
| Κουφώματα | 5 χρόνια | Αλουμίνια, πόρτες |
| Συσκευές (αν περιλαμβάνονται) | 2 χρόνια | Εγγύηση κατασκευαστή |

**Σύνδεση με UC-011**: Όταν ο αγοραστής αναφέρει defect → η AI ελέγχει αυτόματα αν είναι εντός εγγύησης βάσει κατηγορίας και ημερομηνίας παράδοσης.

**Alerts**:
- 1 μήνα πριν τη λήξη κάθε εγγύησης → ενημέρωση αγοραστή: "Η εγγύηση [κατηγορία] λήγει στις [ημερομηνία]"
- Defect εντός εγγύησης → κανονική ροή UC-011 (δωρεάν επισκευή)
- Defect εκτός εγγύησης → ο operator ενημερώνει τον αγοραστή για τις επιλογές

---

## Κανάλια επικοινωνίας

Email (πρωτόκολλο, ενημερώσεις), Telegram (ειδοποιήσεις), In-app

---

## Routing

| Στάδιο | Κύριος αρμόδιος | Εμπλεκόμενοι |
|--------|-----------------|-------------|
| 1 Προετοιμασία | `siteManager` | `mechanicalEngineer`, `accountant` |
| 2 Επιθεώρηση | `siteManager` | `salesManager`, αγοραστής |
| 3 Snag list | `siteManager` | `civilEngineer`, `mechanicalEngineer` |
| 4 Διορθώσεις | `siteManager` | Τεχνίτες/υπεργολάβοι |
| 5 Παράδοση κλειδιών | `salesManager` | `siteManager`, `owner` |
| 6 Εγγύηση | `secretary` | Αρμόδιος μηχανικός (ανά defect) |

---

## AI Model Tier

- **FAST**: Checklists, tracking, ειδοποιήσεις, πρωτόκολλο παράδοσης
- **VISION**: Ανάλυση φωτογραφιών snag list

---

## Κανόνες

- **Δεν παραδίδονται κλειδιά** αν υπάρχει safety defect ανοιχτό
- **Δεν παραδίδονται κλειδιά** αν το checklist προ-παράδοσης δεν είναι πλήρες
- **Πρωτόκολλο = υποχρεωτικό**: Κάθε παράδοση πρέπει να έχει υπογεγραμμένο πρωτόκολλο
- **Εγγύηση = αυτόματη**: Ξεκινάει από την ημερομηνία παράδοσης, δεν χρειάζεται χειροκίνητη ενεργοποίηση
- **Ενδείξεις μετρητών**: Καταγράφονται κατά την παράδοση — αποτρέπει διαφωνίες για καταναλώσεις
