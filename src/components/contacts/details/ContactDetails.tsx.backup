'use client';

import React, { useState, useEffect, useCallback } from 'react';
import { ScrollArea } from "@/components/ui/scroll-area";
import { TabsContent } from '@/components/ui/tabs';
import { User, CreditCard, Phone, MapPin, Briefcase, StickyNote, Users, Info, FileText, History, X } from 'lucide-react';
import {
  Dialog,
  DialogContent,
} from "@/components/ui/dialog";
import type { Contact } from '@/types/contacts';
import { ContactDetailsHeader } from './ContactDetailsHeader';
import { ContactInfo } from './ContactInfo';
import { AddUnitToContactDialog } from './AddUnitToContactDialog';
import { TabsOnlyTriggers } from '@/components/ui/navigation/TabsComponents';
import { createTabsFromConfig, getSortedSections } from '@/components/generic';


function EmptyState() {
    return (
        <div className="flex-1 flex flex-col items-center justify-center bg-card border rounded-lg min-w-0 shadow-sm text-center p-8">
            <Users className="w-16 h-16 text-muted-foreground mb-4" />
            <h2 className="text-xl font-semibold text-foreground">Î•Ï€Î¹Î»Î­Î¾Ï„Îµ Î¼Î¹Î± ÎµÏ€Î±Ï†Î®</h2>
            <p className="text-muted-foreground">Î•Ï€Î¹Î»Î­Î¾Ï„Îµ Î¼Î¹Î± ÎµÏ€Î±Ï†Î® Î±Ï€ÏŒ Ï„Î· Î»Î¯ÏƒÏ„Î± Î³Î¹Î± Î½Î± Î´ÎµÎ¯Ï„Îµ Ï„Î¹Ï‚ Î»ÎµÏ€Ï„Î¿Î¼Î­ÏÎµÎ¹Î­Ï‚ Ï„Î·Ï‚.</p>
        </div>
    );
}

interface ContactDetailsProps {
  contact: Contact | null;
  onEditContact?: () => void;
  onDeleteContact?: () => void;
}

export function ContactDetails({ contact, onEditContact, onDeleteContact }: ContactDetailsProps) {
  const [isAddUnitDialogOpen, setIsAddUnitDialogOpen] = useState(false);
  const [isPhotoModalOpen, setIsPhotoModalOpen] = useState(false);

  const handleUnitAdded = useCallback(() => {
    // TODO: Refresh data when unit is added
  }, []);

  const handleRefresh = useCallback(() => {
    // TODO: Refresh contact data
  }, []);

  if (!contact) {
    return <EmptyState />;
  }

  // Define tabs configuration based on contact type
  const isCompanyContact = contact.type === 'company';

  // Get company tabs from centralized config
  const tabs = isCompanyContact ? createTabsFromConfig(
    getSortedSections(),
    contact
  ) :
    {
      id: 'basicInfo',
      label: 'Î’Î±ÏƒÎ¹ÎºÎ¬ Î£Ï„Î¿Î¹Ï‡ÎµÎ¯Î± Î“Î•ÎœÎ—',
      icon: Info,
      content: (
        <div className="p-4 border rounded-lg space-y-4">
          <h4 className="font-semibold mb-3">Î’Î±ÏƒÎ¹ÎºÎ¬ Î£Ï„Î¿Î¹Ï‡ÎµÎ¯Î± Î±Ï€ÏŒ Î“Î•ÎœÎ—</h4>
          <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <label className="text-sm font-medium">Î•Ï€Ï‰Î½Ï…Î¼Î¯Î± Î•Ï„Î±Î¹ÏÎµÎ¯Î±Ï‚</label>
              <p className="text-sm text-muted-foreground">{(contact as any).companyName || (contact as any).serviceTitle || 'Î”ÎµÎ½ Î­Ï‡ÎµÎ¹ Î¿ÏÎ¹ÏƒÏ„ÎµÎ¯'}</p>
            </div>
            <div>
              <label className="text-sm font-medium">Î”Î¹Î±ÎºÏÎ¹Ï„Î¹ÎºÏŒÏ‚ Î¤Î¯Ï„Î»Î¿Ï‚</label>
              <p className="text-sm text-muted-foreground">{(contact as any).tradeName || 'Î”ÎµÎ½ Î­Ï‡ÎµÎ¹ Î¿ÏÎ¹ÏƒÏ„ÎµÎ¯'}</p>
            </div>
            <div>
              <label className="text-sm font-medium">Î‘Î¦Îœ</label>
              <p className="text-sm text-muted-foreground">{(contact as any).serviceVatNumber || (contact as any).vatNumber || 'Î”ÎµÎ½ Î­Ï‡ÎµÎ¹ Î¿ÏÎ¹ÏƒÏ„ÎµÎ¯'}</p>
            </div>
            <div>
              <label className="text-sm font-medium">Î‘ÏÎ¹Î¸Î¼ÏŒÏ‚ Î“Î•ÎœÎ—</label>
              <p className="text-sm text-muted-foreground">{(contact as any).gemiNumber || 'Î”ÎµÎ½ Î­Ï‡ÎµÎ¹ Î¿ÏÎ¹ÏƒÏ„ÎµÎ¯'}</p>
            </div>
            <div>
              <label className="text-sm font-medium">ÎÎ¿Î¼Î¹ÎºÎ® ÎœÎ¿ÏÏ†Î®</label>
              <p className="text-sm text-muted-foreground">{(contact as any).legalForm || 'Î”ÎµÎ½ Î­Ï‡ÎµÎ¹ Î¿ÏÎ¹ÏƒÏ„ÎµÎ¯'}</p>
            </div>
            <div>
              <label className="text-sm font-medium">ÎšÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ· Î“Î•ÎœÎ—</label>
              <p className="text-sm text-muted-foreground">{(contact as any).gemiStatus || 'Î”ÎµÎ½ Î­Ï‡ÎµÎ¹ Î¿ÏÎ¹ÏƒÏ„ÎµÎ¯'}</p>
            </div>
            <div>
              <label className="text-sm font-medium">Email</label>
              <p className="text-sm text-muted-foreground">{(contact as any).emails?.[0]?.email || 'Î”ÎµÎ½ Î­Ï‡ÎµÎ¹ Î¿ÏÎ¹ÏƒÏ„ÎµÎ¯'}</p>
            </div>
            <div>
              <label className="text-sm font-medium">Î¤Î·Î»Î­Ï†Ï‰Î½Î¿</label>
              <p className="text-sm text-muted-foreground">{(contact as any).phones?.[0]?.number || 'Î”ÎµÎ½ Î­Ï‡ÎµÎ¹ Î¿ÏÎ¹ÏƒÏ„ÎµÎ¯'}</p>
            </div>
          </div>
        </div>
      )
    },
    {
      id: 'activities',
      label: 'Î”ÏÎ±ÏƒÏ„Î·ÏÎ¹ÏŒÏ„Î·Ï„ÎµÏ‚ & ÎšÎ‘Î”',
      icon: FileText,
      content: (
        <div className="p-4 border rounded-lg space-y-4">
          <h4 className="font-semibold mb-3">Î”ÏÎ±ÏƒÏ„Î·ÏÎ¹ÏŒÏ„Î·Ï„ÎµÏ‚ & ÎšÏ‰Î´Î¹ÎºÎ¿Î¯ ÎšÎ‘Î”</h4>
          <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <label className="text-sm font-medium">ÎšÏ‰Î´Î¹ÎºÏŒÏ‚ ÎšÎ‘Î”</label>
              <p className="text-sm text-muted-foreground">{(contact as any).activityCodeKAD || 'Î”ÎµÎ½ Î­Ï‡ÎµÎ¹ Î¿ÏÎ¹ÏƒÏ„ÎµÎ¯'}</p>
            </div>
            <div>
              <label className="text-sm font-medium">Î ÎµÏÎ¹Î³ÏÎ±Ï†Î® Î”ÏÎ±ÏƒÏ„Î·ÏÎ¹ÏŒÏ„Î·Ï„Î±Ï‚</label>
              <p className="text-sm text-muted-foreground">{(contact as any).activityDescription || 'Î”ÎµÎ½ Î­Ï‡ÎµÎ¹ Î¿ÏÎ¹ÏƒÏ„ÎµÎ¯'}</p>
            </div>
            <div>
              <label className="text-sm font-medium">Î¤ÏÏ€Î¿Ï‚ Î”ÏÎ±ÏƒÏ„Î·ÏÎ¹ÏŒÏ„Î·Ï„Î±Ï‚</label>
              <p className="text-sm text-muted-foreground">{(contact as any).activityType || 'Î”ÎµÎ½ Î­Ï‡ÎµÎ¹ Î¿ÏÎ¹ÏƒÏ„ÎµÎ¯'}</p>
            </div>
            <div>
              <label className="text-sm font-medium">Î•Ï€Î¹Î¼ÎµÎ»Î·Ï„Î®ÏÎ¹Î¿</label>
              <p className="text-sm text-muted-foreground">{(contact as any).chamber || 'Î”ÎµÎ½ Î­Ï‡ÎµÎ¹ Î¿ÏÎ¹ÏƒÏ„ÎµÎ¯'}</p>
            </div>
          </div>
        </div>
      )
    },
    {
      id: 'capital',
      label: 'ÎšÎµÏ†Î¬Î»Î±Î¹Î¿ & ÎœÎµÏ„Î¿Ï‡Î­Ï‚',
      icon: FileText,
      content: (
        <div className="p-4 border rounded-lg space-y-4">
          <h4 className="font-semibold mb-3">ÎšÎµÏ†Î¬Î»Î±Î¹Î¿ & ÎœÎµÏ„Î¿Ï‡Î¹ÎºÎ® Î£ÏÎ½Î¸ÎµÏƒÎ·</h4>
          <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
            <div>
              <label className="text-sm font-medium">ÎšÎµÏ†Î¬Î»Î±Î¹Î¿</label>
              <p className="text-sm text-muted-foreground">{(contact as any).capitalAmount || 'Î”ÎµÎ½ Î­Ï‡ÎµÎ¹ Î¿ÏÎ¹ÏƒÏ„ÎµÎ¯'}</p>
            </div>
            <div>
              <label className="text-sm font-medium">ÎÏŒÎ¼Î¹ÏƒÎ¼Î±</label>
              <p className="text-sm text-muted-foreground">{(contact as any).currency || 'EUR'}</p>
            </div>
            <div>
              <label className="text-sm font-medium">Î•Î¾Ï‰Î»Î¿Î³Î¹ÏƒÏ„Î¹ÎºÎ¬ ÎšÎµÏ†Î¬Î»Î±Î¹Î±</label>
              <p className="text-sm text-muted-foreground">{(contact as any).extraordinaryCapital || 'Î”ÎµÎ½ Î­Ï‡ÎµÎ¹ Î¿ÏÎ¹ÏƒÏ„ÎµÎ¯'}</p>
            </div>
          </div>

          {(contact as any).shareholders && (contact as any).shareholders.length > 0 ? (
            <div>
              <h5 className="font-medium mb-2">ÎœÎµÏ„Î¿Ï‡Î¹ÎºÎ® Î£ÏÎ½Î¸ÎµÏƒÎ·</h5>
              <div className="space-y-2">
                {(contact as any).shareholders.map((shareholder: any, index: number) => (
                  <div key={index} className="border border-gray-200 rounded p-3">
                    <div className="grid grid-cols-1 md:grid-cols-3 gap-2 text-sm">
                      <div>
                        <span className="font-medium">ÎœÎ­Ï„Î¿Ï‡Î¿Ï‚:</span> {shareholder.shareholderName || 'Î”ÎµÎ½ Î­Ï‡ÎµÎ¹ Î¿ÏÎ¹ÏƒÏ„ÎµÎ¯'}
                      </div>
                      <div>
                        <span className="font-medium">Î Î¿ÏƒÎ¿ÏƒÏ„ÏŒ:</span> {shareholder.percentage || 'Î”ÎµÎ½ Î­Ï‡ÎµÎ¹ Î¿ÏÎ¹ÏƒÏ„ÎµÎ¯'}%
                      </div>
                      <div>
                        <span className="font-medium">Î¤ÏÏ€Î¿Ï‚:</span> {shareholder.shareholderType || 'Î”ÎµÎ½ Î­Ï‡ÎµÎ¹ Î¿ÏÎ¹ÏƒÏ„ÎµÎ¯'}
                      </div>
                    </div>
                  </div>
                ))}
              </div>
            </div>
          ) : (
            <p className="text-sm text-muted-foreground">Î”ÎµÎ½ Ï…Ï€Î¬ÏÏ‡Î¿Ï…Î½ ÏƒÏ„Î¿Î¹Ï‡ÎµÎ¯Î± Î¼ÎµÏ„Î¿Ï‡Î¹ÎºÎ®Ï‚ ÏƒÏÎ½Î¸ÎµÏƒÎ·Ï‚</p>
          )}
        </div>
      )
    },
    {
      id: 'representatives',
      label: 'Î•ÎºÏ€ÏÏŒÏƒÏ‰Ï€Î¿Î¹ & ÎŒÏÎ³Î±Î½Î±',
      icon: Users,
      content: (
        <div className="p-4 border rounded-lg space-y-4">
          <h4 className="font-semibold mb-3">Î•ÎºÏ€ÏÏŒÏƒÏ‰Ï€Î¿Î¹ & ÎŒÏÎ³Î±Î½Î± Î”Î¹Î¿Î¯ÎºÎ·ÏƒÎ·Ï‚</h4>

          {(contact as any).representatives && (contact as any).representatives.length > 0 ? (
            <div className="space-y-3">
              {(contact as any).representatives.map((rep: any, index: number) => (
                <div key={index} className="border border-gray-200 rounded p-4">
                  <div className="grid grid-cols-1 md:grid-cols-2 gap-3">
                    <div>
                      <label className="text-sm font-medium">ÎŸÎ½Î¿Î¼Î±Ï„ÎµÏ€ÏÎ½Ï…Î¼Î¿</label>
                      <p className="text-sm text-muted-foreground">{rep.name || 'Î”ÎµÎ½ Î­Ï‡ÎµÎ¹ Î¿ÏÎ¹ÏƒÏ„ÎµÎ¯'}</p>
                    </div>
                    <div>
                      <label className="text-sm font-medium">Î™Î´Î¹ÏŒÏ„Î·Ï„Î±/Î¡ÏŒÎ»Î¿Ï‚</label>
                      <p className="text-sm text-muted-foreground">{rep.role || 'Î”ÎµÎ½ Î­Ï‡ÎµÎ¹ Î¿ÏÎ¹ÏƒÏ„ÎµÎ¯'}</p>
                    </div>
                    <div>
                      <label className="text-sm font-medium">Email</label>
                      <p className="text-sm text-muted-foreground">{rep.email || 'Î”ÎµÎ½ Î­Ï‡ÎµÎ¹ Î¿ÏÎ¹ÏƒÏ„ÎµÎ¯'}</p>
                    </div>
                    <div>
                      <label className="text-sm font-medium">Î¤Î·Î»Î­Ï†Ï‰Î½Î¿</label>
                      <p className="text-sm text-muted-foreground">{rep.phone || 'Î”ÎµÎ½ Î­Ï‡ÎµÎ¹ Î¿ÏÎ¹ÏƒÏ„ÎµÎ¯'}</p>
                    </div>
                    <div>
                      <label className="text-sm font-medium">Î‘Î¦Îœ</label>
                      <p className="text-sm text-muted-foreground">{rep.taxNumber || 'Î”ÎµÎ½ Î­Ï‡ÎµÎ¹ Î¿ÏÎ¹ÏƒÏ„ÎµÎ¯'}</p>
                    </div>
                    <div>
                      <label className="text-sm font-medium">Î”ÎŸÎ¥</label>
                      <p className="text-sm text-muted-foreground">{rep.taxOffice || 'Î”ÎµÎ½ Î­Ï‡ÎµÎ¹ Î¿ÏÎ¹ÏƒÏ„ÎµÎ¯'}</p>
                    </div>
                  </div>
                </div>
              ))}
            </div>
          ) : (
            <p className="text-sm text-muted-foreground">Î”ÎµÎ½ Ï…Ï€Î¬ÏÏ‡Î¿Ï…Î½ ÏƒÏ„Î¿Î¹Ï‡ÎµÎ¯Î± ÎµÎºÏ€ÏÎ¿ÏƒÏÏ€Ï‰Î½</p>
          )}
        </div>
      )
    },
    {
      id: 'documents',
      label: 'ÎˆÎ³Î³ÏÎ±Ï†Î± & Î‘Î½Î±ÎºÎ¿Î¹Î½ÏÏƒÎµÎ¹Ï‚',
      icon: FileText,
      content: (
        <div className="p-4 border rounded-lg space-y-4">
          <h4 className="font-semibold mb-3">ÎˆÎ³Î³ÏÎ±Ï†Î± Î“Î•ÎœÎ— & Î‘Î½Î±ÎºÎ¿Î¹Î½ÏÏƒÎµÎ¹Ï‚</h4>

          {/* ÎˆÎ³Î³ÏÎ±Ï†Î± Î•Î³Î³ÏÎ±Ï†Î®Ï‚/Î£ÏÏƒÏ„Î±ÏƒÎ·Ï‚ */}
          <div>
            <h5 className="font-medium mb-2">ÎˆÎ³Î³ÏÎ±Ï†Î± Î•Î³Î³ÏÎ±Ï†Î®Ï‚</h5>
            {(contact as any).documents?.registrationDocs && (contact as any).documents.registrationDocs.length > 0 ? (
              <div className="space-y-2">
                {(contact as any).documents.registrationDocs.map((doc: any, index: number) => (
                  <div key={index} className="border border-gray-200 rounded p-3">
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-2 text-sm">
                      <div>
                        <span className="font-medium">ÎšÏ‰Î´Î¹ÎºÏŒÏ‚:</span> {doc.code || 'Î”ÎµÎ½ Î­Ï‡ÎµÎ¹ Î¿ÏÎ¹ÏƒÏ„ÎµÎ¯'}
                      </div>
                      <div>
                        <span className="font-medium">Î˜Î­Î¼Î±:</span> {doc.subject || 'Î”ÎµÎ½ Î­Ï‡ÎµÎ¹ Î¿ÏÎ¹ÏƒÏ„ÎµÎ¯'}
                      </div>
                    </div>
                  </div>
                ))}
              </div>
            ) : (
              <p className="text-sm text-muted-foreground">Î”ÎµÎ½ Ï…Ï€Î¬ÏÏ‡Î¿Ï…Î½ Î­Î³Î³ÏÎ±Ï†Î± ÎµÎ³Î³ÏÎ±Ï†Î®Ï‚</p>
            )}
          </div>

          {/* Î‘Î½Î±ÎºÎ¿Î¹Î½ÏÏƒÎµÎ¹Ï‚ */}
          <div>
            <h5 className="font-medium mb-2">Î‘Î½Î±ÎºÎ¿Î¹Î½ÏÏƒÎµÎ¹Ï‚</h5>
            {(contact as any).announcements && (contact as any).announcements.length > 0 ? (
              <div className="space-y-2">
                {(contact as any).announcements.map((announcement: any, index: number) => (
                  <div key={index} className="border border-gray-200 rounded p-3">
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-2 text-sm">
                      <div>
                        <span className="font-medium">Î—Î¼ÎµÏÎ¿Î¼Î·Î½Î¯Î±:</span> {announcement.announcementDate || 'Î”ÎµÎ½ Î­Ï‡ÎµÎ¹ Î¿ÏÎ¹ÏƒÏ„ÎµÎ¯'}
                      </div>
                      <div>
                        <span className="font-medium">ÎˆÎºÎ´Î¿ÏƒÎ·:</span> {announcement.issuePaper || 'Î”ÎµÎ½ Î­Ï‡ÎµÎ¹ Î¿ÏÎ¹ÏƒÏ„ÎµÎ¯'}
                      </div>
                      <div className="md:col-span-2">
                        <span className="font-medium">Î ÎµÏÎ¯Î»Î·ÏˆÎ·:</span> {announcement.summary || 'Î”ÎµÎ½ Î­Ï‡ÎµÎ¹ Î¿ÏÎ¹ÏƒÏ„ÎµÎ¯'}
                      </div>
                    </div>
                  </div>
                ))}
              </div>
            ) : (
              <p className="text-sm text-muted-foreground">Î”ÎµÎ½ Ï…Ï€Î¬ÏÏ‡Î¿Ï…Î½ Î±Î½Î±ÎºÎ¿Î¹Î½ÏÏƒÎµÎ¹Ï‚</p>
            )}
          </div>
        </div>
      )
    },
    {
      id: 'decisions',
      label: 'Î‘Ï€Î¿Ï†Î¬ÏƒÎµÎ¹Ï‚ & Î ÏÎ±ÎºÏ„Î¹ÎºÎ¬',
      icon: FileText,
      content: (
        <div className="p-4 border rounded-lg space-y-4">
          <h4 className="font-semibold mb-3">Î‘Ï€Î¿Ï†Î¬ÏƒÎµÎ¹Ï‚ ÎŸÏÎ³Î¬Î½Ï‰Î½ & Î ÏÎ±ÎºÏ„Î¹ÎºÎ¬</h4>

          {(contact as any).decisions && (contact as any).decisions.length > 0 ? (
            <div className="space-y-3">
              {(contact as any).decisions.map((decision: any, index: number) => (
                <div key={index} className="border border-gray-200 rounded p-4">
                  <div className="grid grid-cols-1 md:grid-cols-2 gap-3">
                    <div>
                      <label className="text-sm font-medium">Î—Î¼ÎµÏÎ¿Î¼Î·Î½Î¯Î± Î‘Ï€ÏŒÏ†Î±ÏƒÎ·Ï‚</label>
                      <p className="text-sm text-muted-foreground">{decision.decisionDate || 'Î”ÎµÎ½ Î­Ï‡ÎµÎ¹ Î¿ÏÎ¹ÏƒÏ„ÎµÎ¯'}</p>
                    </div>
                    <div>
                      <label className="text-sm font-medium">Î¤ÏÏ€Î¿Ï‚ ÎŸÏÎ³Î¬Î½Î¿Ï…</label>
                      <p className="text-sm text-muted-foreground">{decision.organType || 'Î”ÎµÎ½ Î­Ï‡ÎµÎ¹ Î¿ÏÎ¹ÏƒÏ„ÎµÎ¯'}</p>
                    </div>
                    <div>
                      <label className="text-sm font-medium">Î‘ÏÎ¹Î¸Î¼ÏŒÏ‚ Î ÏÏ‰Ï„Î¿ÎºÏŒÎ»Î»Î¿Ï…</label>
                      <p className="text-sm text-muted-foreground">{decision.protocolNumber || 'Î”ÎµÎ½ Î­Ï‡ÎµÎ¹ Î¿ÏÎ¹ÏƒÏ„ÎµÎ¯'}</p>
                    </div>
                    <div>
                      <label className="text-sm font-medium">Î˜Î­Î¼Î±</label>
                      <p className="text-sm text-muted-foreground">{decision.subject || 'Î”ÎµÎ½ Î­Ï‡ÎµÎ¹ Î¿ÏÎ¹ÏƒÏ„ÎµÎ¯'}</p>
                    </div>
                    <div className="md:col-span-2">
                      <label className="text-sm font-medium">Î ÎµÏÎ¯Î»Î·ÏˆÎ·</label>
                      <p className="text-sm text-muted-foreground">{decision.summary || 'Î”ÎµÎ½ Î­Ï‡ÎµÎ¹ Î¿ÏÎ¹ÏƒÏ„ÎµÎ¯'}</p>
                    </div>
                  </div>
                </div>
              ))}
            </div>
          ) : (
            <p className="text-sm text-muted-foreground">Î”ÎµÎ½ Ï…Ï€Î¬ÏÏ‡Î¿Ï…Î½ Î±Ï€Î¿Ï†Î¬ÏƒÎµÎ¹Ï‚ Î¿ÏÎ³Î¬Î½Ï‰Î½</p>
          )}
        </div>
      )
    },
    {
      id: 'history',
      label: 'ÎœÎµÏ„Î±Î²Î¿Î»Î­Ï‚ & Î™ÏƒÏ„Î¿ÏÎ¹ÎºÏŒ',
      icon: History,
      content: (
        <div className="p-4 border rounded-lg space-y-4">
          <h4 className="font-semibold mb-3">ÎœÎµÏ„Î±Î²Î¿Î»Î­Ï‚ & Î™ÏƒÏ„Î¿ÏÎ¹ÎºÏŒ</h4>

          {/* Î’Î±ÏƒÎ¹ÎºÎ­Ï‚ Î·Î¼ÎµÏÎ¿Î¼Î·Î½Î¯ÎµÏ‚ */}
          <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
            <div>
              <label className="text-sm font-medium">Î—Î¼ÎµÏÎ¿Î¼Î·Î½Î¯Î± Î•Î³Î³ÏÎ±Ï†Î®Ï‚</label>
              <p className="text-sm text-muted-foreground">{(contact as any).registrationDate || 'Î”ÎµÎ½ Î­Ï‡ÎµÎ¹ Î¿ÏÎ¹ÏƒÏ„ÎµÎ¯'}</p>
            </div>
            <div>
              <label className="text-sm font-medium">Î¤ÎµÎ»ÎµÏ…Ï„Î±Î¯Î± Î•Î½Î·Î¼Î­ÏÏ‰ÏƒÎ·</label>
              <p className="text-sm text-muted-foreground">{(contact as any).lastUpdateDate || 'Î”ÎµÎ½ Î­Ï‡ÎµÎ¹ Î¿ÏÎ¹ÏƒÏ„ÎµÎ¯'}</p>
            </div>
            <div>
              <label className="text-sm font-medium">Î—Î¼ÎµÏÎ¿Î¼Î·Î½Î¯Î± ÎšÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·Ï‚</label>
              <p className="text-sm text-muted-foreground">{(contact as any).gemiStatusDate || 'Î”ÎµÎ½ Î­Ï‡ÎµÎ¹ Î¿ÏÎ¹ÏƒÏ„ÎµÎ¯'}</p>
            </div>
            <div>
              <label className="text-sm font-medium">Î¤Î¿Ï€Î¹ÎºÎ® Î¥Ï€Î·ÏÎµÏƒÎ¯Î± Î“Î•ÎœÎ—</label>
              <p className="text-sm text-muted-foreground">{(contact as any).gemiDepartment || 'Î”ÎµÎ½ Î­Ï‡ÎµÎ¹ Î¿ÏÎ¹ÏƒÏ„ÎµÎ¯'}</p>
            </div>
          </div>

          {/* Î¥Ï€Î¿ÎºÎ±Ï„Î±ÏƒÏ„Î®Î¼Î±Ï„Î± */}
          {(contact as any).branches && (contact as any).branches.length > 0 ? (
            <div>
              <h5 className="font-medium mb-2">Î¥Ï€Î¿ÎºÎ±Ï„Î±ÏƒÏ„Î®Î¼Î±Ï„Î±</h5>
              <div className="space-y-2">
                {(contact as any).branches.map((branch: any, index: number) => (
                  <div key={index} className="border border-gray-200 rounded p-3">
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-2 text-sm">
                      <div>
                        <span className="font-medium">Î”Î¹ÎµÏÎ¸Ï…Î½ÏƒÎ·:</span> {branch.address?.street} {branch.address?.number}, {branch.address?.city}
                      </div>
                      <div>
                        <span className="font-medium">ÎšÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·:</span> {branch.status || 'Î”ÎµÎ½ Î­Ï‡ÎµÎ¹ Î¿ÏÎ¹ÏƒÏ„ÎµÎ¯'}
                      </div>
                      <div>
                        <span className="font-medium">Î—Î¼ÎµÏÎ¿Î¼Î·Î½Î¯Î± ÎŠÎ´ÏÏ…ÏƒÎ·Ï‚:</span> {branch.establishedDate || 'Î”ÎµÎ½ Î­Ï‡ÎµÎ¹ Î¿ÏÎ¹ÏƒÏ„ÎµÎ¯'}
                      </div>
                    </div>
                  </div>
                ))}
              </div>
            </div>
          ) : (
            <p className="text-sm text-muted-foreground">Î”ÎµÎ½ Ï…Ï€Î¬ÏÏ‡Î¿Ï…Î½ Ï…Ï€Î¿ÎºÎ±Ï„Î±ÏƒÏ„Î®Î¼Î±Ï„Î±</p>
          )}

          {/* Î“ÎµÏ‰Î³ÏÎ±Ï†Î¹ÎºÎ¬ ÏƒÏ„Î¿Î¹Ï‡ÎµÎ¯Î± */}
          <div>
            <h5 className="font-medium mb-2">Î“ÎµÏ‰Î³ÏÎ±Ï†Î¹ÎºÎ¬ Î£Ï„Î¿Î¹Ï‡ÎµÎ¯Î±</h5>
            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <label className="text-sm font-medium">ÎÎ¿Î¼ÏŒÏ‚</label>
                <p className="text-sm text-muted-foreground">{(contact as any).prefecture || 'Î”ÎµÎ½ Î­Ï‡ÎµÎ¹ Î¿ÏÎ¹ÏƒÏ„ÎµÎ¯'}</p>
              </div>
              <div>
                <label className="text-sm font-medium">Î”Î®Î¼Î¿Ï‚</label>
                <p className="text-sm text-muted-foreground">{(contact as any).municipality || 'Î”ÎµÎ½ Î­Ï‡ÎµÎ¹ Î¿ÏÎ¹ÏƒÏ„ÎµÎ¯'}</p>
              </div>
            </div>
          </div>
        </div>
      )
    }
  ] : contact.type === 'service' ? [
    {
      id: 'serviceInfo',
      label: 'Î£Ï„Î¿Î¹Ï‡ÎµÎ¯Î± Î¥Ï€Î·ÏÎµÏƒÎ¯Î±Ï‚',
      icon: Info,
      content: (
        <div className="p-4 border rounded-lg space-y-4">
          <h4 className="font-semibold mb-3">Î£Ï„Î¿Î¹Ï‡ÎµÎ¯Î± Î”Î·Î¼ÏŒÏƒÎ¹Î±Ï‚ Î¥Ï€Î·ÏÎµÏƒÎ¯Î±Ï‚</h4>
          <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <label className="text-sm font-medium">ÎŒÎ½Î¿Î¼Î± Î¥Ï€Î·ÏÎµÏƒÎ¯Î±Ï‚</label>
              <p className="text-sm text-muted-foreground">{(contact as any).serviceName || 'Î”ÎµÎ½ Î­Ï‡ÎµÎ¹ Î¿ÏÎ¹ÏƒÏ„ÎµÎ¯'}</p>
            </div>
            <div>
              <label className="text-sm font-medium">Î¤ÏÏ€Î¿Ï‚ Î¥Ï€Î·ÏÎµÏƒÎ¯Î±Ï‚</label>
              <p className="text-sm text-muted-foreground">{(contact as any).serviceType || 'Î”ÎµÎ½ Î­Ï‡ÎµÎ¹ Î¿ÏÎ¹ÏƒÏ„ÎµÎ¯'}</p>
            </div>
            <div>
              <label className="text-sm font-medium">Email</label>
              <p className="text-sm text-muted-foreground">{(contact as any).emails?.[0]?.email || 'Î”ÎµÎ½ Î­Ï‡ÎµÎ¹ Î¿ÏÎ¹ÏƒÏ„ÎµÎ¯'}</p>
            </div>
            <div>
              <label className="text-sm font-medium">Î¤Î·Î»Î­Ï†Ï‰Î½Î¿</label>
              <p className="text-sm text-muted-foreground">{(contact as any).phones?.[0]?.number || 'Î”ÎµÎ½ Î­Ï‡ÎµÎ¹ Î¿ÏÎ¹ÏƒÏ„ÎµÎ¯'}</p>
            </div>
            <div>
              <label className="text-sm font-medium">ÎšÏ‰Î´Î¹ÎºÏŒÏ‚ Î¥Ï€Î·ÏÎµÏƒÎ¯Î±Ï‚</label>
              <p className="text-sm text-muted-foreground">{(contact as any).serviceCode || 'Î”ÎµÎ½ Î­Ï‡ÎµÎ¹ Î¿ÏÎ¹ÏƒÏ„ÎµÎ¯'}</p>
            </div>
            <div>
              <label className="text-sm font-medium">ÎšÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·</label>
              <p className="text-sm text-muted-foreground">{(contact as any).status || 'Î”ÎµÎ½ Î­Ï‡ÎµÎ¹ Î¿ÏÎ¹ÏƒÏ„ÎµÎ¯'}</p>
            </div>
          </div>
        </div>
      )
    },
    {
      id: 'contacts',
      label: 'Î£Ï„Î¿Î¹Ï‡ÎµÎ¯Î± Î•Ï€Î¹ÎºÎ¿Î¹Î½Ï‰Î½Î¯Î±Ï‚',
      icon: Users,
      content: (
        <div className="p-4 border rounded-lg space-y-4">
          <h4 className="font-semibold mb-3">Î£Ï„Î¿Î¹Ï‡ÎµÎ¯Î± Î•Ï€Î¹ÎºÎ¿Î¹Î½Ï‰Î½Î¯Î±Ï‚</h4>

          {(contact as any).responsiblePersons && (contact as any).responsiblePersons.length > 0 ? (
            <div className="space-y-3">
              <h5 className="font-medium">Î¥Ï€ÎµÏÎ¸Ï…Î½Î¿Î¹ Î•Ï€Î¹ÎºÎ¿Î¹Î½Ï‰Î½Î¯Î±Ï‚</h5>
              {(contact as any).responsiblePersons.map((person: any, index: number) => (
                <div key={index} className="border border-gray-200 rounded p-3">
                  <div className="grid grid-cols-1 md:grid-cols-2 gap-2 text-sm">
                    <div><span className="font-medium">ÎŒÎ½Î¿Î¼Î±:</span> {person.name || 'Î”ÎµÎ½ Î­Ï‡ÎµÎ¹ Î¿ÏÎ¹ÏƒÏ„ÎµÎ¯'}</div>
                    <div><span className="font-medium">Î˜Î­ÏƒÎ·:</span> {person.position || 'Î”ÎµÎ½ Î­Ï‡ÎµÎ¹ Î¿ÏÎ¹ÏƒÏ„ÎµÎ¯'}</div>
                    <div><span className="font-medium">Email:</span> {person.email || 'Î”ÎµÎ½ Î­Ï‡ÎµÎ¹ Î¿ÏÎ¹ÏƒÏ„ÎµÎ¯'}</div>
                    <div><span className="font-medium">Î¤Î·Î»Î­Ï†Ï‰Î½Î¿:</span> {person.phone || 'Î”ÎµÎ½ Î­Ï‡ÎµÎ¹ Î¿ÏÎ¹ÏƒÏ„ÎµÎ¯'}</div>
                  </div>
                </div>
              ))}
            </div>
          ) : (
            <p className="text-sm text-muted-foreground">Î”ÎµÎ½ Ï…Ï€Î¬ÏÏ‡Î¿Ï…Î½ ÏƒÏ„Î¿Î¹Ï‡ÎµÎ¯Î± Ï…Ï€ÎµÏÎ¸Ï…Î½Ï‰Î½</p>
          )}
        </div>
      )
    },
    {
      id: 'services',
      label: 'Î Î±ÏÎµÏ‡ÏŒÎ¼ÎµÎ½ÎµÏ‚ Î¥Ï€Î·ÏÎµÏƒÎ¯ÎµÏ‚',
      icon: FileText,
      content: (
        <div className="p-4 border rounded-lg space-y-4">
          <h4 className="font-semibold mb-3">Î Î±ÏÎµÏ‡ÏŒÎ¼ÎµÎ½ÎµÏ‚ Î¥Ï€Î·ÏÎµÏƒÎ¯ÎµÏ‚</h4>

          {(contact as any).servicesProvided && (contact as any).servicesProvided.length > 0 ? (
            <ul className="space-y-2">
              {(contact as any).servicesProvided.map((service: string, index: number) => (
                <li key={index} className="flex items-center gap-2">
                  <span className="w-2 h-2 bg-primary rounded-full"></span>
                  <span className="text-sm">{service}</span>
                </li>
              ))}
            </ul>
          ) : (
            <p className="text-sm text-muted-foreground">Î”ÎµÎ½ Ï…Ï€Î¬ÏÏ‡Î¿Ï…Î½ ÎºÎ±Ï„Î±Ï‡Ï‰ÏÎ·Î¼Î­Î½ÎµÏ‚ Ï…Ï€Î·ÏÎµÏƒÎ¯ÎµÏ‚</p>
          )}

          {(contact as any).operatingHours && (
            <div className="mt-4">
              <h5 className="font-medium mb-2">Î©ÏÎ¬ÏÎ¹Î¿ Î›ÎµÎ¹Ï„Î¿Ï…ÏÎ³Î¯Î±Ï‚</h5>
              <div className="grid grid-cols-1 md:grid-cols-2 gap-2 text-sm">
                <div><span className="font-medium">Î”ÎµÏ…Ï„Î­ÏÎ± - Î Î±ÏÎ±ÏƒÎºÎµÏ…Î®:</span> 08:00 - 16:00</div>
              </div>
            </div>
          )}
        </div>
      )
    }
  ] : [
    {
      id: 'basic',
      label: 'Î’Î±ÏƒÎ¹ÎºÎ¬ Î£Ï„Î¿Î¹Ï‡ÎµÎ¯Î±',
      icon: User,
      content: (
        <div className="p-4 border rounded-lg space-y-6">
          <h4 className="font-semibold mb-4">ğŸ‘¤ Î’Î±ÏƒÎ¹ÎºÎ¬ Î£Ï„Î¿Î¹Ï‡ÎµÎ¯Î±</h4>

          {/* Î¦Ï‰Ï„Î¿Î³ÏÎ±Ï†Î¯Î± ÎºÎ±Î¹ Î²Î±ÏƒÎ¹ÎºÎ¬ */}
          <div className="flex flex-col md:flex-row gap-6">
            {/* Î¦Ï‰Ï„Î¿Î³ÏÎ±Ï†Î¯Î± */}
            <div className="flex flex-col items-center">
              {(contact as any).photoURL ? (
                <div
                  className="w-32 h-32 bg-muted rounded-lg overflow-hidden cursor-pointer hover:opacity-80 transition-opacity"
                  onClick={() => setIsPhotoModalOpen(true)}
                >
                  <img
                    src={(contact as any).photoURL}
                    alt={`Î¦Ï‰Ï„Î¿Î³ÏÎ±Ï†Î¯Î± ${contact.firstName} ${contact.lastName}`}
                    className="w-full h-full object-cover"
                    onError={(e) => {
                      const target = e.target as HTMLImageElement;
                      target.style.display = 'none';
                      const parent = target.parentElement;
                      if (parent) {
                        parent.innerHTML = '<div class="text-xs text-muted-foreground flex items-center justify-center h-full">âŒ Î†ÎºÏ…ÏÎ· ÎµÎ¹ÎºÏŒÎ½Î±</div>';
                      }
                    }}
                  />
                </div>
              ) : (
                <div className="w-32 h-32 bg-gray-100 border-2 border-gray-200 rounded-lg flex items-center justify-center">
                  <User className="w-16 h-16 text-gray-400" />
                </div>
              )}
              <p className="text-sm text-muted-foreground mt-2">ÎšÎ»Î¹Îº Î³Î¹Î± Ï€ÏÎ¿Î²Î¿Î»Î®</p>
            </div>

            {/* Î’Î±ÏƒÎ¹ÎºÎ¬ ÏƒÏ„Î¿Î¹Ï‡ÎµÎ¯Î± */}
            <div className="flex-1">
              <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                  <label className="text-sm font-medium">ÎŒÎ½Î¿Î¼Î±</label>
                  <p className="text-sm text-muted-foreground">{contact.firstName || '-'}</p>
                </div>
                <div>
                  <label className="text-sm font-medium">Î•Ï€ÏÎ½Ï…Î¼Î¿</label>
                  <p className="text-sm text-muted-foreground">{contact.lastName || '-'}</p>
                </div>
                <div>
                  <label className="text-sm font-medium">Î Î±Ï„ÏÏÎ½Ï…Î¼Î¿</label>
                  <p className="text-sm text-muted-foreground">{(contact as any).fatherName || '-'}</p>
                </div>
                <div>
                  <label className="text-sm font-medium">ÎœÎ·Ï„ÏÏÎ½Ï…Î¼Î¿</label>
                  <p className="text-sm text-muted-foreground">{(contact as any).motherName || '-'}</p>
                </div>
                <div>
                  <label className="text-sm font-medium">Î—Î¼ÎµÏÎ¿Î¼Î·Î½Î¯Î± Î“Î­Î½Î½Î·ÏƒÎ·Ï‚</label>
                  <p className="text-sm text-muted-foreground">{(contact as any).birthDate ? new Date((contact as any).birthDate).toLocaleDateString('el-GR') : '-'}</p>
                </div>
                <div>
                  <label className="text-sm font-medium">Î§ÏÏÎ± Î“Î­Î½Î½Î·ÏƒÎ·Ï‚</label>
                  <p className="text-sm text-muted-foreground">{(contact as any).birthCountry || '-'}</p>
                </div>
                <div>
                  <label className="text-sm font-medium">Î¦ÏÎ»Î¿</label>
                  <p className="text-sm text-muted-foreground">
                    {(contact as any).gender === 'male' ? 'Î†Î½Ï„ÏÎ±Ï‚' :
                     (contact as any).gender === 'female' ? 'Î“Ï…Î½Î±Î¯ÎºÎ±' :
                     (contact as any).gender === 'other' ? 'Î†Î»Î»Î¿' : '-'}
                  </p>
                </div>
                <div>
                  <label className="text-sm font-medium">Î‘ÎœÎšÎ‘ (Ï€ÏÎ¿Î±Î¹ÏÎµÏ„Î¹ÎºÏŒ)</label>
                  <p className="text-sm text-muted-foreground">{(contact as any).amka || '-'}</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      )
    },
    {
      id: 'identity',
      label: 'Î¤Î±Ï…Ï„ÏŒÏ„Î·Ï„Î± & Î‘Î¦Îœ',
      icon: CreditCard,
      content: (
        <div className="p-4 border rounded-lg">
          <h4 className="font-semibold mb-4">ğŸ’³ Î¤Î±Ï…Ï„ÏŒÏ„Î·Ï„Î± & Î‘Î¦Îœ</h4>
          <div className="space-y-4">
            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <label className="text-sm font-medium">Î¤ÏÏ€Î¿Ï‚ Î•Î³Î³ÏÎ¬Ï†Î¿Ï…</label>
                <p className="text-sm text-muted-foreground">
                  {(contact as any).documentType === 'identity_card' ? 'Î”ÎµÎ»Ï„Î¯Î¿ Î¤Î±Ï…Ï„ÏŒÏ„Î·Ï„Î±Ï‚' :
                   (contact as any).documentType === 'passport' ? 'Î”Î¹Î±Î²Î±Ï„Î®ÏÎ¹Î¿' :
                   (contact as any).documentType === 'drivers_license' ? 'Î†Î´ÎµÎ¹Î± ÎŸÎ´Î®Î³Î·ÏƒÎ·Ï‚' :
                   (contact as any).documentType === 'other' ? 'Î†Î»Î»Î¿' : '-'}
                </p>
              </div>
              <div>
                <label className="text-sm font-medium">Î•ÎºÎ´Î¿ÏÏƒÎ± Î‘ÏÏ‡Î®</label>
                <p className="text-sm text-muted-foreground">{(contact as any).documentIssuer || '-'}</p>
              </div>
              <div>
                <label className="text-sm font-medium">Î‘ÏÎ¹Î¸Î¼ÏŒÏ‚ Î•Î³Î³ÏÎ¬Ï†Î¿Ï…</label>
                <p className="text-sm text-muted-foreground">{(contact as any).documentNumber || '-'}</p>
              </div>
              <div>
                <label className="text-sm font-medium">Î—Î¼ÎµÏÎ¿Î¼Î·Î½Î¯Î± ÎˆÎºÎ´Î¿ÏƒÎ·Ï‚</label>
                <p className="text-sm text-muted-foreground">{(contact as any).documentIssueDate ? new Date((contact as any).documentIssueDate).toLocaleDateString('el-GR') : '-'}</p>
              </div>
              <div>
                <label className="text-sm font-medium">Î—Î¼ÎµÏÎ¿Î¼Î·Î½Î¯Î± Î›Î®Î¾Î·Ï‚</label>
                <p className="text-sm text-muted-foreground">{(contact as any).documentExpiryDate ? new Date((contact as any).documentExpiryDate).toLocaleDateString('el-GR') : '-'}</p>
              </div>
              <div>
                <label className="text-sm font-medium">Î‘Î¦Îœ</label>
                <p className="text-sm text-muted-foreground">{(contact as any)?.vatNumber || '-'}</p>
              </div>
              <div>
                <label className="text-sm font-medium">Î”ÎŸÎ¥</label>
                <p className="text-sm text-muted-foreground">{(contact as any).taxOffice || '-'}</p>
              </div>
            </div>
          </div>
        </div>
      )
    },
    {
      id: 'professional',
      label: 'Î•Ï€Î±Î³Î³ÎµÎ»Î¼Î±Ï„Î¹ÎºÎ¬ Î£Ï„Î¿Î¹Ï‡ÎµÎ¯Î±',
      icon: Briefcase,
      content: (
        <div className="p-4 border rounded-lg">
          <h4 className="font-semibold mb-4">ğŸ’¼ Î•Ï€Î±Î³Î³ÎµÎ»Î¼Î±Ï„Î¹ÎºÎ¬ Î£Ï„Î¿Î¹Ï‡ÎµÎ¯Î±</h4>
          <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <label className="text-sm font-medium">Î•Ï€Î¬Î³Î³ÎµÎ»Î¼Î±</label>
              <p className="text-sm text-muted-foreground">{(contact as any)?.profession || '-'}</p>
            </div>
            <div>
              <label className="text-sm font-medium">Î•Î¹Î´Î¹ÎºÏŒÏ„Î·Ï„Î±</label>
              <p className="text-sm text-muted-foreground">{(contact as any)?.specialty || '-'}</p>
            </div>
            <div>
              <label className="text-sm font-medium">Î•Ï€Î¹Ï‡ÎµÎ¯ÏÎ·ÏƒÎ·/Î•ÏÎ³Î¿Î´ÏŒÏ„Î·Ï‚</label>
              <p className="text-sm text-muted-foreground">{(contact as any)?.employer || '-'}</p>
            </div>
            <div>
              <label className="text-sm font-medium">Î˜Î­ÏƒÎ·/Î¡ÏŒÎ»Î¿Ï‚</label>
              <p className="text-sm text-muted-foreground">{(contact as any)?.position || '-'}</p>
            </div>
          </div>
        </div>
      )
    },
    {
      id: 'contact',
      label: 'Î•Ï€Î¹ÎºÎ¿Î¹Î½Ï‰Î½Î¯Î±',
      icon: Phone,
      content: (
        <div className="p-4 border rounded-lg">
          <h4 className="font-semibold mb-4">ğŸ“ Î£Ï„Î¿Î¹Ï‡ÎµÎ¯Î± Î•Ï€Î¹ÎºÎ¿Î¹Î½Ï‰Î½Î¯Î±Ï‚</h4>
          <div className="space-y-4">
            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <label className="text-sm font-medium">Email</label>
                <p className="text-sm text-muted-foreground">{(contact as any).email || contact.emails?.[0]?.email || '-'}</p>
              </div>
              <div>
                <label className="text-sm font-medium">Î¤Î·Î»Î­Ï†Ï‰Î½Î¿</label>
                <p className="text-sm text-muted-foreground">{(contact as any).phone || contact.phones?.[0]?.number || '-'}</p>
              </div>
            </div>
          </div>
        </div>
      )
    },
    {
      id: 'notes',
      label: 'Î£Î·Î¼ÎµÎ¹ÏÏƒÎµÎ¹Ï‚',
      icon: StickyNote,
      content: (
        <div className="p-4 border rounded-lg">
          <h4 className="font-semibold mb-4">ğŸ“ Î£Î·Î¼ÎµÎ¹ÏÏƒÎµÎ¹Ï‚</h4>
          <div className="space-y-4">
            <div>
              <label className="text-sm font-medium">Î•Î»ÎµÏÎ¸ÎµÏÎµÏ‚ Î£Î·Î¼ÎµÎ¹ÏÏƒÎµÎ¹Ï‚</label>
              <p className="text-sm text-muted-foreground whitespace-pre-wrap">{contact.notes || '-'}</p>
            </div>
            <div>
              <label className="text-sm font-medium">Î•Ï„Î¹ÎºÎ­Ï„ÎµÏ‚</label>
              {contact.tags?.length ? (
                <div className="flex flex-wrap gap-1 mt-1">
                  {contact.tags.map((tag, index) => (
                    <span key={index} className="px-2 py-1 bg-secondary text-secondary-foreground rounded-md text-xs">
                      {tag}
                    </span>
                  ))}
                </div>
              ) : (
                <p className="text-sm text-muted-foreground">Î”ÎµÎ½ Ï…Ï€Î¬ÏÏ‡Î¿Ï…Î½ ÎµÏ„Î¹ÎºÎ­Ï„ÎµÏ‚</p>
              )}
            </div>
            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <label className="text-sm font-medium">ÎšÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·</label>
                <p className="text-sm text-muted-foreground">
                  {contact.status === 'active' ? 'ğŸŸ¢ Î•Î½ÎµÏÎ³Î®' :
                   contact.status === 'inactive' ? 'ğŸŸ¡ Î‘Î½ÎµÎ½ÎµÏÎ³Î®' :
                   contact.status === 'archived' ? 'ğŸ”´ Î‘ÏÏ‡ÎµÎ¹Î¿Î¸ÎµÏ„Î·Î¼Î­Î½Î·' : contact.status}
                </p>
              </div>
              <div>
                <label className="text-sm font-medium">Î‘Î³Î±Ï€Î·Î¼Î­Î½Î·</label>
                <p className="text-sm text-muted-foreground">{contact.isFavorite ? 'â­ ÎÎ±Î¹' : 'ÎŒÏ‡Î¹'}</p>
              </div>
            </div>
          </div>
        </div>
      )
    }
  ];

  return (
    <>
      <div className="flex-1 flex flex-col bg-card border rounded-lg min-w-0 shadow-sm">
        <ContactDetailsHeader contact={contact} onEditContact={onEditContact} onDeleteContact={onDeleteContact} />
        <ScrollArea className="flex-1">
          <div className="p-4">
            <TabsOnlyTriggers
              tabs={tabs}
              defaultTab={tabs[0]?.id || "info"}
              theme="warning"
            >
              {tabs.map((tab) => (
                <TabsContent key={tab.id} value={tab.id} className="mt-4">
                  {tab.content}
                </TabsContent>
              ))}
            </TabsOnlyTriggers>
          </div>
        </ScrollArea>
      </div>

      {contact.id && (
        <AddUnitToContactDialog
            open={isAddUnitDialogOpen}
            onOpenChange={setIsAddUnitDialogOpen}
            contactId={contact.id}
            onUnitAdded={handleUnitAdded}
        />
      )}

      {/* Photo View Modal */}
      <Dialog open={isPhotoModalOpen} onOpenChange={setIsPhotoModalOpen}>
        <DialogContent className="max-w-4xl max-h-[90vh] p-0">
          <div className="relative">
            <button
              onClick={() => setIsPhotoModalOpen(false)}
              className="absolute top-4 right-4 z-10 bg-black/50 hover:bg-black/70 text-white rounded-full p-2 transition-colors"
            >
              <X className="w-5 h-5" />
            </button>
            <div className="flex items-center justify-center bg-black/5 min-h-[400px]">
              <img
                src={(contact as any).photoURL}
                alt={`Î¦Ï‰Ï„Î¿Î³ÏÎ±Ï†Î¯Î± ${contact.firstName} ${contact.lastName}`}
                className="max-w-full max-h-[80vh] object-contain rounded-lg"
              />
            </div>
            <div className="p-4 bg-white border-t">
              <h3 className="font-semibold text-lg text-gray-900">{contact.firstName} {contact.lastName}</h3>
              <p className="text-sm text-gray-600">Î¦Ï‰Ï„Î¿Î³ÏÎ±Ï†Î¯Î± ÎµÏ€Î±Ï†Î®Ï‚</p>
            </div>
          </div>
        </DialogContent>
      </Dialog>
    </>
  );
}
