# ADR-ACC-009: Tax Engine â€” ÎœÎ·Ï‡Î±Î½Î® Î¦Î¿ÏÎ¿Î»Î¿Î³Î¯Î±Ï‚ Î•Î¹ÏƒÎ¿Î´Î®Î¼Î±Ï„Î¿Ï‚

| Metadata | Value |
|----------|-------|
| **Status** | DRAFT |
| **Date** | 2026-02-09 |
| **Category** | Accounting / Income Tax |
| **Author** | Î“Î¹ÏÏÎ³Î¿Ï‚ Î Î±Î³ÏÎ½Î·Ï‚ + Claude Code (Anthropic AI) |
| **Parent** | [ADR-ACC-000](./ADR-ACC-000-founding-decision.md) |
| **Module** | M-010: Reports (Tax Reports) |

---

## 1. Context

ÎŸ Î“Î¹ÏÏÎ³Î¿Ï‚ Ï‰Ï‚ **ÎµÎ»ÎµÏÎ¸ÎµÏÎ¿Ï‚ ÎµÏ€Î±Î³Î³ÎµÎ»Î¼Î±Ï„Î¯Î±Ï‚** (Î±Ï„Î¿Î¼Î¹ÎºÎ® ÎµÏ€Î¹Ï‡ÎµÎ¯ÏÎ·ÏƒÎ·) Ï†Î¿ÏÎ¿Î»Î¿Î³ÎµÎ¯Ï„Î±Î¹ Î¼Îµ Ï„Î·Î½ ÎºÎ»Î¯Î¼Î±ÎºÎ± Ï†Ï…ÏƒÎ¹ÎºÏÎ½ Ï€ÏÎ¿ÏƒÏÏ€Ï‰Î½ Î³Î¹Î± ÎµÎ¹ÏƒÏŒÎ´Î·Î¼Î± Î±Ï€ÏŒ ÎµÏ€Î¹Ï‡ÎµÎ¹ÏÎ·Î¼Î±Ï„Î¹ÎºÎ® Î´ÏÎ±ÏƒÏ„Î·ÏÎ¹ÏŒÏ„Î·Ï„Î± (Î¬ÏÎ¸ÏÎ¿ 29 Î.4172/2013).

### Î¦Î¿ÏÎ¿Î»Î¿Î³Î¹ÎºÏŒ Î ÏÎ¿Ï†Î¯Î»

| Î Î±ÏÎ¬Î¼ÎµÏ„ÏÎ¿Ï‚ | Î¤Î¹Î¼Î® |
|-----------|-------|
| Î¤ÏÏ€Î¿Ï‚ Ï†Î¿ÏÎ¿Î»Î¿Î³Î¿ÏÎ¼ÎµÎ½Î¿Ï… | Î•Î»ÎµÏÎ¸ÎµÏÎ¿Ï‚ ÎµÏ€Î±Î³Î³ÎµÎ»Î¼Î±Ï„Î¯Î±Ï‚ |
| ÎšÎ»Î¯Î¼Î±ÎºÎ± Ï†ÏŒÏÎ¿Ï… | Î¦Ï…ÏƒÎ¹ÎºÏÎ½ Ï€ÏÎ¿ÏƒÏÏ€Ï‰Î½ (9%-44%) |
| Î ÏÎ¿ÎºÎ±Ï„Î±Î²Î¿Î»Î® Ï†ÏŒÏÎ¿Ï… | 55% (1-3 Ï‡ÏÏŒÎ½Î¹Î±) â†’ 100% (>3 Ï‡ÏÏŒÎ½Î¹Î±) |
| Î¤Î­Î»Î¿Ï‚ ÎµÏ€Î¹Ï„Î·Î´ÎµÏÎ¼Î±Ï„Î¿Ï‚ | 650â‚¬/Î­Ï„Î¿Ï‚ |
| Î•Î¹ÏƒÏ†Î¿ÏÎ¬ Î±Î»Î»Î·Î»ÎµÎ³Î³ÏÎ·Ï‚ | Î‘Î½Î±ÏƒÏ„Î­Î»Î»ÎµÏ„Î±Î¹ (2021-2025), ÎµÎ»Î­Î³Ï‡ÎµÏ„Î±Î¹ ÎµÏ„Î®ÏƒÎ¹Î± |
| Î¦Î¿ÏÎ¿Î»Î¿Î³Î¹ÎºÏŒ Î­Ï„Î¿Ï‚ | 1/1 â€” 31/12 |
| Î¥Ï€Î¿Î²Î¿Î»Î® Î•1/Î•3 | Î™Î¿ÏÎ½Î¹Î¿Ï‚ (ÎºÎ¬Î¸Îµ Ï‡ÏÏŒÎ½Î¿) |

---

## 2. Income Tax Scale (ÎšÎ»Î¯Î¼Î±ÎºÎ± Î¦ÏŒÏÎ¿Ï… 2026)

### 2.1 ÎšÎ»Î¹Î¼Î¬ÎºÎ¹Î±

| ÎšÎ»Î¹Î¼Î¬ÎºÎ¹Î¿ | Î•Î¹ÏƒÏŒÎ´Î·Î¼Î± | Î£Ï…Î½Ï„ÎµÎ»ÎµÏƒÏ„Î®Ï‚ | Î¦ÏŒÏÎ¿Ï‚ ÎšÎ»Î¹Î¼Î±ÎºÎ¯Î¿Ï… | Î£Ï‰ÏÎµÏ…Ï„Î¹ÎºÏŒÏ‚ Î¦ÏŒÏÎ¿Ï‚ |
|----------|----------|-------------|-----------------|------------------|
| 1Î¿ | 0 â€” 10.000â‚¬ | 9% | 900â‚¬ | 900â‚¬ |
| 2Î¿ | 10.001 â€” 20.000â‚¬ | 22% | 2.200â‚¬ | 3.100â‚¬ |
| 3Î¿ | 20.001 â€” 30.000â‚¬ | 28% | 2.800â‚¬ | 5.900â‚¬ |
| 4Î¿ | 30.001 â€” 40.000â‚¬ | 36% | 3.600â‚¬ | 9.500â‚¬ |
| 5Î¿ | 40.001+ | 44% | â€” | â€” |

### 2.2 Config (date-aware)

```typescript
interface TaxBracket {
  from: number;           // Î‘Ï€ÏŒ Ï€Î¿ÏƒÏŒ
  to: number | null;      // ÎœÎ­Ï‡ÏÎ¹ Ï€Î¿ÏƒÏŒ (null = Î±Ï€ÎµÏÎ¹ÏŒÏÎ¹ÏƒÏ„Î¿)
  rate: number;           // Î£Ï…Î½Ï„ÎµÎ»ÎµÏƒÏ„Î®Ï‚ (0.09, 0.22, 0.28, 0.36, 0.44)
}

interface TaxScaleConfig {
  year: number;
  validFrom: string;
  brackets: TaxBracket[];
  prepaymentRate: number;       // 0.55 Î® 1.00
  professionalTax: number;      // 650 Î® 325
  solidarityTaxEnabled: boolean;
}

const TAX_SCALE_2026: TaxScaleConfig = {
  year: 2026,
  validFrom: '2026-01-01',
  brackets: [
    { from: 0,     to: 10000, rate: 0.09 },
    { from: 10001, to: 20000, rate: 0.22 },
    { from: 20001, to: 30000, rate: 0.28 },
    { from: 30001, to: 40000, rate: 0.36 },
    { from: 40001, to: null,  rate: 0.44 },
  ],
  prepaymentRate: 1.00,           // >3 Ï‡ÏÏŒÎ½Î¹Î± â†’ 100%
  professionalTax: 650,           // Î˜ÎµÏƒÏƒÎ±Î»Î¿Î½Î¯ÎºÎ· (>200.000 ÎºÎ¬Ï„Î¿Î¹ÎºÎ¿Î¹)
  solidarityTaxEnabled: false,    // Î‘Î½Î±ÏƒÏ„Î¿Î»Î®
};
```

---

## 3. Tax Calculation Engine

### 3.1 Core Interface

```typescript
interface ITaxEngine {
  /** Î¥Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼ÏŒÏ‚ ÎµÏ„Î®ÏƒÎ¹Î¿Ï… Ï†ÏŒÏÎ¿Ï… ÎµÎ¹ÏƒÎ¿Î´Î®Î¼Î±Ï„Î¿Ï‚ */
  calculateAnnualTax(params: TaxCalculationParams): TaxResult;

  /** Î•ÎºÏ„Î¯Î¼Î·ÏƒÎ· Ï†ÏŒÏÎ¿Ï… (real-time, ÎºÎ±Ï„Î¬ Ï„Î· Î´Î¹Î¬ÏÎºÎµÎ¹Î± Ï„Î¿Ï… Î­Ï„Î¿Ï…Ï‚) */
  estimateTax(
    companyId: string,
    year: number,
    asOfDate: string
  ): Promise<TaxEstimate>;

  /** ÎšÎ»Î¯Î¼Î±ÎºÎ± Ï†ÏŒÏÎ¿Ï… (date-aware) */
  getTaxScale(year: number): TaxScaleConfig;
}

interface TaxCalculationParams {
  year: number;
  grossIncome: number;            // Î‘ÎºÎ±Î¸Î¬ÏÎ¹ÏƒÏ„Î± Î­ÏƒÎ¿Î´Î±
  deductibleExpenses: number;     // Î•ÎºÏ€Î¹Ï€Ï„ÏŒÎ¼ÎµÎ½ÎµÏ‚ Î´Î±Ï€Î¬Î½ÎµÏ‚
  efkaContributions: number;      // Î•Î¹ÏƒÏ†Î¿ÏÎ­Ï‚ Î•Î¦ÎšÎ‘ (ÎµÎºÏ€Î¯Ï€Ï„Î¿Ï…Î½)
  withheldTax: number;            // Î Î±ÏÎ±ÎºÏÎ±Ï„Î·Î¸Î­Î½Ï„ÎµÏ‚ Ï†ÏŒÏÎ¿Î¹ (20%, 3%)
  previousYearPrepayment: number; // Î ÏÎ¿ÎºÎ±Ï„Î±Î²Î¿Î»Î® Ï€ÏÎ¿Î·Î³. Î­Ï„Î¿Ï…Ï‚
  yearsInBusiness: number;        // Î§ÏÏŒÎ½Î¹Î± Î´ÏÎ±ÏƒÏ„Î·ÏÎ¹ÏŒÏ„Î·Ï„Î±Ï‚
}
```

### 3.2 Tax Result

```typescript
interface TaxResult {
  year: number;

  // === Î•Î¹ÏƒÏŒÎ´Î·Î¼Î± ===
  grossIncome: number;              // Î‘ÎºÎ±Î¸Î¬ÏÎ¹ÏƒÏ„Î± Î­ÏƒÎ¿Î´Î±
  deductibleExpenses: number;       // Î•ÎºÏ€Î¹Ï€Ï„ÏŒÎ¼ÎµÎ½ÎµÏ‚ Î´Î±Ï€Î¬Î½ÎµÏ‚
  efkaContributions: number;        // Î•Î¦ÎšÎ‘ (ÎµÎºÏ€Î¯Ï€Ï„Î¿Ï…Î½)
  taxableIncome: number;            // Î¦Î¿ÏÎ¿Î»Î¿Î³Î·Ï„Î­Î¿ = gross - expenses - efka

  // === Î¦ÏŒÏÎ¿Ï‚ Î•Î¹ÏƒÎ¿Î´Î®Î¼Î±Ï„Î¿Ï‚ ===
  incomeTax: number;                // Î‘Ï€ÏŒ ÎºÎ»Î¯Î¼Î±ÎºÎ±
  taxBreakdown: TaxBracketResult[]; // Î‘Î½Î¬Î»Ï…ÏƒÎ· Î±Î½Î¬ ÎºÎ»Î¹Î¼Î¬ÎºÎ¹Î¿

  // === Î¤Î­Î»Î¿Ï‚ Î•Ï€Î¹Ï„Î·Î´ÎµÏÎ¼Î±Ï„Î¿Ï‚ ===
  professionalTax: number;          // 650â‚¬

  // === Î•Î¹ÏƒÏ†Î¿ÏÎ¬ Î‘Î»Î»Î·Î»ÎµÎ³Î³ÏÎ·Ï‚ ===
  solidarityTax: number;            // 0 (Î±Î½ Î±Î½Î±ÏƒÏ„Î­Î»Î»ÎµÏ„Î±Î¹)

  // === Î ÏÎ¿ÎºÎ±Ï„Î±Î²Î¿Î»Î® Î¦ÏŒÏÎ¿Ï… ===
  prepaymentRate: number;           // 55% Î® 100%
  prepaymentAmount: number;         // incomeTax Ã— rate

  // === Î£ÏÎ½Î¿Î»Î± ===
  totalTax: number;                 // incomeTax + professionalTax + solidarity
  totalWithPrepayment: number;      // totalTax + prepayment

  // === ÎœÎµÎ¹ÏÏƒÎµÎ¹Ï‚ ===
  withheldTax: number;              // Î Î±ÏÎ±ÎºÏÎ±Ï„Î·Î¸Î­Î½Ï„ÎµÏ‚ (20%, 3%)
  previousPrepayment: number;       // Î ÏÎ¿ÎºÎ±Ï„Î±Î²Î¿Î»Î® Ï€ÏÎ¿Î·Î³. Î­Ï„Î¿Ï…Ï‚
  totalCredits: number;             // withheld + previousPrepayment

  // === Î¤Î•Î›Î™ÎšÎŸ Î Î›Î—Î¡Î©Î¤Î•ÎŸ ===
  finalPayable: number;             // totalWithPrepayment - totalCredits
  // Î‘Î½ < 0 â†’ ÎµÏ€Î¹ÏƒÏ„ÏÎ¿Ï†Î® Ï†ÏŒÏÎ¿Ï…
}

interface TaxBracketResult {
  bracket: TaxBracket;
  taxableAmount: number;            // Î Î¿ÏƒÏŒ ÏƒÏ„Î¿ ÎºÎ»Î¹Î¼Î¬ÎºÎ¹Î¿
  taxAmount: number;                // Î¦ÏŒÏÎ¿Ï‚ ÎºÎ»Î¹Î¼Î±ÎºÎ¯Î¿Ï…
}
```

### 3.3 Calculation Logic

```typescript
function calculateIncomeTax(
  taxableIncome: number,
  brackets: TaxBracket[]
): { total: number; breakdown: TaxBracketResult[] } {
  let remainingIncome = taxableIncome;
  let totalTax = 0;
  const breakdown: TaxBracketResult[] = [];

  for (const bracket of brackets) {
    if (remainingIncome <= 0) break;

    const bracketSize = bracket.to
      ? bracket.to - bracket.from + 1
      : remainingIncome;

    const taxableInBracket = Math.min(remainingIncome, bracketSize);
    const taxForBracket = taxableInBracket * bracket.rate;

    breakdown.push({
      bracket,
      taxableAmount: taxableInBracket,
      taxAmount: Math.round(taxForBracket * 100) / 100,
    });

    totalTax += taxForBracket;
    remainingIncome -= taxableInBracket;
  }

  return {
    total: Math.round(totalTax * 100) / 100,
    breakdown,
  };
}
```

---

## 4. Practical Examples

### 4.1 Î Î±ÏÎ¬Î´ÎµÎ¹Î³Î¼Î±: Î“Î¹ÏÏÎ³Î¿Ï‚ 2026

```
Î•Î£ÎŸÎ”Î‘:
  Î‘ÏÏ‡Î¹Ï„ÎµÎºÏ„Î¿Î½Î¹ÎºÎ­Ï‚ Ï…Ï€Î·ÏÎµÏƒÎ¯ÎµÏ‚:     45.000â‚¬
  ÎšÎ±Ï„Î±ÏƒÎºÎµÏ…Î±ÏƒÏ„Î¹ÎºÎ¬:                15.000â‚¬
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  Î‘ÎºÎ±Î¸Î¬ÏÎ¹ÏƒÏ„Î± ÎˆÏƒÎ¿Î´Î±:             60.000â‚¬

Î•ÎÎŸÎ”Î‘:
  Î‘Î¼Î¿Î¹Î²Î­Ï‚ Ï„ÏÎ¯Ï„Ï‰Î½ (Î»Î¿Î³Î¹ÏƒÏ„Î®Ï‚):     3.000â‚¬
  Î•Î½Î¿Î¯ÎºÎ¹Î¿ Î³ÏÎ±Ï†ÎµÎ¯Î¿Ï…:              4.800â‚¬ (400Ã—12)
  Î”Î•ÎšÎŸ + Î¤Î·Î»Î­Ï†Ï‰Î½Î¿:               2.400â‚¬
  ÎšÎ±ÏÏƒÎ¹Î¼Î±:                       3.600â‚¬
  Î‘Î½Î±Î»ÏÏƒÎ¹Î¼Î± + Software:          2.000â‚¬
  Î‘Ï€Î¿ÏƒÎ²Î­ÏƒÎµÎ¹Ï‚:                    2.930â‚¬
  Î›Î¿Î¹Ï€Î¬:                         1.270â‚¬
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  Î£ÏÎ½Î¿Î»Î¿ Î•Î¾ÏŒÎ´Ï‰Î½:                20.000â‚¬

  Î•Î¦ÎšÎ‘:                          3.964â‚¬ (330,37 Ã— 12)

Î¦ÎŸÎ¡ÎŸÎ›ÎŸÎ“Î—Î¤Î•ÎŸ Î•Î™Î£ÎŸÎ”Î—ÎœÎ‘:
  60.000 - 20.000 - 3.964 = 36.036â‚¬

Î¦ÎŸÎ¡ÎŸÎ£ Î•Î™Î£ÎŸÎ”Î—ÎœÎ‘Î¤ÎŸÎ£ (ÎºÎ»Î¯Î¼Î±ÎºÎ±):
  0-10.000:     10.000 Ã— 9%  =    900â‚¬
  10.001-20.000: 10.000 Ã— 22% =  2.200â‚¬
  20.001-30.000: 10.000 Ã— 28% =  2.800â‚¬
  30.001-36.036:  6.036 Ã— 36% =  2.173â‚¬
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  Î¦ÏŒÏÎ¿Ï‚ ÎµÎ¹ÏƒÎ¿Î´Î®Î¼Î±Ï„Î¿Ï‚:             8.073â‚¬

Î¤Î•Î›ÎŸÎ£ Î•Î Î™Î¤Î—Î”Î•Î¥ÎœÎ‘Î¤ÎŸÎ£:              650â‚¬

Î Î¡ÎŸÎšÎ‘Î¤Î‘Î’ÎŸÎ›Î— (100%):              8.073â‚¬

Î£Î¥ÎÎŸÎ›ÎŸ Î¦ÎŸÎ¡ÎŸÎ¥:
  8.073 + 650 + 8.073 =        16.796â‚¬

ÎœÎ•Î™Î©Î£Î•Î™Î£:
  Î Î±ÏÎ±ÎºÏÎ±Ï„Î·Î¸Î­Î½Ï„ÎµÏ‚ 20%:           7.200â‚¬ (45.000 Ã— 0.80 Ã— 0.20... approx)
  Î ÏÎ¿ÎºÎ±Ï„Î±Î²Î¿Î»Î® 2025:              6.500â‚¬ (ÎµÎºÏ„Î¯Î¼Î·ÏƒÎ·)
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  Î£ÏÎ½Î¿Î»Î¿ Î¼ÎµÎ¹ÏÏƒÎµÏ‰Î½:              13.700â‚¬

Î Î›Î—Î¡Î©Î¤Î•ÎŸ:
  16.796 - 13.700 =             3.096â‚¬
```

### 4.2 Î”ÏŒÏƒÎµÎ¹Ï‚ Î Î»Î·ÏÏ‰Î¼Î®Ï‚

ÎŸ Ï†ÏŒÏÎ¿Ï‚ ÎµÎ¹ÏƒÎ¿Î´Î®Î¼Î±Ï„Î¿Ï‚ Ï€Î»Î·ÏÏÎ½ÎµÏ„Î±Î¹ ÏƒÎµ **3 Î´ÏŒÏƒÎµÎ¹Ï‚**:

| Î”ÏŒÏƒÎ· | Î Î¿ÏƒÎ¿ÏƒÏ„ÏŒ | Î—Î¼/Î½Î¯Î± | Î Î¿ÏƒÏŒ (Ï€Î±ÏÎ¬Î´ÎµÎ¹Î³Î¼Î±) |
|------|---------|--------|-------------------|
| 1Î· | 33,33% | Î™Î¿ÏÎ»Î¹Î¿Ï‚ | 1.032â‚¬ |
| 2Î· | 33,33% | Î£ÎµÏ€Ï„Î­Î¼Î²ÏÎ¹Î¿Ï‚ | 1.032â‚¬ |
| 3Î· | 33,34% | ÎÎ¿Î­Î¼Î²ÏÎ¹Î¿Ï‚ | 1.032â‚¬ |

---

## 5. Real-time Tax Estimator

### 5.1 Estimate Interface

```typescript
interface TaxEstimate {
  asOfDate: string;
  year: number;

  // === ÎœÎ­Ï‡ÏÎ¹ Î£Ï„Î¹Î³Î¼Î®Ï‚ ===
  currentIncome: number;          // Î¤ÏÎ­Ï‡Î¿Î½Ï„Î± Î­ÏƒÎ¿Î´Î±
  currentExpenses: number;        // Î¤ÏÎ­Ï‡Î¿Î½Ï„Î± Î­Î¾Î¿Î´Î±
  currentEfka: number;            // Î•Î¦ÎšÎ‘ Ï€Î»Î·ÏÏ‰Î¼Î­Î½Î±
  currentTaxableIncome: number;

  // === Î•ÎºÏ„Î¯Î¼Î·ÏƒÎ· Î¤Î­Î»Î¿Ï…Ï‚ ÎˆÏ„Î¿Ï…Ï‚ ===
  projectedIncome: number;        // Î ÏÎ¿Î²Î¿Î»Î® (annualized)
  projectedExpenses: number;
  projectedTaxableIncome: number;

  // === Î•ÎºÏ„Î¹Î¼ÏÎ¼ÎµÎ½Î¿Ï‚ Î¦ÏŒÏÎ¿Ï‚ ===
  estimatedTax: TaxResult;

  // === Î§ÏÎ®ÏƒÎ¹Î¼Î± ===
  effectiveTaxRate: number;       // Î ÏÎ±Î³Î¼Î±Ï„Î¹ÎºÏŒÏ‚ ÏƒÏ…Î½Ï„ÎµÎ»ÎµÏƒÏ„Î®Ï‚
  monthlyTaxReserve: number;      // Î ÏŒÏƒÎ± Î½Î± Î²Î¬Î¶ÎµÎ¹ ÏƒÏ„Î·Î½ Î¬ÎºÏÎ·/Î¼Î®Î½Î±
  withheldSoFar: number;          // Î‰Î´Î· Ï€Î±ÏÎ±ÎºÏÎ±Ï„Î·Î¸Î­Î½Ï„ÎµÏ‚
}
```

### 5.2 Projection Method

```
projectedIncome = currentIncome Ã— (12 / currentMonth)
projectedExpenses = currentExpenses Ã— (12 / currentMonth)

Î‰:
projectedIncome = currentIncome + (avgMonthlyIncome Ã— remainingMonths)
```

### 5.3 Dashboard Card

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“Š Î•ÎºÏ„Î¯Î¼Î·ÏƒÎ· Î¦ÏŒÏÎ¿Ï… 2026            â”‚
â”‚  (Î¼Î­Ï‡ÏÎ¹ Î¦ÎµÎ²ÏÎ¿Ï…Î¬ÏÎ¹Î¿)                â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚  Î¤ÏÎ­Ï‡Î¿Î½ ÎµÎ¹ÏƒÏŒÎ´Î·Î¼Î±:     12.500â‚¬      â”‚
â”‚  Î•ÎºÏ„Î¯Î¼Î·ÏƒÎ· Ï„Î­Î»Î¿Ï‚:      ~60.000â‚¬     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€              â”‚
â”‚  Î•ÎºÏ„Î¹Î¼ÏÎ¼ÎµÎ½Î¿Ï‚ Ï†ÏŒÏÎ¿Ï‚:   ~8.073â‚¬      â”‚
â”‚  + Î¤Î­Î»Î¿Ï‚ ÎµÏ€Î¹Ï„Î·Î´.:        650â‚¬      â”‚
â”‚  + Î ÏÎ¿ÎºÎ±Ï„Î±Î²Î¿Î»Î®:        ~8.073â‚¬     â”‚
â”‚  - Î Î±ÏÎ±ÎºÏÎ±Ï„Î®ÏƒÎµÎ¹Ï‚:      ~7.200â‚¬     â”‚
â”‚  - Î ÏÎ¿ÎºÎ±Ï„Î±Î²Î¿Î»Î® 2025:   ~6.500â‚¬     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€              â”‚
â”‚  Î•ÎºÏ„. Ï€Î»Î·ÏÏ‰Ï„Î­Î¿:       ~3.096â‚¬      â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€              â”‚
â”‚  ÎœÎ·Î½Î¹Î±Î¯Î¿ reserve:        ~258â‚¬     â”‚
â”‚  Effective rate:          13,5%     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. E1/E3 Form Auto-fill

### 6.1 ÎšÏ‰Î´Î¹ÎºÎ¿Î¯ Î•3 (ÎšÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ· ÎŸÎ¹ÎºÎ¿Î½Î¿Î¼Î¹ÎºÏÎ½ Î£Ï„Î¿Î¹Ï‡ÎµÎ¯Ï‰Î½)

| ÎšÏ‰Î´Î¹ÎºÏŒÏ‚ | Î ÎµÎ´Î¯Î¿ | Î Î·Î³Î® |
|---------|-------|------|
| **047** | Î Ï‰Î»Î®ÏƒÎµÎ¹Ï‚ Î±Î³Î±Î¸ÏÎ½ & Ï…Ï€Î·ÏÎµÏƒÎ¹ÏÎ½ | journal_entries (type=income) |
| **048** | Î›Î¿Î¹Ï€Î¬ ÏƒÏ…Î½Î®Î¸Î· Î­ÏƒÎ¿Î´Î± | other_income |
| **049** | Î‘ÏƒÏ…Î½Î®Î¸Î· Î­ÏƒÎ¿Î´Î± (Ï€ÏÎ»Î·ÏƒÎ· Ï€Î±Î³Î¯Ï‰Î½) | asset_sale_income |
| **102** | Î Î±ÏÎ¿Ï‡Î­Ï‚ ÏƒÎµ ÎµÏÎ³Î±Î¶Î¿Î¼Î­Î½Î¿Ï…Ï‚ | â€” (Î´ÎµÎ½ Î­Ï‡ÎµÎ¹ Ï…Ï€Î±Î»Î»Î®Î»Î¿Ï…Ï‚) |
| **181** | Î‘Î³Î¿ÏÎ­Ï‚ Î±Î³Î±Î¸ÏÎ½ & Ï…Ï€Î·ÏÎµÏƒÎ¹ÏÎ½ | category2_1..2_5 expenses |
| **202** | Î›Î¿Î¹Ï€Î¬ Î»ÎµÎ¹Ï„Î¿Ï…ÏÎ³Î¹ÎºÎ¬ Î­Î¾Î¿Î´Î± | 585_xxx expenses |
| **302** | Î‘Ï€Î¿ÏƒÎ²Î­ÏƒÎµÎ¹Ï‚ | depreciation entries |

### 6.2 ÎšÏ‰Î´Î¹ÎºÎ¿Î¯ Î•1 (Î”Î®Î»Ï‰ÏƒÎ· Î¦Î¿ÏÎ¿Î»Î¿Î³Î¯Î±Ï‚ Î•Î¹ÏƒÎ¿Î´Î®Î¼Î±Ï„Î¿Ï‚)

| ÎšÏ‰Î´Î¹ÎºÏŒÏ‚ | Î ÎµÎ´Î¯Î¿ | Î Î·Î³Î® |
|---------|-------|------|
| **401-402** | Î‘ÎºÎ±Î¸Î¬ÏÎ¹ÏƒÏ„Î± Î­ÏƒÎ¿Î´Î± | Î£ÏÎ½Î¿Î»Î¿ ÎµÏƒÏŒÎ´Ï‰Î½ Î•3 |
| **403-404** | ÎšÎ±Î¸Î±ÏÎ¬ ÎºÎ­ÏÎ´Î· | taxableIncome |
| **601-602** | Î Î±ÏÎ±ÎºÏÎ±Ï„Î·Î¸Î­Î½Ï„ÎµÏ‚ Ï†ÏŒÏÎ¿Î¹ | Î£ÏÎ½Î¿Î»Î¿ withheld |
| **605-606** | Î ÏÎ¿ÎºÎ±Ï„Î±Î²Î¿Î»Î® Ï€ÏÎ¿Î·Î³. | previousPrepayment |

### 6.3 Export

```typescript
interface TaxFormExport {
  type: 'E1' | 'E3';
  year: number;
  fields: Record<string, number>;

  /** Export formats */
  exportToCsv(): string;         // Î“Î¹Î± manual upload TAXISnet
  exportToJson(): object;        // Î“Î¹Î± API (Î¼ÎµÎ»Î»Î¿Î½Ï„Î¹ÎºÏŒ)
  generatePdf(): Promise<Blob>;  // Î•ÎºÏ„ÏÏ€Ï‰ÏƒÎ·
}
```

---

## 7. Withholding Tax Reconciliation

### 7.1 Î’ÎµÎ²Î±Î¹ÏÏƒÎµÎ¹Ï‚ Î‘Ï€Î¿Î´Î¿Ï‡ÏÎ½

ÎšÎ¬Î¸Îµ Ï€ÎµÎ»Î¬Ï„Î·Ï‚ Ï€Î¿Ï… Ï€Î±ÏÎ±ÎºÏÎ±Ï„ÎµÎ¯ Ï†ÏŒÏÎ¿ ÎµÎºÎ´Î¯Î´ÎµÎ¹ **Î²ÎµÎ²Î±Î¯Ï‰ÏƒÎ· Î±Ï€Î¿Î´Î¿Ï‡ÏÎ½** (ÎµÏ„Î®ÏƒÎ¹Î±). Î— ÎµÏ†Î±ÏÎ¼Î¿Î³Î®:

```typescript
interface WithholdingReconciliation {
  year: number;

  /** Î‘Î½Î¬ Ï€ÎµÎ»Î¬Ï„Î· */
  byCustomer: Array<{
    contactId: string;
    contactName: string;
    contactVat: string;
    totalGross: number;           // Î‘ÎºÎ±Î¸Î¬ÏÎ¹ÏƒÏ„Î¿ Ï€Î¿ÏƒÏŒ
    totalWithheld: number;        // Î Î±ÏÎ±ÎºÏÎ±Ï„Î·Î¸Î­Î½
    withholdingRate: number;      // 20% Î® 3%
    invoiceCount: number;
    certificateReceived: boolean; // Î›Î¬Î²Î±Î¼Îµ Î²ÎµÎ²Î±Î¯Ï‰ÏƒÎ·;
  }>;

  /** Î£ÏÎ½Î¿Î»Î± */
  totalWithheld: number;          // Î£ÏÎ½Î¿Î»Î¿ Ï€Î±ÏÎ±ÎºÏÎ±Ï„Î·Î¸Î­Î½Ï„Ï‰Î½
  certificatesReceived: number;
  certificatesPending: number;
}
```

### 7.2 Workflow

```
[1] Î¤Î­Î»Î¿Ï‚ Î¦ÎµÎ²ÏÎ¿Ï…Î±ÏÎ¯Î¿Ï…: Reminder "Î–Î®Ï„Î± Î²ÎµÎ²Î±Î¹ÏÏƒÎµÎ¹Ï‚ Î±Ï€Î¿Î´Î¿Ï‡ÏÎ½ 2025"
    â†“
[2] Î•Ï†Î±ÏÎ¼Î¿Î³Î®: Î›Î¯ÏƒÏ„Î± Ï€ÎµÎ»Î±Ï„ÏÎ½ Î¼Îµ Ï€Î±ÏÎ±ÎºÏÎ±Ï„Î®ÏƒÎµÎ¹Ï‚
    â”œâ”€ Î Î‘Î Î‘Î”ÎŸÎ ÎŸÎ¥Î›ÎŸÎ£ Î‘Î•:  7.200â‚¬ Ï€Î±ÏÎ±ÎºÏÎ±Ï„Î·Î¸Î­Î½Ï„Î±  [â³ Pending]
    â”œâ”€ Î”Î—ÎœÎŸÎ£ Î˜Î•Î£/ÎÎ™ÎšÎ—Î£:  1.500â‚¬ Ï€Î±ÏÎ±ÎºÏÎ±Ï„Î·Î¸Î­Î½Ï„Î±  [âœ… Received]
    â”œâ”€ ÎÎ•Î£Î¤Î©Î¡ Î•Î Î•:          900â‚¬ Ï€Î±ÏÎ±ÎºÏÎ±Ï„Î·Î¸Î­Î½Ï„Î±  [â³ Pending]
    â†“
[3] Mark as received â†’ cross-check Ï€Î¿ÏƒÎ¬
    â†“
[4] Î‘Î½ discrepancy â†’ flag Î³Î¹Î± Ï„Î¿Î½ Î»Î¿Î³Î¹ÏƒÏ„Î®
```

---

## 8. Payment Installments

### 8.1 Î”ÏŒÏƒÎµÎ¹Ï‚ Î¦ÏŒÏÎ¿Ï…

```typescript
interface TaxInstallment {
  installmentNumber: 1 | 2 | 3;
  dueDate: string;                // Î¤Î­Î»Î¿Ï‚ Î™Î¿Ï…Î»Î¯Î¿Ï… / Î£ÎµÏ€Ï„. / ÎÎ¿ÎµÎ¼.
  amount: number;
  status: 'upcoming' | 'due' | 'paid' | 'overdue';
  paidDate: string | null;
  paidAmount: number | null;
  journalEntryId: string | null;  // â†’ journal_entries (Î±Î½ Ï€Î»Î·ÏÏ‰Î¸ÎµÎ¯)
}

function calculateInstallments(
  totalPayable: number,
  year: number
): TaxInstallment[] {
  const installment = Math.round(totalPayable / 3 * 100) / 100;
  const lastInstallment = totalPayable - (installment * 2);

  return [
    { installmentNumber: 1, dueDate: `${year}-07-31`,
      amount: installment, status: 'upcoming', /* ... */ },
    { installmentNumber: 2, dueDate: `${year}-09-30`,
      amount: installment, status: 'upcoming', /* ... */ },
    { installmentNumber: 3, dueDate: `${year}-11-30`,
      amount: lastInstallment, status: 'upcoming', /* ... */ },
  ];
}
```

### 8.2 Reminders

| Trigger | Î—Î¼Î­ÏÎµÏ‚ | ÎœÎ®Î½Ï…Î¼Î± |
|---------|--------|--------|
| Î”ÏŒÏƒÎ· Ï€Î»Î·ÏƒÎ¹Î¬Î¶ÎµÎ¹ | 15 Ï€ÏÎ¹Î½ | "Î”ÏŒÏƒÎ· Ï†ÏŒÏÎ¿Ï… [#]: [Ï€Î¿ÏƒÏŒ]â‚¬ Î¼Î­Ï‡ÏÎ¹ [date]" |
| Î”ÏŒÏƒÎ· due | 0 | "Î£Î®Î¼ÎµÏÎ± Î»Î®Î³ÎµÎ¹ Î· [#]Î· Î´ÏŒÏƒÎ· Ï†ÏŒÏÎ¿Ï…: [Ï€Î¿ÏƒÏŒ]â‚¬" |
| Î•ÎºÏ€ÏÏŒÎ¸ÎµÏƒÎ¼Î· | +3 | "âš ï¸ Î•ÎºÏ€ÏÏŒÎ¸ÎµÏƒÎ¼Î· Î´ÏŒÏƒÎ·! Î ÏÏŒÏƒÏ„Î¹Î¼Î¿ Î¾ÎµÎºÎ¹Î½Î¬" |
| Î•1/Î•3 Ï…Ï€Î¿Î²Î¿Î»Î® | 1 Î™Î¿Ï…Î½ | "Î¥Ï€Î¿Î²Î¿Î»Î® Ï†Î¿ÏÎ¿Î»Î¿Î³Î¹ÎºÎ®Ï‚ Î´Î®Î»Ï‰ÏƒÎ·Ï‚ Î¼Î­Ï‡ÏÎ¹ 30/6" |

---

## 9. UI Pages

| Route | Î£ÎµÎ»Î¯Î´Î± | Î›ÎµÎ¹Ï„Î¿Ï…ÏÎ³Î¯Î± |
|-------|--------|------------|
| `/accounting/reports/tax` | Tax Dashboard | Î•ÎºÏ„Î¯Î¼Î·ÏƒÎ· + Î¹ÏƒÏ„Î¿ÏÎ¹ÎºÏŒ |
| `/accounting/reports/tax/{year}` | Î•Ï„Î®ÏƒÎ¹Î± Î‘Î½Î¬Î»Ï…ÏƒÎ· | Î Î»Î®ÏÎ·Ï‚ Ï…Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼ÏŒÏ‚ |
| `/accounting/reports/tax/{year}/e3` | Î•3 Preview | Î‘Ï…Ï„ÏŒÎ¼Î±Ï„Î· Ï€ÏÎ¿ÏƒÏ…Î¼Ï€Î»Î®ÏÏ‰ÏƒÎ· |
| `/accounting/reports/tax/{year}/installments` | Î”ÏŒÏƒÎµÎ¹Ï‚ | Status Ï€Î»Î·ÏÏ‰Î¼ÏÎ½ |
| `/accounting/reports/tax/{year}/withholding` | Î Î±ÏÎ±ÎºÏÎ±Ï„Î®ÏƒÎµÎ¹Ï‚ | Î’ÎµÎ²Î±Î¹ÏÏƒÎµÎ¹Ï‚ + reconciliation |

### 9.1 Tax Dashboard

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“Š Î¦ÏŒÏÎ¿Ï‚ Î•Î¹ÏƒÎ¿Î´Î®Î¼Î±Ï„Î¿Ï‚ 2026                                  â”‚
â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ ğŸ’¼ Î•Î¹ÏƒÏŒÎ´Î·Î¼Î±  â”‚ â”‚ ğŸ“‰ Î¦ÏŒÏÎ¿Ï‚     â”‚ â”‚ ğŸ“Š Eff. Rate â”‚        â”‚
â”‚  â”‚  36.036â‚¬     â”‚ â”‚   8.073â‚¬    â”‚ â”‚    13,5%     â”‚        â”‚
â”‚  â”‚ (Ï†Î¿ÏÎ¿Î»Î¿Î³Î·Ï„Î­Î¿)â”‚ â”‚ (ÎºÎ»Î¯Î¼Î±ÎºÎ±)   â”‚ â”‚              â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                             â”‚
â”‚  Î‘ÎÎ‘Î›Î¥Î£Î— ÎšÎ›Î™ÎœÎ‘ÎšÎ™Î©Î                                         â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                          â”‚
â”‚  9%  â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â”‚ 10.000â‚¬ â†’    900â‚¬          â”‚
â”‚  22% â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â”‚ 10.000â‚¬ â†’  2.200â‚¬          â”‚
â”‚  28% â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â”‚ 10.000â‚¬ â†’  2.800â‚¬          â”‚
â”‚  36% â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ           â”‚  6.036â‚¬ â†’  2.173â‚¬          â”‚
â”‚  44% â”‚                        â”‚      0â‚¬ â†’      0â‚¬          â”‚
â”‚                                                             â”‚
â”‚  Î Î›Î—Î¡Î©Î¤Î•ÎŸ                                                   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                  â”‚
â”‚  Î¦ÏŒÏÎ¿Ï‚:               8.073â‚¬                                â”‚
â”‚  + Î¤Î­Î»Î¿Ï‚ ÎµÏ€Î¹Ï„Î·Î´.:       650â‚¬                                â”‚
â”‚  + Î ÏÎ¿ÎºÎ±Ï„Î±Î²Î¿Î»Î®:       8.073â‚¬                                â”‚
â”‚  - Î Î±ÏÎ±ÎºÏÎ±Ï„Î®ÏƒÎµÎ¹Ï‚:    -7.200â‚¬                                â”‚
â”‚  - Î ÏÎ¿Îº. 2025:       -6.500â‚¬                                â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                â”‚
â”‚  Î¤Î•Î›Î™ÎšÎŸ:              3.096â‚¬  (3 Î´ÏŒÏƒÎµÎ¹Ï‚ Ã— 1.032â‚¬)           â”‚
â”‚                                                             â”‚
â”‚  Î”ÎŸÎ£Î•Î™Î£                                                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€                                                     â”‚
â”‚  1Î· â”‚ 31/07/2026 â”‚ 1.032â‚¬ â”‚ â³ Upcoming                     â”‚
â”‚  2Î· â”‚ 30/09/2026 â”‚ 1.032â‚¬ â”‚ ğŸ“…                              â”‚
â”‚  3Î· â”‚ 30/11/2026 â”‚ 1.032â‚¬ â”‚ ğŸ“…                              â”‚
â”‚                                                             â”‚
â”‚  [ğŸ“„ Î•3 Preview]  [ğŸ“¤ Export]  [ğŸ’¡ Î¦Î¿ÏÎ¿ÏƒÏ‡ÎµÎ´Î¹Î±ÏƒÎ¼ÏŒÏ‚]          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 10. Tax Planning Insights

### 10.1 AI-Assisted Tips

```typescript
interface TaxPlanningInsight {
  type: 'expense_gap' | 'efka_upgrade' | 'prepayment_warning' | 'deadline';
  priority: 'high' | 'medium' | 'low';
  title: string;
  description: string;
  potentialSaving: number | null;
}
```

Î Î±ÏÎ±Î´ÎµÎ¯Î³Î¼Î±Ï„Î±:
- "Î‘Î½ Î±Î³Î¿ÏÎ¬ÏƒÎµÎ¹Ï‚ ÎµÎ¾Î¿Ï€Î»Î¹ÏƒÎ¼ÏŒ 3.000â‚¬ Ï€ÏÎ¹Î½ 31/12, ÎµÎ¾Î¿Î¹ÎºÎ¿Î½Î¿Î¼ÎµÎ¯Ï‚ ~1.080â‚¬ Ï†ÏŒÏÎ¿"
- "Î— Î±Î»Î»Î±Î³Î® ÎºÎ±Ï„Î·Î³Î¿ÏÎ¯Î±Ï‚ Î•Î¦ÎšÎ‘ ÏƒÎµ 2Î· Î±Ï…Î¾Î¬Î½ÎµÎ¹ Ï„Î¹Ï‚ ÎµÎºÏ€Î¹Ï€Ï„ÏŒÎ¼ÎµÎ½ÎµÏ‚ Î´Î±Ï€Î¬Î½ÎµÏ‚"
- "ÎˆÏ‡ÎµÎ¹Ï‚ 5.000â‚¬ Î´Î±Ï€Î¬Î½ÎµÏ‚ Ï‡Ï‰ÏÎ¯Ï‚ Ï€Î±ÏÎ±ÏƒÏ„Î±Ï„Î¹ÎºÏŒ â€” ÏˆÎ¬Î¾Îµ Î±Ï€Î¿Î´ÎµÎ¯Î¾ÎµÎ¹Ï‚"

> **Î£Î·Î¼ÎµÎ¯Ï‰ÏƒÎ·**: Tips Î¼ÏŒÎ½Î¿ ÎµÎ½Î´ÎµÎ¹ÎºÏ„Î¹ÎºÎ¬ â€” Î´ÎµÎ½ Î±Î½Ï„Î¹ÎºÎ±Î¸Î¹ÏƒÏ„Î¿ÏÎ½ Î»Î¿Î³Î¹ÏƒÏ„Î®.

---

## 11. Firestore Structure

```
accounting/{companyId}/
  â”œâ”€â”€ tax_calculations/{year}          â† Î•Ï„Î®ÏƒÎ¹Î¿Ï‚ Ï…Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼ÏŒÏ‚ Ï†ÏŒÏÎ¿Ï…
  â”‚
  â”œâ”€â”€ tax_installments/{year}_{n}      â† Î”ÏŒÏƒÎµÎ¹Ï‚ (3 Î±Î½Î¬ Î­Ï„Î¿Ï‚)
  â”‚
  â”œâ”€â”€ withholding_certificates/{year}  â† Î’ÎµÎ²Î±Î¹ÏÏƒÎµÎ¹Ï‚ Ï€Î±ÏÎ±ÎºÏÎ±Ï„Î®ÏƒÎµÏ‰Î½
  â”‚
  â””â”€â”€ tax_estimates/{year}_{month}     â† ÎœÎ·Î½Î¹Î±Î¯ÎµÏ‚ ÎµÎºÏ„Î¹Î¼Î®ÏƒÎµÎ¹Ï‚ (cache)

accounting/shared/
  â””â”€â”€ tax_scales/
      â”œâ”€â”€ 2025
      â””â”€â”€ 2026                         â† ÎšÎ»Î¹Î¼Î¬ÎºÎ¹Î± Ï†ÏŒÏÎ¿Ï…
```

---

## 12. Dependencies

| Module | Î£Ï‡Î­ÏƒÎ· | Î ÎµÏÎ¹Î³ÏÎ±Ï†Î® |
|--------|-------|-----------|
| **M-002** (Income/Expense) | **READS** | Î£ÏÎ½Î¿Î»Î± ÎµÏƒÏŒÎ´Ï‰Î½/ÎµÎ¾ÏŒÎ´Ï‰Î½ |
| **ACC-001** (Chart of Accounts) | **READS** | E3 code mapping |
| **ACC-004** (VAT) | **INDEPENDENT** | Î¦Î Î‘ Î¾ÎµÏ‡Ï‰ÏÎ¹ÏƒÏ„ÏŒÏ‚ (Î´ÎµÎ½ Î±Ï†Î¿ÏÎ¬ Ï†ÏŒÏÎ¿ ÎµÎ¹ÏƒÎ¿Î´Î®Î¼Î±Ï„Î¿Ï‚) |
| **ACC-006** (EFKA) | **READS** | Î•Î¦ÎšÎ‘ ÎµÎºÏ€Î¹Ï€Ï„ÏŒÎ¼ÎµÎ½ÎµÏ‚ (585_005) |
| **ACC-007** (Fixed Assets) | **READS** | Î‘Ï€Î¿ÏƒÎ²Î­ÏƒÎµÎ¹Ï‚ (587_001) |
| **M-003** (Invoicing) | **READS** | Î Î±ÏÎ±ÎºÏÎ±Ï„Î·Î¸Î­Î½Ï„ÎµÏ‚ Ï†ÏŒÏÎ¿Î¹ |
| **M-010** (Reports) | **FEEDS** | Î•1/Î•3 auto-fill |

---

## 13. Open Questions

| # | Î•ÏÏÏ„Î·ÏƒÎ· | Status |
|---|---------|--------|
| 1 | Î ÏŒÏƒÎ± Ï‡ÏÏŒÎ½Î¹Î± Î´ÏÎ±ÏƒÏ„Î·ÏÎ¹ÏŒÏ„Î·Ï„Î±Ï‚; (55% Î® 100% Ï€ÏÎ¿ÎºÎ±Ï„Î±Î²Î¿Î»Î®) | DEFAULT: 100% (>3 Ï‡ÏÏŒÎ½Î¹Î±) |
| 2 | Î•Î¹ÏƒÏ†Î¿ÏÎ¬ Î±Î»Î»Î·Î»ÎµÎ³Î³ÏÎ·Ï‚ 2026: Î‘Î½Î±ÏƒÏ„Î­Î»Î»ÎµÏ„Î±Î¹; | DEFAULT: Î‘Î½Î±ÏƒÏ„Î¿Î»Î® (ÎµÎ»Î­Î³Ï‡ÎµÏ„Î±Î¹) |
| 3 | Î‘Ï…Ï„ÏŒÎ¼Î±Ï„Î· Ï…Ï€Î¿Î²Î¿Î»Î® Î•1/Î•3 Î¼Î­ÏƒÏ‰ TAXISnet API; | DEFAULT: Export CSV only |

---

## 14. Decision Log

| Date | Decision | Author |
|------|----------|--------|
| 2026-02-09 | ADR Created â€” Tax Engine (Income Tax) | Î“Î¹ÏÏÎ³Î¿Ï‚ + Claude Code |
| 2026-02-09 | ÎšÎ»Î¯Î¼Î±ÎºÎ± 5 ÎºÎ»Î¹Î¼Î±ÎºÎ¯Ï‰Î½ (9%-44%), config-driven | Claude Code |
| 2026-02-09 | Î ÏÎ¿ÎºÎ±Ï„Î±Î²Î¿Î»Î®: 100% (>3 Ï‡ÏÏŒÎ½Î¹Î± Î´ÏÎ±ÏƒÏ„Î·ÏÎ¹ÏŒÏ„Î·Ï„Î±Ï‚) | Claude Code |
| 2026-02-09 | Î¤Î­Î»Î¿Ï‚ ÎµÏ€Î¹Ï„Î·Î´ÎµÏÎ¼Î±Ï„Î¿Ï‚: 650â‚¬ (Î˜ÎµÏƒÏƒÎ±Î»Î¿Î½Î¯ÎºÎ· >200K) | Claude Code |
| 2026-02-09 | 3 Î´ÏŒÏƒÎµÎ¹Ï‚ (Î™Î¿ÏÎ», Î£ÎµÏ€Ï„, ÎÎ¿ÎµÎ¼) + reminders | Claude Code |
| 2026-02-09 | Real-time estimator: annualized projection + monthly reserve | Claude Code |
| 2026-02-09 | Withholding reconciliation: track Î²ÎµÎ²Î±Î¹ÏÏƒÎµÏ‰Î½ Î±Î½Î¬ Ï€ÎµÎ»Î¬Ï„Î· | Claude Code |
| 2026-02-09 | E1/E3 auto-fill ÎºÏ‰Î´Î¹ÎºÏÎ½ (export CSV) | Claude Code |
| 2026-02-09 | Tax planning insights (AI tips â€” ÎµÎ½Î´ÎµÎ¹ÎºÏ„Î¹ÎºÎ¬) | Claude Code |
| 2026-02-09 | **Phase 2 implemented** â€” types/tax.ts: TaxBracket, TaxScaleConfig (brackets + prepayment + solidarity), TaxCalculationParams, TaxBracketResult, TaxResult (full breakdown), TaxEstimate (real-time projection), TaxInstallment (3 Î´ÏŒÏƒÎµÎ¹Ï‚), TaxPlanningInsight, WithholdingReconciliation. types/interfaces.ts: ITaxEngine (calculateAnnualTax, estimateTax, getTaxScale, calculateInstallments) | Claude Code |
| 2026-02-09 | **Phase 3 implemented** â€” services/config/tax-config.ts: `GREEK_TAX_SCALES` (ReadonlyMap 2024/2025/2026), 5 brackets (9%/22%/28%/36%/44%), prepaymentRate 55%, professionalTax 650â‚¬, `getTaxScaleForYear()` with fallback. services/engines/tax-engine.ts: `TaxEngine implements ITaxEngine` â€” `calculateAnnualTax(params)` progressive bracket calculation, `estimateTax(fiscalYear)` async projection, `getTaxScale(year)`, `calculateInstallments(amount, year)` with 3 due dates (July/September/November) | Claude Code |

---

*ADR Format based on: Michael Nygard's Architecture Decision Records*
