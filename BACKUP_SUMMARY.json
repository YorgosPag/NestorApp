{
  "category": "FEATURE",
  "shortDescription": "EPE (ΕΠΕ) LLC support — corporate tax 22%, dividends 5%, member management",
  "problem": "Το λογιστικό subapp υποστήριζε μόνο Ατομική και ΟΕ. Η ΕΠΕ (3η νομική μορφή) δεν είχε implementation παρόλο που ο τύπος 'epe' υπήρχε στο EntityType.",
  "cause": "Incremental feature delivery — ΕΠΕ ήταν planned αλλά δεν είχε υλοποιηθεί ακόμα",
  "filesChanged": [
    "src/subapps/accounting/types/entity.ts",
    "src/subapps/accounting/types/company.ts",
    "src/subapps/accounting/types/tax.ts",
    "src/subapps/accounting/types/efka.ts",
    "src/subapps/accounting/types/interfaces.ts",
    "src/subapps/accounting/types/index.ts",
    "src/subapps/accounting/utils/entity-guards.ts",
    "src/subapps/accounting/services/config/tax-config.ts",
    "src/subapps/accounting/services/engines/tax-engine.ts",
    "src/subapps/accounting/services/accounting-service.ts",
    "src/subapps/accounting/services/repository/firestore-accounting-repository.ts",
    "src/subapps/accounting/components/setup/EntityTypeSelector.tsx",
    "src/subapps/accounting/components/setup/SetupPageContent.tsx",
    "src/subapps/accounting/components/setup/MemberManagementSection.tsx (NEW)",
    "src/subapps/accounting/components/setup/MemberRow.tsx (NEW)",
    "src/subapps/accounting/components/tax/CorporateTaxBreakdown.tsx (NEW)",
    "src/app/api/accounting/members/route.ts (NEW)",
    "src/app/api/accounting/setup/route.ts",
    "src/app/api/accounting/tax/estimate/route.ts",
    "src/app/api/accounting/tax/dashboard/route.ts",
    "src/app/api/accounting/efka/summary/route.ts",
    "src/i18n/locales/el/accounting.json",
    "src/i18n/locales/en/accounting.json",
    "src/subapps/accounting/docs/adrs/ADR-ACC-014-epe-llc-support.md (NEW)"
  ],
  "solution": {
    "phase1": "Bugfixes: Fix hardcoded professionalTax:650 in estimateTax(), fix tax dashboard entity dispatch",
    "phase2": "Type system: Member, MemberEFKAConfig, EPECompanyProfile, isLlc() guard, CorporateTaxResult, MemberDividendResult, EPETaxResult",
    "phase3": "Tax engine: calculateCorporateTax() — 22% flat, 80% prepayment, per-member dividends 5%. Config: getCorporateTaxRate, getDividendTaxRate, getPrepaymentRateForEntity",
    "phase4": "API routes: /api/accounting/members (GET/PUT), extend setup/tax/efka routes with EPE path. Repository: getMembers/saveMembers/getMemberEFKAPayments",
    "phase5": "UI: Enable EPE in EntityTypeSelector, MemberManagementSection (shares, capital, manager toggle, EFKA), CorporateTaxBreakdown (22% + dividends 5% + retained earnings). i18n: el/en translations"
  },
  "testing": {
    "typescript": "npx tsc --noEmit: 0 errors",
    "deployment": "Pushed to Vercel: dce34662"
  },
  "notes": [
    "5 new files, 19 modified, 1491 insertions, 49 deletions",
    "ΕΠΕ: Εταιρικός φόρος 22% flat (ΟΧΙ κλιμακωτός), Μερίσματα 5%, Προκαταβολή 80%, Τέλος Επιτηδ. 1000€",
    "Γ' κατηγορίας βιβλία (Διπλογραφικά) ΥΠΟΧΡΕΩΤΙΚΑ — enforced στο setup",
    "ΕΦΚΑ μόνο για διαχειριστές (passive members exempt)",
    "ΓΕΜΗ υποχρεωτικό για ΕΠΕ",
    "Backward compatible: existing sole_proprietor/OE data untouched"
  ],
  "contributors": {
    "user": "Γιώργος Παγώνης",
    "assistant": "Claude Opus 4.6",
    "sessionDate": "2026-02-12"
  },
  "relatedBackups": [
    "backup-2026-02-10-accounting-oe-support",
    "backup-2026-02-10-accounting-phase1-complete"
  ],
  "commits": [
    {
      "hash": "dce34662",
      "message": "feat: EPE (ΕΠΕ) LLC support — corporate tax 22%, dividends 5%, member management"
    }
  ]
}
