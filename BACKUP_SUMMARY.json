{
  "backupId": "backup-2026-02-07-universal-centralization",
  "timestamp": "2026-02-07T15:00:00+02:00",
  "category": "REFACTOR",
  "shortDescription": "Universal centralization â€” all project tabs use design tokens (23 files, ~150 replacements)",
  "problem": "Î¤Î± project tab components ÎµÎ¯Ï‡Î±Î½ ~150 hardcoded typography, spacing, ÎºÎ±Î¹ color Tailwind classes (text-sm, text-muted-foreground, text-blue-600, text-gray-500, space-y-4, p-6 ÎºÎ»Ï€) ÎµÎ½Ï Ï…Ï€Î¬ÏÏ‡Î¿Ï…Î½ ÎºÎµÎ½Ï„ÏÎ¹ÎºÎ¿Ï€Î¿Î¹Î·Î¼Î­Î½Î± hooks (useSpacingTokens, useTypography, useSemanticColors, useIconSizes).",
  "cause": "Î¤Î± components Î³ÏÎ¬Ï†Ï„Î·ÎºÎ±Î½ ÏƒÎµ Î´Î¹Î±Ï†Î¿ÏÎµÏ„Î¹ÎºÎ­Ï‚ Ï‡ÏÎ¿Î½Î¹ÎºÎ­Ï‚ Ï€ÎµÏÎ¹ÏŒÎ´Î¿Ï…Ï‚ â€” Î¼ÎµÏÎ¹ÎºÎ¬ Ï€ÏÎ¹Î½ Ï„Î· Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î± Ï„Ï‰Î½ hooks, Î¬Î»Î»Î± Ï‡Ï‰ÏÎ¯Ï‚ Î³Î½ÏÏƒÎ· Ï„Ï‰Î½ hooks. Audit Î±Ï€Î¿ÎºÎ¬Î»Ï…ÏˆÎµ Î±ÏƒÏ…Î½Î­Ï€ÎµÎ¹Î± ÏƒÎµ ÎŸÎ›Î‘ Ï„Î± project tabs.",
  "filesChanged": [
    "src/components/projects/PhotosTab.tsx",
    "src/components/projects/VideosTab.tsx",
    "src/components/projects/documents-project-tab.tsx",
    "src/components/projects/tabs/FloorplanViewerTab.tsx",
    "src/components/projects/tabs/ProjectLocationsTab.tsx",
    "src/components/projects/structure-tab/ProjectStructureTab.tsx",
    "src/components/projects/parking/ParkingTab.tsx",
    "src/components/projects/general-tab/GeneralProjectTab.tsx",
    "src/components/projects/general-tab/parts/StatCard.tsx",
    "src/components/projects/general-tab/parts/ProjectBuildingsCard.tsx",
    "src/components/projects/general-tab/parts/ProjectCustomersTable.tsx",
    "src/components/projects/PermitsAndStatusTab.tsx",
    "src/components/projects/ProjectAttachmentsTab.tsx",
    "src/components/projects/contributors-tab.tsx",
    "src/components/projects/structure-tab/parts/BuildingNode.tsx",
    "src/components/projects/structure-tab/parts/UnitNode.tsx",
    "src/components/projects/structure-tab/parts/ParkingNode.tsx",
    "src/components/projects/structure-tab/parts/StorageNode.tsx",
    "src/components/projects/structure-tab/parts/StatsOverview.tsx",
    "src/components/projects/structure-tab/parts/ProjectHeader.tsx",
    "src/components/projects/structure-tab/parts/EmptyState.tsx",
    "src/components/projects/structure-tab/parts/LoadingSkeleton.tsx",
    "src/components/projects/GeneralProjectHeader.tsx",
    "docs/centralized-systems/ai/governance.md",
    "docs/centralized-systems/ai/observability.md",
    "docs/centralized-systems/reference/adrs/ADR-169-modular-ai-architecture.md",
    "docs/centralized-systems/ai/use-cases/UC-010-status-inquiry.md",
    "docs/centralized-systems/ai/use-cases/UC-011-defect-reporting.md",
    "docs/centralized-systems/ai/use-cases/UC-014-property-sale-process.md",
    "docs/centralized-systems/ai/use-cases/UC-015-building-permit-process.md",
    "docs/centralized-systems/ai/use-cases/UC-016-procurement-process.md",
    "docs/centralized-systems/ai/use-cases/UC-018-daily-briefing.md",
    "docs/centralized-systems/ai/use-cases/UC-019-reminders-followup.md"
  ],
  "solution": {
    "phase1_stub_tabs": "PhotosTab, VideosTab, documents-project-tab, FloorplanViewerTab â†’ +useSpacingTokens, +useSemanticColors, p-6â†’spacing.padding.lg, text-muted-foregroundâ†’colors.text.muted",
    "phase2_main_tabs": "ProjectLocationsTab (+useSemanticColors), ProjectStructureTab (+useSemanticColors, cn), ParkingTab (+useSpacingTokens) â†’ space-y-6â†’spacing.spaceBetween.lg",
    "phase3_general_internals": "GeneralProjectTab (+useTypography, +useSemanticColors), StatCard (+useTypography), ProjectBuildingsCard/ProjectCustomersTable â†’ table headers centralized",
    "phase4_detail_tabs": "PermitsAndStatusTab (6x labelsâ†’typography.label.sm), ProjectAttachmentsTab (3x labels), contributors-tab (+useSemanticColors, text-blue-600â†’colors.text.info, text-red-600â†’colors.text.error)",
    "phase5_structure_parts": "BuildingNode, UnitNode, ParkingNode, StorageNode, StatsOverview, ProjectHeader, EmptyState, LoadingSkeleton â†’ +spacing, +typography, +iconSizes, text-gray-500â†’colors.text.muted, text-orange-600â†’colors.text.warning, dark:bg-blue-900/30 removed",
    "phase6_header": "GeneralProjectHeader (+useTypography) â†’ text-green-500â†’colors.text.success, text-xsâ†’typography.body.xs"
  },
  "testing": {
    "typescript": "0 new errors in src/components/projects/ â€” pre-commit checks passed",
    "manual": "33 files committed and pushed to Vercel",
    "deployment": "Vercel auto-deployment triggered via git push origin feat/adr-169-ai-architecture-suite",
    "visualCheck": "1:1 token mapping â€” zero visual change expected"
  },
  "notes": [
    "ğŸ¨ UNIVERSAL CENTRALIZATION: ~150 hardcoded Tailwind values â†’ centralized hooks",
    "ğŸ“‹ 23 project tab components migrated in 6 phases",
    "ğŸ”¤ Typography: text-smâ†’typography.body.sm, text-xsâ†’typography.body.xs, text-sm font-mediumâ†’typography.label.sm, text-2xl font-boldâ†’typography.heading.lg, font-semiboldâ†’typography.heading.sm",
    "ğŸ“ Spacing: p-6â†’spacing.padding.lg, space-y-4â†’spacing.spaceBetween.md, gap-2â†’spacing.gap.sm, ml-6â†’spacing.margin.left.lg, mb-4â†’spacing.margin.bottom.md",
    "ğŸ¨ Colors: text-muted-foregroundâ†’colors.text.muted, text-blue-600â†’colors.text.info, text-red-600â†’colors.text.error, text-green-500â†’colors.text.success, text-orange-600â†’colors.text.warning, text-gray-500â†’colors.text.muted, text-destructiveâ†’colors.text.error",
    "ğŸ–¼ï¸ Icons: size={16}â†’className={iconSizes.sm}, size={24}â†’className={iconSizes.lg}",
    "âš ï¸ Exceptions preserved: gap-3/p-3 (12px no token), h-9/h-10/h-12 (input heights), px-1.5/py-0.5 (sub-token), shrink-0/overflow-x-auto (layout utils), grid templates, StatCard colorClass (user prop), text-popover-foreground (shadcn), lucide size in BuildingNode tabs",
    "ğŸ“„ ADR-169 AI architecture docs also included in commit",
    "ğŸ·ï¸ Safety checkpoint: safety/universal-centralization-2026-02-07"
  ],
  "contributors": {
    "user": "Î“Î¹ÏÏÎ³Î¿Ï‚ Î Î±Î³ÏÎ½Î·Ï‚",
    "assistant": "Claude Opus 4.6 (Anthropic)",
    "sessionDate": "2026-02-07"
  },
  "relatedBackups": [
    "backup-2026-02-07-spacing-centralization",
    "backup-2026-02-06-notifications-cards-email"
  ],
  "commits": [
    {
      "hash": "c71d539f",
      "message": "refactor: universal centralization â€” all project tabs use design tokens",
      "files": 33,
      "insertions": 1437,
      "deletions": 100
    }
  ],
  "statistics": {
    "filesChanged": 33,
    "insertions": 1437,
    "deletions": 100,
    "newFiles": 7,
    "commitsInBackup": 1
  }
}
